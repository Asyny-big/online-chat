{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import{io}from\"socket.io-client\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=\"http://localhost:5000/api\";export default function App(){const[token,setToken]=useState(localStorage.getItem(\"token\"));const[channels,setChannels]=useState([]);const[currentChannel,setCurrentChannel]=useState(null);const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[typing,setTyping]=useState(\"\");const[showCreate,setShowCreate]=useState(false);const[newChannelName,setNewChannelName]=useState(\"\");const[authMode,setAuthMode]=useState(\"login\");// \"login\" | \"register\"\nconst[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const socketRef=useRef(null);const messagesEndRef=useRef(null);// Функция для корректного декодирования JWT с поддержкой Unicode\nfunction parseJwt(token){const base64Url=token.split(\".\")[1];const base64=base64Url.replace(/-/g,\"+\").replace(/_/g,\"/\");const jsonPayload=decodeURIComponent(atob(base64).split(\"\").map(c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));return JSON.parse(jsonPayload);}// Загружаем список каналов при загрузке и при изменении токена\nuseEffect(()=>{if(token){axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setChannels(res.data)).catch(()=>setChannels([]));socketRef.current=io(\"http://localhost:5000\",{auth:{token}});socketRef.current.on(\"message\",msg=>{setMessages(prev=>msg.channel===currentChannel?[...prev,msg]:prev);});socketRef.current.on(\"typing\",e=>setTyping(\"\".concat(e.user,\" \\u043F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\")));return()=>{socketRef.current&&socketRef.current.disconnect();};}},[token]);// Загружаем сообщения выбранного канала\nuseEffect(()=>{if(token&&currentChannel){axios.get(\"\".concat(API_URL,\"/messages/\").concat(currentChannel),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setMessages(res.data));if(socketRef.current)socketRef.current.emit(\"join\",currentChannel);}},[token,currentChannel]);// Прокрутка вниз при изменении сообщений\nuseEffect(()=>{if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});}},[messages]);// Получаем username текущего пользователя из токена\nconst getUsername=()=>{if(!token)return\"\";try{const t=token.split(\".\")[1].replace(/-/g,\"+\").replace(/_/g,\"/\");const n=decodeURIComponent(atob(t).split(\"\").map(c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));return JSON.parse(n).username;}catch(_unused){return\"\";}};const myUsername=getUsername();// Подписка на новые сообщения по сокету\nuseEffect(()=>{if(!socketRef.current)return;const handler=msg=>{if(msg.channel===currentChannel){// Если сообщение отправил текущий пользователь, не добавляем (он уже видит своё сообщение)\n// Если другой пользователь — добавляем\nif(msg.sender!==myUsername){setMessages(prev=>[...prev,msg]);}// Если это отправитель, ничего не делаем (сообщение уже добавлено локально при отправке)\n}};socketRef.current.on(\"message\",handler);return()=>{socketRef.current.off(\"message\",handler);};},[currentChannel,socketRef.current,myUsername]);// Создание канала\nconst handleCreateChannel=async()=>{if(!newChannelName.trim())return;try{const user=parseJwt(token).username;// Передаем массив с текущим пользователем\nlet t=parseJwt(token).username;if(typeof t!==\"string\"){if(typeof Buffer!==\"undefined\"&&Buffer.isBuffer(t)){t=Buffer.from(t).toString(\"utf8\");}else{t=String(t);}}t=t.trim();const res=await axios.post(\"\".concat(API_URL,\"/channels\"),{name:newChannelName,members:[t]},{headers:{Authorization:\"Bearer \".concat(token)}});setShowCreate(false);setNewChannelName(\"\");// Обновить список каналов\nconst channelsRes=await axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}});setChannels(channelsRes.data);setCurrentChannel(res.data._id);socketRef.current&&socketRef.current.emit(\"join\",res.data._id);}catch(_unused2){alert(\"Ошибка создания канала\");}};// Отправка сообщения\nconst handleSend=()=>{if(!input.trim()||!currentChannel)return;const user=parseJwt(token).username;const msg={text:input,sender:user,channel:currentChannel};// Перед отправкой сообщения обязательно join в канал\nif(socketRef.current)socketRef.current.emit(\"join\",currentChannel);// Отправляем сообщение через сокет\nsocketRef.current.emit(\"message\",msg);// Удаляем локальное добавление сообщения:\n// l(e=>[...e,{...n,_id:Date.now()}]);\nsetInput(\"\");};// Аутентификация\nconst handleAuth=async()=>{setError(\"\");try{if(authMode===\"register\"){await axios.post(\"\".concat(API_URL,\"/register\"),{username,password});}const res=await axios.post(\"\".concat(API_URL,\"/login\"),{username,password});localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}catch(err){// Показываем ошибку с сервера, если есть\nif(err.response&&err.response.data&&err.response.data.error){setError(err.response.data.error);}else{setError(\"Неверный логин или пароль, либо пользователь не зарегистрирован\");}}};if(!token){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:authMode===\"register\"?\"Регистрация\":\"Вход\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0418\\u043C\\u044F\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAuth,children:authMode===\"register\"?\"Зарегистрироваться\":\"Войти\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAuthMode(authMode===\"register\"?\"login\":\"register\"),children:authMode===\"register\"?\"Войти\":\"Регистрация\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:220,paddingRight:10,borderRight:\"1px solid #ccc\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u0430\\u043D\\u0430\\u043B\\u044B\"}),channels.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:\"#888\",marginBottom:8},children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u043D\\u0430\\u043B\\u043E\\u0432\"}),showCreate?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannelName,onChange:e=>setNewChannelName(e.target.value),style:{width:\"90%\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateChannel,style:{marginTop:4},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreate(false),style:{marginLeft:4},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreate(true),children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u0430\\u043D\\u0430\\u043B\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[channels.map(ch=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>setCurrentChannel(ch._id),style:{cursor:\"pointer\",background:currentChannel===ch._id?\"#eee\":\"\",padding:\"2px 0\"},children:ch.name},ch._id)),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:10},onClick:()=>setShowCreate(v=>!v),children:showCreate?\"Скрыть создание\":\"Создать канал\"}),showCreate&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannelName,onChange:e=>setNewChannelName(e.target.value),style:{width:\"90%\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateChannel,style:{marginTop:4},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:20,color:\"red\"},onClick:()=>{localStorage.removeItem(\"token\");window.location.reload();},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,marginLeft:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0427\\u0430\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{style:{height:300,overflowY:\"auto\",border:\"1px solid #ccc\"},children:[messages.map(m=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[m.sender,\":\"]}),\" \",m.text,m.fileUrl&&/*#__PURE__*/_jsx(\"a\",{href:m.fileUrl,target:\"_blank\",rel:\"noopener noreferrer\",children:\"[\\u0444\\u0430\\u0439\\u043B]\"})]},m._id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{children:typing}),/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(currentChannel){socketRef.current.emit(\"typing\",{channel:currentChannel});if(e.key===\"Enter\")handleSend();}},disabled:!currentChannel,placeholder:currentChannel?\"Введите сообщение...\":\"Выберите канал\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,disabled:!currentChannel||!input.trim(),children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","App","token","setToken","localStorage","getItem","channels","setChannels","currentChannel","setCurrentChannel","messages","setMessages","input","setInput","typing","setTyping","showCreate","setShowCreate","newChannelName","setNewChannelName","authMode","setAuthMode","username","setUsername","password","setPassword","error","setError","socketRef","messagesEndRef","parseJwt","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","get","concat","headers","Authorization","then","res","data","catch","current","auth","on","msg","prev","channel","e","user","disconnect","emit","scrollIntoView","behavior","getUsername","t","n","_unused","myUsername","handler","sender","off","handleCreateChannel","trim","Buffer","isBuffer","from","String","post","name","members","channelsRes","_id","_unused2","alert","handleSend","text","handleAuth","setItem","err","response","children","style","color","placeholder","value","onChange","target","type","onClick","display","width","paddingRight","borderRight","length","marginBottom","marginTop","marginLeft","ch","cursor","background","padding","v","removeItem","window","location","reload","flex","height","overflowY","border","m","fileUrl","href","rel","ref","onKeyDown","key","disabled"],"sources":["D:/prr/prr/semak4/driver/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nconst API_URL = \"http://localhost:5000/api\";\r\n\r\nexport default function App() {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n  const [channels, setChannels] = useState([]);\r\n  const [currentChannel, setCurrentChannel] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [typing, setTyping] = useState(\"\");\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [newChannelName, setNewChannelName] = useState(\"\");\r\n  const [authMode, setAuthMode] = useState(\"login\"); // \"login\" | \"register\"\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const socketRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Функция для корректного декодирования JWT с поддержкой Unicode\r\n  function parseJwt(token) {\r\n    const base64Url = token.split(\".\")[1];\r\n    const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    const jsonPayload = decodeURIComponent(\r\n      atob(base64)\r\n        .split(\"\")\r\n        .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n        .join(\"\")\r\n    );\r\n    return JSON.parse(jsonPayload);\r\n  }\r\n\r\n  // Загружаем список каналов при загрузке и при изменении токена\r\n  useEffect(() => {\r\n    if (token) {\r\n      axios\r\n        .get(`${API_URL}/channels`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setChannels(res.data))\r\n        .catch(() => setChannels([]));\r\n      socketRef.current = io(\"http://localhost:5000\", {\r\n        auth: { token },\r\n      });\r\n      socketRef.current.on(\"message\", (msg) => {\r\n        setMessages((prev) =>\r\n          msg.channel === currentChannel ? [...prev, msg] : prev\r\n        );\r\n      });\r\n      socketRef.current.on(\"typing\", (e) => setTyping(`${e.user} печатает...`));\r\n      return () => {\r\n        socketRef.current && socketRef.current.disconnect();\r\n      };\r\n    }\r\n  }, [token]);\r\n\r\n  // Загружаем сообщения выбранного канала\r\n  useEffect(() => {\r\n    if (token && currentChannel) {\r\n      axios\r\n        .get(`${API_URL}/messages/${currentChannel}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setMessages(res.data));\r\n      if (socketRef.current) socketRef.current.emit(\"join\", currentChannel);\r\n    }\r\n  }, [token, currentChannel]);\r\n\r\n  // Прокрутка вниз при изменении сообщений\r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages]);\r\n\r\n  // Получаем username текущего пользователя из токена\r\n  const getUsername = () => {\r\n    if (!token) return \"\";\r\n    try {\r\n      const t = token.split(\".\")[1].replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n      const n = decodeURIComponent(\r\n        atob(t)\r\n          .split(\"\")\r\n          .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n          .join(\"\")\r\n      );\r\n      return JSON.parse(n).username;\r\n    } catch {\r\n      return \"\";\r\n    }\r\n  };\r\n  const myUsername = getUsername();\r\n\r\n  // Подписка на новые сообщения по сокету\r\n  useEffect(() => {\r\n    if (!socketRef.current) return;\r\n    const handler = (msg) => {\r\n      if (msg.channel === currentChannel) {\r\n        // Если сообщение отправил текущий пользователь, не добавляем (он уже видит своё сообщение)\r\n        // Если другой пользователь — добавляем\r\n        if (msg.sender !== myUsername) {\r\n          setMessages((prev) => [...prev, msg]);\r\n        }\r\n        // Если это отправитель, ничего не делаем (сообщение уже добавлено локально при отправке)\r\n      }\r\n    };\r\n    socketRef.current.on(\"message\", handler);\r\n    return () => {\r\n      socketRef.current.off(\"message\", handler);\r\n    };\r\n  }, [currentChannel, socketRef.current, myUsername]);\r\n\r\n  // Создание канала\r\n  const handleCreateChannel = async () => {\r\n    if (!newChannelName.trim()) return;\r\n    try {\r\n      const user = parseJwt(token).username;\r\n      // Передаем массив с текущим пользователем\r\n      let t = parseJwt(token).username;\r\n      if (typeof t !== \"string\") {\r\n        if (typeof Buffer !== \"undefined\" && Buffer.isBuffer(t)) {\r\n          t = Buffer.from(t).toString(\"utf8\");\r\n        } else {\r\n          t = String(t);\r\n        }\r\n      }\r\n      t = t.trim();\r\n      const res = await axios.post(\r\n        `${API_URL}/channels`,\r\n        { name: newChannelName, members: [t] },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setShowCreate(false);\r\n      setNewChannelName(\"\");\r\n      // Обновить список каналов\r\n      const channelsRes = await axios.get(`${API_URL}/channels`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setChannels(channelsRes.data);\r\n      setCurrentChannel(res.data._id);\r\n      socketRef.current && socketRef.current.emit(\"join\", res.data._id);\r\n    } catch {\r\n      alert(\"Ошибка создания канала\");\r\n    }\r\n  };\r\n\r\n  // Отправка сообщения\r\n  const handleSend = () => {\r\n    if (!input.trim() || !currentChannel) return;\r\n    const user = parseJwt(token).username;\r\n    const msg = {\r\n      text: input,\r\n      sender: user,\r\n      channel: currentChannel,\r\n    };\r\n    // Перед отправкой сообщения обязательно join в канал\r\n    if (socketRef.current) socketRef.current.emit(\"join\", currentChannel);\r\n    // Отправляем сообщение через сокет\r\n    socketRef.current.emit(\"message\", msg);\r\n    // Удаляем локальное добавление сообщения:\r\n    // l(e=>[...e,{...n,_id:Date.now()}]);\r\n    setInput(\"\");\r\n  };\r\n\r\n  // Аутентификация\r\n  const handleAuth = async () => {\r\n    setError(\"\");\r\n    try {\r\n      if (authMode === \"register\") {\r\n        await axios.post(`${API_URL}/register`, { username, password });\r\n      }\r\n      const res = await axios.post(`${API_URL}/login`, { username, password });\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      setToken(res.data.token);\r\n    } catch (err) {\r\n      // Показываем ошибку с сервера, если есть\r\n      if (err.response && err.response.data && err.response.data.error) {\r\n        setError(err.response.data.error);\r\n      } else {\r\n        setError(\r\n          \"Неверный логин или пароль, либо пользователь не зарегистрирован\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!token) {\r\n    return (\r\n      <div>\r\n        <h2>{authMode === \"register\" ? \"Регистрация\" : \"Вход\"}</h2>\r\n        {error && <div style={{ color: \"red\" }}>{error}</div>}\r\n        <input\r\n          placeholder=\"Имя\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n        />\r\n        <input\r\n          placeholder=\"Пароль\"\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button onClick={handleAuth}>\r\n          {authMode === \"register\" ? \"Зарегистрироваться\" : \"Войти\"}\r\n        </button>\r\n        <button onClick={() => setAuthMode(authMode === \"register\" ? \"login\" : \"register\")}>\r\n          {authMode === \"register\" ? \"Войти\" : \"Регистрация\"}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <div style={{ width: 220, paddingRight: 10, borderRight: \"1px solid #ccc\" }}>\r\n        <h3>Каналы</h3>\r\n        {channels.length === 0 ? (\r\n          <div>\r\n            <div style={{ color: \"#888\", marginBottom: 8 }}>\r\n              Нет доступных каналов\r\n            </div>\r\n            {showCreate ? (\r\n              <div>\r\n                <input\r\n                  placeholder=\"Название канала\"\r\n                  value={newChannelName}\r\n                  onChange={(e) => setNewChannelName(e.target.value)}\r\n                  style={{ width: \"90%\" }}\r\n                />\r\n                <button onClick={handleCreateChannel} style={{ marginTop: 4 }}>\r\n                  Создать\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowCreate(false)}\r\n                  style={{ marginLeft: 4 }}\r\n                >\r\n                  Отмена\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <button onClick={() => setShowCreate(true)}>\r\n                Создать канал\r\n              </button>\r\n            )\r\n            }\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {channels.map((ch) => (\r\n              <div\r\n                key={ch._id}\r\n                onClick={() => setCurrentChannel(ch._id)}\r\n                style={{\r\n                  cursor: \"pointer\",\r\n                  background: currentChannel === ch._id ? \"#eee\" : \"\",\r\n                  padding: \"2px 0\",\r\n                }}\r\n              >\r\n                {ch.name}\r\n              </div>\r\n            ))}\r\n            <button\r\n              style={{ marginTop: 10 }}\r\n              onClick={() => setShowCreate((v) => !v)}\r\n            >\r\n              {showCreate ? \"Скрыть создание\" : \"Создать канал\"}\r\n            </button>\r\n            {showCreate && (\r\n              <div style={{ marginTop: 4 }}>\r\n                <input\r\n                  placeholder=\"Название канала\"\r\n                  value={newChannelName}\r\n                  onChange={(e) => setNewChannelName(e.target.value)}\r\n                  style={{ width: \"90%\" }}\r\n                />\r\n                <button onClick={handleCreateChannel} style={{ marginTop: 4 }}>\r\n                  Создать\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n        <button\r\n          style={{ marginTop: 20, color: \"red\" }}\r\n          onClick={() => {\r\n            localStorage.removeItem(\"token\");\r\n            window.location.reload();\r\n          }}\r\n        >\r\n          Выйти\r\n        </button>\r\n      </div>\r\n      <div style={{ flex: 1, marginLeft: 20 }}>\r\n        <h3>Чат</h3>\r\n        <div style={{ height: 300, overflowY: \"auto\", border: \"1px solid #ccc\" }}>\r\n          {messages.map((m) => (\r\n            <div key={m._id}>\r\n              <b>{m.sender}:</b>{\" \"}\r\n              {m.text}\r\n              {m.fileUrl && (\r\n                <a href={m.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  [файл]\r\n                </a>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        <div>{typing}</div>\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => {\r\n            if (currentChannel) {\r\n              socketRef.current.emit(\"typing\", { channel: currentChannel });\r\n              if (e.key === \"Enter\") handleSend();\r\n            }\r\n          }}\r\n          disabled={!currentChannel}\r\n          placeholder={\r\n            currentChannel\r\n              ? \"Введите сообщение...\"\r\n              : \"Выберите канал\"\r\n          }\r\n        />\r\n        <button\r\n          onClick={handleSend}\r\n          disabled={!currentChannel || !input.trim()}\r\n        >\r\n          Отправить\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}