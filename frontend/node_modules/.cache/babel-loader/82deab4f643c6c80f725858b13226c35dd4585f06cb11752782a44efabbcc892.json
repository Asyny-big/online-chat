{"ast":null,"code":"import _objectWithoutProperties from\"C:/Users/larak/AppData/Local/npm-cache/_npx/cd53aabf71f3f793/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _toPropertyKey from\"C:/Users/larak/AppData/Local/npm-cache/_npx/cd53aabf71f3f793/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js\";import _objectSpread from\"C:/Users/larak/AppData/Local/npm-cache/_npx/cd53aabf71f3f793/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import*as chatStyles from\"./styles/chatStyles\";import io from\"socket.io-client\";import{LocalNotifications}from\"@capacitor/local-notifications\";// –ë–∞–∑–æ–≤—ã–π URL API ‚Äî —Å—Ä–∞–∑—É —É–∫–∞–∂–∏ IP —Å–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ—Ä—Ç\n// –ø—Ä–∏–º–µ—Ä: http://192.168.0.10:5000\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE=\"http://95.81.119.128:5000\";const API_URL=\"\".concat(API_BASE,\"/api\");function parseToken(token){if(!token)return\"\";try{const t=token.split(\".\")[1].replace(/-/g,\"+\").replace(/_/g,\"/\");const n=decodeURIComponent(atob(t).split(\"\").map(c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));return JSON.parse(n).username||\"\";}catch(_unused){return\"\";}}function App(){var _channels$find,_userProfile$age,_userProfile$city,_userProfile$status;const[token,setToken]=useState(localStorage.getItem(\"token\"));const[channels,setChannels]=useState([]);const[selectedChannel,setSelectedChannel]=useState(null);const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[typing,setTyping]=useState(\"\");const typingTimeoutRef=useRef(null);const[showCreate,setShowCreate]=useState(false);const[newChannel,setNewChannel]=useState(\"\");const[authMode,setAuthMode]=useState(\"login\");const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[userProfile,setUserProfile]=useState(null);const[editMode,setEditMode]=useState(false);const[editData,setEditData]=useState({username:\"\",password:\"\",city:\"\",status:\"\",age:\"\"});const[showProfile,setShowProfile]=useState(false);const[]=useState(false);const[]=useState({city:\"\",status:\"\",age:\"\"});const[registering,setRegistering]=useState(false);const socketRef=useRef(null);const messagesEndRef=useRef(null);const fileInputRefChat=React.useRef(null);// –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π –≤ —á–∞—Ç\nconst fileInputRefAvatar=React.useRef(null);// –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è\nconst[avatarVersion,setAvatarVersion]=useState(Date.now());const[fileToSend,setFileToSend]=useState(null);const[filePreviewUrl,setFilePreviewUrl]=useState(null);const[modalMedia,setModalMedia]=useState(null);// {type, url, name}\nconst[attachBtnHover,setAttachBtnHover]=useState(false);// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏ –≤–ª–æ–∂–µ–Ω–∏–π\nconst[showCustomizer,setShowCustomizer]=useState(false);// –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\nconst[theme,setTheme]=useState(chatStyles.themes[0]);// –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞\nconst[recording,setRecording]=useState(false);const[recordTime,setRecordTime]=useState(0);const[mediaRecorder,setMediaRecorder]=useState(null);const[audioBlob,setAudioBlob]=useState(null);const[audioUrl,setAudioUrl]=useState(null);const recordTimerRef=useRef(null);const[mobileMenuOpen,setMobileMenuOpen]=useState(false);const[videoCall,setVideoCall]=useState({active:false,incoming:false,from:null});const[videoStreams,setVideoStreams]=useState({local:null,remotes:{}});// remotes: {socketId: MediaStream}\nconst[,setVideoPeers]=useState({});// {socketId: RTCPeerConnection}\nconst[videoError,setVideoError]=useState(\"\");const[videoConnecting,setVideoConnecting]=useState(false);const[,setMySocketId]=useState(null);const[activeCallInChannel,setActiveCallInChannel]=useState(null);// –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ\nconst[activeCallsInChannels,setActiveCallsInChannels]=useState({});// –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤ –≤ –∫–∞–Ω–∞–ª–∞—Ö\n// –ù–û–í–û–ï: —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏ –∫–∞–º–µ—Ä–æ–π\nconst[micEnabled,setMicEnabled]=useState(true);const[cameraEnabled,setCameraEnabled]=useState(true);// --- WebRTC helpers ---\nconst localVideoRef=useRef(null);const remoteVideosRef=useRef({});// {socketId: ref}\nconst videoPeersRef=useRef({});// –î–æ–±–∞–≤–ª—è–µ–º ref –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ peers\n// --- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ / WebView / Capacitor ---\nuseEffect(()=>{if(typeof window===\"undefined\")return;// Capacitor Local Notifications (Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)\n(async()=>{try{await LocalNotifications.requestPermissions();}catch(_unused2){// ignore\n}})();// –û–±—ã—á–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)\nif(\"Notification\"in window){try{Notification.requestPermission().catch(()=>{});}catch(_unused3){// ignore\n}}},[]);const showNotification=async(title,body)=>{if(typeof window===\"undefined\")return;// 1) –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ–º –≤–Ω—É—Ç—Ä–∏ Capacitor WebView ‚Äî –ø—Ä–æ–±—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\ntry{if(window.Capacitor&&LocalNotifications){await LocalNotifications.schedule({notifications:[{id:Date.now()%2147483647,title,body,schedule:{at:new Date(Date.now()+50)}}]});return;}}catch(_unused4){// ignore –∏ –ø—Ä–æ–±—É–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç\n}// 2) –§–æ–ª–±—ç–∫ –Ω–∞ –æ–±—ã—á–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\nif(!(\"Notification\"in window))return;if(document.visibilityState===\"visible\")return;if(Notification.permission!==\"granted\")return;try{new Notification(title,{body});}catch(_unused5){// ignore\n}};// –ù–û–í–û–ï: —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞\nconst toggleMicrophone=()=>{if(videoStreams.local){const audioTrack=videoStreams.local.getAudioTracks()[0];if(audioTrack){audioTrack.enabled=!audioTrack.enabled;setMicEnabled(audioTrack.enabled);console.log(\"Microphone\",audioTrack.enabled?\"enabled\":\"disabled\");}}};// –ù–û–í–û–ï: —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã\nconst toggleCamera=()=>{if(videoStreams.local){const videoTrack=videoStreams.local.getVideoTracks()[0];if(videoTrack){videoTrack.enabled=!videoTrack.enabled;setCameraEnabled(videoTrack.enabled);console.log(\"Camera\",videoTrack.enabled?\"enabled\":\"disabled\");}}};// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –∏–Ω–∏—Ü–∏–∞—Ü–∏—è ---\nconst startVideoCall=async()=>{if(!selectedChannel){alert(\"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞\");return;}console.log(\"Starting video call in channel:\",selectedChannel);setVideoError(\"\");setVideoConnecting(true);try{const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});console.log(\"Got local stream\");setVideoStreams(s=>_objectSpread(_objectSpread({},s),{},{local:stream}));setVideoCall({active:true,incoming:false,from:null,channel:selectedChannel});setActiveCallInChannel(null);// —É–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—Ö–æ–¥—è—â–µ–º –∑–≤–æ–Ω–∫–µ\n// –ù–û–í–û–ï: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –∫–∞–º–µ—Ä—ã\nsetMicEnabled(true);setCameraEnabled(true);// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∑–≤–æ–Ω–∫—É\nsocketRef.current.emit(\"video-call-join\",{channel:selectedChannel});// –ó–∞—Ç–µ–º –∏–Ω–∏—Ü–∏–∏—Ä—É–µ–º –∑–≤–æ–Ω–æ–∫ –¥–ª—è –¥—Ä—É–≥–∏—Ö\nsetTimeout(()=>{console.log(\"Sending initiate signal to channel:\",selectedChannel);socketRef.current.emit(\"video-call-initiate\",{channel:selectedChannel});setVideoConnecting(false);},500);}catch(error){console.error(\"Error starting video call:\",error);setVideoError(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É: \"+error.message);setVideoConnecting(false);setVideoCall({active:false,incoming:false,from:null});}};// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –ø—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π ---\nconst acceptVideoCall=async()=>{console.log(\"Accepting video call from:\",activeCallInChannel===null||activeCallInChannel===void 0?void 0:activeCallInChannel.from,\"in channel:\",activeCallInChannel===null||activeCallInChannel===void 0?void 0:activeCallInChannel.channel);setVideoError(\"\");setVideoConnecting(true);try{const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});console.log(\"Got local stream for incoming call\");setVideoStreams(s=>_objectSpread(_objectSpread({},s),{},{local:stream}));setVideoCall({active:true,incoming:false,from:null,channel:activeCallInChannel===null||activeCallInChannel===void 0?void 0:activeCallInChannel.channel});setActiveCallInChannel(null);// —É–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n// –ù–û–í–û–ï: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –∫–∞–º–µ—Ä—ã\nsetMicEnabled(true);setCameraEnabled(true);// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∑–≤–æ–Ω–∫—É\nsocketRef.current.emit(\"video-call-join\",{channel:activeCallInChannel===null||activeCallInChannel===void 0?void 0:activeCallInChannel.channel});setTimeout(()=>{setVideoConnecting(false);},1000);}catch(error){console.error(\"Error accepting video call:\",error);setVideoError(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É: \"+error.message);setVideoConnecting(false);setVideoCall({active:false,incoming:false,from:null});}};// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: —Å–æ–∑–¥–∞—Ç—å PeerConnection ---\nconst createPeer=async function(peerId,isInitiator){let localStream=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(videoPeersRef.current[peerId]){console.log(\"Peer already exists for:\",peerId);return videoPeersRef.current[peerId];}// –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –∏–ª–∏ —Ç–µ–∫—É—â–∏–π –ª–æ–∫–∞–ª—å–Ω—ã–π\nconst streamToUse=localStream||videoStreams.local;if(!streamToUse){console.log(\"No local stream available for peer:\",peerId);return null;}console.log(\"Creating peer connection for:\",peerId,\"as initiator:\",isInitiator);const pc=new RTCPeerConnection({iceServers:[{urls:[\"stun:95.81.119.128:3478\",\"stun:stun.l.google.com:19302\"]},{urls:[\"turn:95.81.119.128:3478?transport=udp\",\"turn:95.81.119.128:3478?transport=tcp\"],username:\"govchat\",credential:\"supersecretpassword\"}],iceCandidatePoolSize:10});// –°—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ ref –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞\nvideoPeersRef.current[peerId]=pc;// –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–∫–∏\nstreamToUse.getTracks().forEach(track=>{console.log(\"Adding track to peer:\",peerId,track.kind);pc.addTrack(track,streamToUse);});// –û–±—Ä–∞–±–æ—Ç–∫–∞ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤\npc.onicecandidate=event=>{if(event.candidate){console.log(\"Sending ICE candidate to:\",peerId,event.candidate.type);socketRef.current.emit(\"video-signal\",{channel:selectedChannel,to:peerId,data:{candidate:event.candidate}});}else{console.log(\"ICE gathering completed for:\",peerId);}};// –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞\npc.ontrack=event=>{console.log(\"Received remote stream from:\",peerId,\"tracks:\",event.streams[0].getTracks().length);const remoteStream=event.streams[0];// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ—Ç–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–∫–∏\nif(remoteStream.getTracks().length>0){setVideoStreams(s=>_objectSpread(_objectSpread({},s),{},{remotes:_objectSpread(_objectSpread({},s.remotes),{},{[peerId]:remoteStream})}));}else{console.warn(\"Received empty stream from:\",peerId);}};// –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\npc.onconnectionstatechange=()=>{console.log(\"Connection state with \".concat(peerId,\":\"),pc.connectionState);if(pc.connectionState===\"connected\"){console.log(\"‚úÖ WebRTC connection established with:\",peerId);setVideoError(\"\");// –û—á–∏—â–∞–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏\n}else if(pc.connectionState===\"connecting\"){console.log(\"üîÑ Connecting to:\",peerId);}else if([\"disconnected\",\"failed\",\"closed\"].includes(pc.connectionState)){console.log(\"‚ùå Connection failed/closed with:\",peerId,\"- removing peer\");// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –±—ã–ª–æ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\nif(pc.connectionState===\"failed\"){setVideoError(\"–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.\");}// –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è\nsetTimeout(()=>{if(videoPeersRef.current[peerId]&&[\"disconnected\",\"failed\",\"closed\"].includes(videoPeersRef.current[peerId].connectionState)){removePeer(peerId);}},3000);}};// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ICE —Å–æ—Å—Ç–æ—è–Ω–∏—è\npc.oniceconnectionstatechange=()=>{console.log(\"ICE connection state with \".concat(peerId,\":\"),pc.iceConnectionState);if(pc.iceConnectionState===\"failed\"){console.log(\"ICE connection failed with:\",peerId,\"- attempting restart\");// –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ ICE\npc.restartIce();}};// –û–±–Ω–æ–≤–∏—Ç—å state\nsetVideoPeers(peers=>_objectSpread(_objectSpread({},peers),{},{[peerId]:pc}));// –°–æ–∑–¥–∞—Ç—å offer –µ—Å–ª–∏ –º—ã –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—ã\nif(isInitiator){try{console.log(\"Creating offer for:\",peerId);const offer=await pc.createOffer({offerToReceiveAudio:true,offerToReceiveVideo:true,voiceActivityDetection:false// –æ—Ç–∫–ª—é—á–∞–µ–º VAD –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\n});await pc.setLocalDescription(offer);console.log(\"Sending offer to:\",peerId);socketRef.current.emit(\"video-signal\",{channel:selectedChannel,to:peerId,data:offer});}catch(error){console.error(\"Error creating offer for\",peerId,\":\",error);setVideoError(\"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\");}}return pc;};// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: —É–¥–∞–ª–∏—Ç—å PeerConnection ---\nconst removePeer=peerId=>{console.log(\"Removing peer:\",peerId);// –£–¥–∞–ª—è–µ–º –∏–∑ ref\nif(videoPeersRef.current[peerId]){videoPeersRef.current[peerId].close();delete videoPeersRef.current[peerId];}setVideoPeers(peers=>{const{[peerId]:removed}=peers,rest=_objectWithoutProperties(peers,[peerId].map(_toPropertyKey));return rest;});setVideoStreams(s=>{const _ref=s.remotes||{},{[peerId]:removed}=_ref,rest=_objectWithoutProperties(_ref,[peerId].map(_toPropertyKey));return _objectSpread(_objectSpread({},s),{},{remotes:rest});});};// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –∑–∞–≤–µ—Ä—à–∏—Ç—å ---\nconst endVideoCall=()=>{console.log(\"Ending video call\");// –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ peer connections —á–µ—Ä–µ–∑ ref\nObject.values(videoPeersRef.current).forEach(pc=>{if(pc)pc.close();});videoPeersRef.current={};setVideoPeers({});// –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫\nif(videoStreams.local){videoStreams.local.getTracks().forEach(track=>{track.stop();});}setVideoStreams({local:null,remotes:{}});setVideoCall({active:false,incoming:false,from:null});setVideoConnecting(false);setVideoError(\"\");// –ù–û–í–û–ï: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –∫–∞–º–µ—Ä—ã\nsetMicEnabled(true);setCameraEnabled(true);};// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –ø–æ–∫–∏–Ω—É—Ç—å –∑–≤–æ–Ω–æ–∫ ---\nconst leaveVideoCall=()=>{if(videoCall.active&&selectedChannel){socketRef.current.emit(\"video-call-leave\",{channel:selectedChannel});}endVideoCall();};// --- –û—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ ---\nconst declineVideoCall=()=>{setActiveCallInChannel(null);};// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞\nconst videoCallButton=selectedChannel?/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.videoCallBtn),videoCall.active?chatStyles.videoCallBtnActive:{}),onClick:videoCall.active?leaveVideoCall:startVideoCall,disabled:videoConnecting,title:videoCall.active?\"–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫\":\"–ù–∞—á–∞—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫\",children:videoConnecting?\"‚è≥\":videoCall.active?\"üìπ\":\"üìπ\"}):null;// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ\nconst startRecording=async()=>{if(!navigator.mediaDevices||!window.MediaRecorder){alert(\"–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ\");return;}try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const recorder=new window.MediaRecorder(stream);let chunks=[];recorder.ondataavailable=e=>{if(e.data.size>0)chunks.push(e.data);};recorder.onstop=()=>{const blob=new Blob(chunks,{type:\"audio/webm\"});setAudioBlob(blob);setAudioUrl(URL.createObjectURL(blob));setRecording(false);setRecordTime(0);stream.getTracks().forEach(track=>track.stop());};setMediaRecorder(recorder);setRecording(true);setRecordTime(0);recordTimerRef.current=setInterval(()=>{setRecordTime(rt=>rt+1);},1000);chunks=[];recorder.start();}catch(err){alert(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É\");}};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ\nconst stopRecording=()=>{if(mediaRecorder){mediaRecorder.stop();setMediaRecorder(null);}setRecording(false);if(recordTimerRef.current){clearInterval(recordTimerRef.current);recordTimerRef.current=null;}};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ—Å–æ–æ–±—â–µ–Ω–∏—è\nconst sendAudioMessage=async()=>{if(!audioBlob||!selectedChannel)return;const t=parseToken(token);const formData=new FormData();formData.append(\"file\",audioBlob,\"voice-message.webm\");const uploadRes=await axios.post(\"\".concat(API_URL,\"/upload\"),formData,{headers:{Authorization:\"Bearer \".concat(token)}});const msg={text:\"\",sender:t,channel:selectedChannel,fileUrl:uploadRes.data.url,fileType:uploadRes.data.fileType,originalName:uploadRes.data.originalName||\"voice-message.webm\"};socketRef.current&&socketRef.current.emit(\"join\",selectedChannel);socketRef.current.emit(\"message\",msg);setAudioBlob(null);setAudioUrl(null);};useEffect(()=>{setUsername(parseToken(token));},[token]);useEffect(()=>{if(!token)return;const fetchProfile=async()=>{try{const res=await axios.get(\"\".concat(API_URL,\"/profile\"),{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(res.data);// –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è\nif(res.data.theme&&(res.data.theme.pageBg||res.data.theme.chatBg)){const found=chatStyles.themes.find(t=>t.pageBg===res.data.theme.pageBg&&t.chatBg===res.data.theme.chatBg);setTheme(found||_objectSpread(_objectSpread({},chatStyles.themes[0]),res.data.theme));}else{setTheme(chatStyles.themes[0]);}}catch(_unused6){setUserProfile(null);setTheme(chatStyles.themes[0]);}};fetchProfile();},[token]);useEffect(()=>{if(!token)return;axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setChannels(res.data)).catch(()=>setChannels([]));socketRef.current=io(\"/\",{auth:{token}});socketRef.current.on(\"message\",msg=>{setMessages(prev=>msg.channel===selectedChannel?[...prev,msg]:prev);if(msg.channel!==selectedChannel||document.visibilityState!==\"visible\"){showNotification(\"–ì–æ–í–ß–∞—Ç\",\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0442 \".concat(msg.sender));}});socketRef.current.on(\"typing\",e=>{setTyping(\"\".concat(e.user,\" \\u043F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\"));if(typingTimeoutRef.current)clearTimeout(typingTimeoutRef.current);typingTimeoutRef.current=setTimeout(()=>setTyping(\"\"),2000);});// –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤\nsocketRef.current.on(\"video-call-status\",_ref2=>{let{channel,active}=_ref2;setActiveCallsInChannels(prev=>{if(active){return _objectSpread(_objectSpread({},prev),{},{[channel]:true});}else{const{[channel]:removed}=prev,rest=_objectWithoutProperties(prev,[channel].map(_toPropertyKey));return rest;}});});// –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ\nconst handleNewChannel=()=>{axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setChannels(res.data)).catch(()=>setChannels([]));};socketRef.current.on(\"new-channel\",handleNewChannel);return()=>{socketRef.current&&socketRef.current.disconnect();socketRef.current&&socketRef.current.off(\"new-channel\",handleNewChannel);socketRef.current&&socketRef.current.off(\"video-call-status\");if(typingTimeoutRef.current)clearTimeout(typingTimeoutRef.current);};},[token]);useEffect(()=>{if(token&&selectedChannel){axios.get(\"\".concat(API_URL,\"/messages/\").concat(selectedChannel),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setMessages(res.data));socketRef.current&&socketRef.current.emit(\"join\",selectedChannel);// –ù–û–í–û–ï: –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–≤–æ–Ω–∫–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞\nsetActiveCallInChannel(null);}},[token,selectedChannel]);useEffect(()=>{messagesEndRef.current&&messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});},[messages]);useEffect(()=>{if(!socketRef.current)return;const handler=msg=>{if(msg.channel===selectedChannel)setMessages(prev=>[...prev,msg]);};socketRef.current.on(\"message\",handler);return()=>socketRef.current.off(\"message\",handler);},[selectedChannel]);const handleCreateChannel=async()=>{if(!newChannel.trim())return;try{const t=parseToken(token);const res=await axios.post(\"\".concat(API_URL,\"/channels\"),{name:newChannel,members:[t]},{headers:{Authorization:\"Bearer \".concat(token)}});setShowCreate(false);setNewChannel(\"\");const chs=await axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}});setChannels(chs.data);setSelectedChannel(res.data._id);socketRef.current&&socketRef.current.emit(\"join\",res.data._id);}catch(_unused7){alert(\"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞\");}};const handleSend=async()=>{if(!input.trim()&&!fileToSend||!selectedChannel)return;const t=parseToken(token);let msg={text:input,sender:t,channel:selectedChannel};if(fileToSend){const formData=new FormData();formData.append(\"file\",fileToSend);const uploadRes=await axios.post(\"\".concat(API_URL,\"/upload\"),formData,{headers:{Authorization:\"Bearer \".concat(token)}});msg.fileUrl=uploadRes.data.url;msg.fileType=uploadRes.data.fileType;msg.originalName=uploadRes.data.originalName;}socketRef.current&&socketRef.current.emit(\"join\",selectedChannel);socketRef.current.emit(\"message\",msg);setInput(\"\");setFileToSend(null);setFilePreviewUrl(null);if(fileInputRefChat.current)fileInputRefChat.current.value=\"\";};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\nconst handleRegister=async e=>{e.preventDefault();setError(\"\");setRegistering(true);try{await axios.post(\"\".concat(API_URL,\"/register\"),{username,password});// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ä–∞–∑—É –ª–æ–≥–∏–Ω–∏–º—Å—è (–±–µ–∑ –∫–∞–ø—á–∏)\nconst res=await axios.post(\"\".concat(API_URL,\"/login\"),{username,password});localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}catch(e){var _e$response,_e$response$data;let msg=\"–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –≤—Ö–æ–¥–∞\";if(e!==null&&e!==void 0&&(_e$response=e.response)!==null&&_e$response!==void 0&&(_e$response$data=_e$response.data)!==null&&_e$response$data!==void 0&&_e$response$data.error)msg=e.response.data.error;else if(typeof(e===null||e===void 0?void 0:e.message)===\"string\"&&e.message)msg=e.message;setError(msg);}setRegistering(false);};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞\nconst handleLogin=async e=>{e.preventDefault();setError(\"\");setRegistering(true);try{const res=await axios.post(\"\".concat(API_URL,\"/login\"),{username,password});localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}catch(e){var _e$response2,_e$response2$data;let msg=\"–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å\";if(e!==null&&e!==void 0&&(_e$response2=e.response)!==null&&_e$response2!==void 0&&(_e$response2$data=_e$response2.data)!==null&&_e$response2$data!==void 0&&_e$response2$data.error)msg=e.response.data.error;else if(typeof(e===null||e===void 0?void 0:e.message)===\"string\"&&e.message)msg=e.message;setError(msg);}setRegistering(false);};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª—è\nconst handleProfileSave=async()=>{try{const payload={username:editData.username,password:editData.password,city:editData.city,status:editData.status,age:editData.age};Object.keys(payload).forEach(k=>{if(payload[k]===\"\"||payload[k]===null)delete payload[k];});const res=await axios.patch(\"\".concat(API_URL,\"/profile\"),payload,{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(res.data);setEditMode(false);if(payload.username&&payload.username!==userProfile.username&&res.data.token){localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}}catch(e){var _e$response3,_e$response3$data;alert((e===null||e===void 0?void 0:(_e$response3=e.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:_e$response3$data.error)||(e===null||e===void 0?void 0:e.message)||\"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è\");}};const handleProfilePopupBgClick=()=>{// –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É (–∞ –Ω–µ –ø–æ —Å–∞–º–æ–º—É popup), –∑–∞–∫—Ä—ã–≤–∞–µ–º\nsetShowProfile(false);};useEffect(()=>{if(userProfile){setEditData(d=>_objectSpread({},d));}},[userProfile]);useEffect(()=>{document.title=\"–ì–æ–í–ß–∞—Ç 2.1 Beta\";// –î–æ–±–∞–≤–ª—è–µ–º/–∑–∞–º–µ–Ω—è–µ–º favicon\nconst faviconId=\"govchat-favicon\";let link=document.querySelector(\"link[rel=\\\"icon\\\"]#\".concat(faviconId));if(!link){link=document.createElement(\"link\");link.rel=\"icon\";link.id=faviconId;document.head.appendChild(link);}link.type=\"image/svg+xml\";link.href='data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><text y=\"52\" font-size=\"52\">ü¶Ü</text></svg>';return()=>{// –ù–µ —É–¥–∞–ª—è–µ–º favicon –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n};},[]);// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞\nuseEffect(()=>{if(fileToSend){if(fileToSend.type.startsWith(\"image/\")||fileToSend.type.startsWith(\"video/\")){const url=URL.createObjectURL(fileToSend);setFilePreviewUrl(url);return()=>URL.revokeObjectURL(url);}else{setFilePreviewUrl(null);}}else{setFilePreviewUrl(null);}},[fileToSend]);// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã –≤ –ø—Ä–æ—Ñ–∏–ª—å\nconst handleThemeSelect=async t=>{setTheme(t);setShowCustomizer(false);try{await axios.patch(\"\".concat(API_URL,\"/profile\"),{theme:{pageBg:t.pageBg,chatBg:t.chatBg}},{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(u=>u?_objectSpread(_objectSpread({},u),{},{theme:{pageBg:t.pageBg,chatBg:t.chatBg}}):u);}catch(_unused8){// ignore\n}};// –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ —Å—Ç–∏–ª—è–º\nconst themedPageStyle=_objectSpread(_objectSpread({},chatStyles.page),{},{background:theme.pageBg});const themedChatBoxStyle=_objectSpread(_objectSpread({},chatStyles.chatBox),{},{background:theme.chatBg});// –í—Å—Ç–∞–≤–ª—è–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –≤ <head>\nuseEffect(()=>{const styleId=\"govchat-responsive-style\";if(!document.getElementById(styleId)){const style=document.createElement(\"style\");style.id=styleId;style.innerHTML=chatStyles.responsive;document.head.appendChild(style);}// –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ overflow —Å—Ç–∏–ª–∏ —Å body –∏ html\ndocument.documentElement.style.overflow='';document.body.style.overflow='';},[]);// –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞\nconst[isMobile,setIsMobile]=useState(window.innerWidth<=700);useEffect(()=>{const onResize=()=>setIsMobile(window.innerWidth<=700);window.addEventListener(\"resize\",onResize);return()=>window.removeEventListener(\"resize\",onResize);},[]);// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π ---\nuseEffect(()=>{if(!socketRef.current)return;const onConnect=()=>{setMySocketId(socketRef.current.id);console.log(\"Connected with socket ID:\",socketRef.current.id);// –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–æ–≤ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏\nsocketRef.current.emit(\"get-active-calls\");};const onIncoming=_ref3=>{let{from,channel,initiatorSocketId}=_ref3;console.log(\"Incoming call from:\",from,\"in channel:\",channel,\"my channel:\",selectedChannel);if(channel===selectedChannel&&!videoCall.active){console.log(\"Showing incoming call notification\");setActiveCallInChannel({from,channel,initiatorSocketId});}// –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ\nsetActiveCallsInChannels(prev=>_objectSpread(_objectSpread({},prev),{},{[channel]:true}));// –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–µ\nshowNotification(\"–ì–æ–í–ß–∞—Ç\",\"\".concat(from,\" \\u043D\\u0430\\u0447\\u0430\\u043B \\u0432\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"));};const onParticipants=async _ref4=>{let{participants}=_ref4;console.log(\"Participants in call:\",participants);setVideoConnecting(false);// –ñ–¥–µ–º –ø–æ–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω\nconst waitForLocalStream=()=>{return new Promise(resolve=>{const checkStream=()=>{if(videoStreams.local){resolve(videoStreams.local);}else{setTimeout(checkStream,100);}};checkStream();});};const localStream=await waitForLocalStream();// –°–æ–∑–¥–∞—Ç—å PeerConnection –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π\nfor(const peerId of participants){if(peerId!==socketRef.current.id&&!videoPeersRef.current[peerId]){console.log(\"Creating peer for existing participant:\",peerId);// –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º peer connections\nawait new Promise(resolve=>setTimeout(resolve,500));await createPeer(peerId,true,localStream);}}};const onJoined=async _ref5=>{let{user,socketId}=_ref5;console.log(\"User joined call:\",user,socketId);if(socketId!==socketRef.current.id&&!videoPeersRef.current[socketId]){console.log(\"Creating peer for new participant:\",socketId);// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫\nconst localStream=videoStreams.local;if(localStream){// –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\nawait new Promise(resolve=>setTimeout(resolve,1000));await createPeer(socketId,false,localStream);}else{console.warn(\"No local stream available for new participant\");}}};const onLeft=_ref6=>{let{user,socketId}=_ref6;console.log(\"User left call:\",user,socketId);removePeer(socketId);};const onSignal=async _ref7=>{let{from,data}=_ref7;console.log(\"Received signal from:\",from,\"type:\",data.type||'candidate');// –ò—Å–ø–æ–ª—å–∑—É–µ–º ref –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è peer\nlet pc=videoPeersRef.current[from];if(!pc&&(data.type===\"offer\"||data.type===\"answer\")){console.log(\"Creating peer for signal from:\",from);pc=await createPeer(from,false);}if(!pc){console.error(\"No peer connection for:\",from);return;}try{if(data.type===\"offer\"){console.log(\"Processing offer from:\",from);await pc.setRemoteDescription(new RTCSessionDescription(data));const answer=await pc.createAnswer({offerToReceiveAudio:true,offerToReceiveVideo:true,voiceActivityDetection:false});await pc.setLocalDescription(answer);console.log(\"Sending answer to:\",from);socketRef.current.emit(\"video-signal\",{channel:selectedChannel,to:from,data:answer});}else if(data.type===\"answer\"){console.log(\"Processing answer from:\",from);await pc.setRemoteDescription(new RTCSessionDescription(data));}else if(data.candidate){console.log(\"Adding ICE candidate from:\",from,\"type:\",data.candidate.type);try{await pc.addIceCandidate(new RTCIceCandidate(data.candidate));}catch(error){console.warn(\"Error adding ICE candidate:\",error);}}}catch(error){console.error(\"Error handling signal from\",from,\":\",error);setVideoError(\"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\");}};const onEnded=_ref8=>{let{by,channel}=_ref8;console.log(\"Call ended by server, ended by:\",by,\"in channel:\",channel);endVideoCall();setActiveCallInChannel(null);// –£–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ\nsetActiveCallsInChannels(prev=>{const{[channel]:removed}=prev,rest=_objectWithoutProperties(prev,[channel].map(_toPropertyKey));return rest;});};const onActiveCallsUpdate=_ref9=>{let{activeCalls}=_ref9;setActiveCallsInChannels(activeCalls);};socketRef.current.on(\"connect\",onConnect);socketRef.current.on(\"video-call-incoming\",onIncoming);socketRef.current.on(\"video-call-participants\",onParticipants);socketRef.current.on(\"video-call-joined\",onJoined);socketRef.current.on(\"video-call-left\",onLeft);socketRef.current.on(\"video-signal\",onSignal);socketRef.current.on(\"video-call-ended\",onEnded);socketRef.current.on(\"active-calls-update\",onActiveCallsUpdate);return()=>{var _socketRef$current,_socketRef$current2,_socketRef$current3,_socketRef$current4,_socketRef$current5,_socketRef$current6,_socketRef$current7,_socketRef$current8;(_socketRef$current=socketRef.current)===null||_socketRef$current===void 0?void 0:_socketRef$current.off(\"connect\",onConnect);(_socketRef$current2=socketRef.current)===null||_socketRef$current2===void 0?void 0:_socketRef$current2.off(\"video-call-incoming\",onIncoming);(_socketRef$current3=socketRef.current)===null||_socketRef$current3===void 0?void 0:_socketRef$current3.off(\"video-call-participants\",onParticipants);(_socketRef$current4=socketRef.current)===null||_socketRef$current4===void 0?void 0:_socketRef$current4.off(\"video-call-joined\",onJoined);(_socketRef$current5=socketRef.current)===null||_socketRef$current5===void 0?void 0:_socketRef$current5.off(\"video-call-left\",onLeft);(_socketRef$current6=socketRef.current)===null||_socketRef$current6===void 0?void 0:_socketRef$current6.off(\"video-signal\",onSignal);(_socketRef$current7=socketRef.current)===null||_socketRef$current7===void 0?void 0:_socketRef$current7.off(\"video-call-ended\",onEnded);(_socketRef$current8=socketRef.current)===null||_socketRef$current8===void 0?void 0:_socketRef$current8.off(\"active-calls-update\",onActiveCallsUpdate);};},[selectedChannel,username,videoStreams.local,videoCall.active]);// --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ ---\nuseEffect(()=>{// –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ\nif(localVideoRef.current&&videoStreams.local){localVideoRef.current.srcObject=videoStreams.local;console.log(\"Set local video stream\");}// –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–æ\nObject.entries(videoStreams.remotes||{}).forEach(_ref0=>{let[peerId,stream]=_ref0;if(remoteVideosRef.current[peerId]&&stream){remoteVideosRef.current[peerId].srcObject=stream;console.log(\"Set remote video stream for:\",peerId);}});},[videoStreams,videoCall.active]);// --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ ---\nconst videoCallModal=videoCall.active&&/*#__PURE__*/_jsx(\"div\",{style:chatStyles.videoCallModal,onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.videoCallBox),{},{width:isMobile?\"96vw\":520,minHeight:isMobile?280:360,padding:isMobile?\"12px 8px 12px 8px\":\"20px 20px 16px 20px\",position:\"relative\"}),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:700,fontSize:18,color:\"#00c3ff\",marginBottom:16,textAlign:\"center\"},children:[\"\\uD83D\\uDCF9 \\u0412\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A: \",((_channels$find=channels.find(ch=>ch._id===selectedChannel))===null||_channels$find===void 0?void 0:_channels$find.name)||\"\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:isMobile?180:240,background:\"#000\",borderRadius:12,overflow:\"hidden\",marginBottom:16},children:[Object.entries(videoStreams.remotes||{}).length>0?/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:Object.keys(videoStreams.remotes||{}).length===1?\"1fr\":\"1fr 1fr\",gap:8,width:\"100%\",height:\"100%\",minHeight:isMobile?180:240},children:Object.entries(videoStreams.remotes||{}).map(_ref1=>{let[peerId]=_ref1;return/*#__PURE__*/_jsx(\"video\",{ref:el=>{if(el)remoteVideosRef.current[peerId]=el;},autoPlay:true,playsInline:true,style:{width:\"100%\",height:\"100%\",objectFit:\"cover\",background:\"#000\",borderRadius:8}},peerId);})}):/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",fontSize:16,textAlign:\"center\",padding:20},children:videoConnecting?\"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...\":\"–û–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤...\"}),videoStreams.local&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",bottom:12,right:12,width:isMobile?80:120,height:isMobile?60:90,borderRadius:8,border:\"2px solid #00c3ff\",background:\"#000\",zIndex:10,overflow:\"hidden\"},children:cameraEnabled?/*#__PURE__*/_jsx(\"video\",{ref:localVideoRef,autoPlay:true,muted:true,playsInline:true,style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"}}):/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",background:\"#333\",color:\"#fff\",fontSize:isMobile?20:24},children:\"\\uD83D\\uDCF7\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.videoCallControls),{},{gap:12,flexWrap:\"wrap\",justifyContent:\"center\"}),children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.videoCallControlBtn),{},{background:micEnabled?\"#35363a\":\"#ff7675\",color:\"#fff\"}),onClick:toggleMicrophone,title:micEnabled?\"–í—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω\":\"–í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω\",children:micEnabled?\"üé§\":\"üîá\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.videoCallControlBtn),{},{background:cameraEnabled?\"#35363a\":\"#ff7675\",color:\"#fff\"}),onClick:toggleCamera,title:cameraEnabled?\"–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É\":\"–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É\",children:cameraEnabled?\"üìπ\":\"üì∑\"}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.videoCallEndBtn,onClick:leaveVideoCall,children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C\"})]}),videoError&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#ff7675\",marginTop:12,fontWeight:500,textAlign:\"center\"},children:videoError})]})});//  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—Ö–æ–¥—è—â–µ–º –∑–≤–æ–Ω–∫–µ\nconst videoCallBanner=activeCallInChannel&&selectedChannel===activeCallInChannel.channel&&!videoCall.active&&/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.videoCallBanner,children:[/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.videoCallBannerText,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.videoCallBannerIcon,children:\"\\uD83D\\uDCF9\"}),isMobile?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:activeCallInChannel.from}),\" \\u043D\\u0430\\u0447\\u0430\\u043B \\u0432\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"]}):/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:activeCallInChannel.from}),\" \\u043D\\u0430\\u0447\\u0430\\u043B \\u0432\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A \\u0432 \\u044D\\u0442\\u043E\\u043C \\u043A\\u0430\\u043D\\u0430\\u043B\\u0435\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.videoCallBannerBtn,onClick:acceptVideoCall,disabled:videoConnecting,children:videoConnecting?\"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...\":\"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è\"}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.videoCallBannerDeclineBtn,onClick:declineVideoCall,children:\"\\u0421\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})]});if(!token){return/*#__PURE__*/_jsx(\"div\",{style:chatStyles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.authContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.authTitle,children:authMode===\"register\"?\"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\":\"–í—Ö–æ–¥\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:chatStyles.error,children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:authMode===\"register\"?handleRegister:handleLogin,style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(\"input\",{style:chatStyles.authInput,placeholder:\"\\u0418\\u043C\\u044F\",value:username,onChange:e=>setUsername(e.target.value),required:true,autoComplete:\"username\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.authInput,placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.authBtn,type:\"submit\",disabled:registering,children:authMode===\"register\"?\"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è\":\"–í–æ–π—Ç–∏\"})]}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.switchBtn,type:\"button\",onClick:()=>{setAuthMode(authMode===\"register\"?\"login\":\"register\");setError(\"\");setUsername(\"\");setPassword(\"\");},children:authMode===\"register\"?\"–í–æ–π—Ç–∏\":\"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\"})]})});}// --- –ú–æ–±–∏–ª—å–Ω—ã–π header ---\nconst mobileHeader=/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.mobileHeader,className:\"govchat-mobile-header\",children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.mobileMenuBtn,onClick:()=>setMobileMenuOpen(true),\"aria-label\":\"\\u041C\\u0435\\u043D\\u044E\",children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:28},children:\"\\u2630\"})}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20,color:\"#00c3ff\",letterSpacing:1,textShadow:\"0 2px 8px #0002\",margin:\"0 auto\"},children:\"\\u0413\\u043E\\u0412\\u0427\\u0430\\u0442 2.1 Beta\"})]});// --- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é ---\nconst mobileMenu=/*#__PURE__*/_jsx(\"div\",{style:chatStyles.mobileMenuOverlay,onClick:()=>setMobileMenuOpen(false),children:/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.mobileMenu,onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.mobileMenuCloseBtn,onClick:()=>setMobileMenuOpen(false),\"aria-label\":\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{style:chatStyles.mobileMenuTitle,children:\"\\u041A\\u0430\\u043D\\u0430\\u043B\\u044B\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.mobileMenuChannels,children:[channels.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",marginBottom:8},children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u043D\\u0430\\u043B\\u043E\\u0432\"}):channels.map(ch=>/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.channelItem(selectedChannel===ch._id)),{},{position:\"relative\"// –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞\n}),onClick:()=>{setSelectedChannel(ch._id);setMobileMenuOpen(false);},children:[ch.name,activeCallsInChannels[ch._id]&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:8,right:8,width:8,height:8,borderRadius:\"50%\",background:\"#ff4757\",border:\"2px solid #fff\",boxShadow:\"0 0 6px #ff4757\",animation:\"pulse 2s infinite\"},title:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439 \\u0432\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"})]},ch._id)),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.createBtn,onClick:()=>setShowCreate(v=>!v),children:showCreate?\"–°–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ\":\"–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª\"}),showCreate&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"input\",{style:chatStyles.input,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannel,onChange:e=>setNewChannel(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.createBtn,onClick:handleCreateChannel,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"govchat-mobile-profile-actions\",style:{display:\"flex\",flexDirection:\"row\",alignItems:\"center\",justifyContent:\"center\",gap:18,margin:\"18px 0 16px 0\"},children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileBtn),{},{width:48,height:48,fontSize:24,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"}),onClick:()=>{setShowProfile(true);setMobileMenuOpen(false);setEditMode(false);},title:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"26\",height:\"26\",viewBox:\"0 0 26 26\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"13\",r:\"13\",fill:\"#00c3ff\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"10\",r:\"4\",fill:\"#fff\"}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"13\",cy:\"19\",rx:\"7\",ry:\"4\",fill:\"#fff\"})]})}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileBtn),{},{width:48,height:48,fontSize:24,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",background:\"none\",border:\"none\",marginRight:0,marginLeft:0,boxShadow:\"0 2px 8px #00c3ff33\"}),onClick:()=>{setShowCustomizer(true);setMobileMenuOpen(false);},title:\"\\u041A\\u0430\\u0441\\u0442\\u043E\\u043C\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"26\",height:\"26\",viewBox:\"0 0 26 26\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"13\",r:\"13\",fill:\"#ffb347\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 19c0-2 2-4 4-4s4 2 4 4\",stroke:\"#fff\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"10\",y:\"6\",width:\"6\",height:\"8\",rx:\"2\",fill:\"#fff\",stroke:\"#ffb347\",strokeWidth:\"1.5\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"8\",y:\"14\",width:\"10\",height:\"4\",rx:\"2\",fill:\"#ffb347\",stroke:\"#fff\",strokeWidth:\"1.5\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{style:chatStyles.mobileMenuFooter})]})});// --- –î–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –º–µ–Ω—é ---\nconst desktopMenu=/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.sidebar,className:\"govchat-sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.sidebarTitle,children:\"\\u0413\\u043E\\u0412\\u0427\\u0430\\u0442 2.1 Beta\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.channelList,className:\"govchat-channel-list\",children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,color:\"#fff\",marginBottom:10},children:\"\\u041A\\u0430\\u043D\\u0430\\u043B\\u044B\"}),channels.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",marginBottom:8},children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u043D\\u0430\\u043B\\u043E\\u0432\"}):channels.map(ch=>/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.channelItem(selectedChannel===ch._id)),{},{position:\"relative\"// –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞\n}),onClick:()=>setSelectedChannel(ch._id),children:[ch.name,activeCallsInChannels[ch._id]&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"50%\",right:12,transform:\"translateY(-50%)\",width:8,height:8,borderRadius:\"50%\",background:\"#ff4757\",border:\"2px solid #fff\",boxShadow:\"0 0 6px #ff4757\",animation:\"pulse 2s infinite\"},title:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439 \\u0432\\u0438\\u0434\\u0435\\u043E\\u0437\\u0432\\u043E\\u043D\\u043E\\u043A\"})]},ch._id)),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.createBtn,onClick:()=>setShowCreate(v=>!v),children:showCreate?\"–°–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ\":\"–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª\"}),showCreate&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"input\",{style:chatStyles.input,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannel,onChange:e=>setNewChannel(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.createBtn,onClick:handleCreateChannel,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.profileBtnBox),{},{left:\"auto\",right:178,bottom:70,display:\"flex\",flexDirection:\"row\",alignItems:\"center\",gap:10,zIndex:10}),children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.profileBtn,onClick:()=>{setShowProfile(v=>!v);setEditMode(false);},title:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"26\",height:\"26\",viewBox:\"0 0 26 26\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"13\",r:\"13\",fill:\"#00c3ff\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"10\",r:\"4\",fill:\"#fff\"}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"13\",cy:\"19\",rx:\"7\",ry:\"4\",fill:\"#fff\"})]})}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileBtn),{},{background:\"none\",border:\"none\",marginRight:0,marginLeft:0,boxShadow:\"0 2px 8px #00c3ff33\"}),onClick:()=>setShowCustomizer(v=>!v),title:\"\\u041A\\u0430\\u0441\\u0442\\u043E\\u043C\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"26\",height:\"26\",viewBox:\"0 0 26 26\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"13\",r:\"13\",fill:\"#ffb347\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 19c0-2 2-4 4-4s4 2 4 4\",stroke:\"#fff\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"10\",y:\"6\",width:\"6\",height:\"8\",rx:\"2\",fill:\"#fff\",stroke:\"#ffb347\",strokeWidth:\"1.5\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"8\",y:\"14\",width:\"10\",height:\"4\",rx:\"2\",fill:\"#ffb347\",stroke:\"#fff\",strokeWidth:\"1.5\"})]})})]})]});return/*#__PURE__*/_jsxs(\"div\",{style:themedPageStyle,className:\"govchat-page\",children:[isMobile&&mobileHeader,isMobile&&mobileMenuOpen&&mobileMenu,!isMobile&&desktopMenu,/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.chatContainer),isMobile?{paddingTop:40,// —É–º–µ–Ω—å—à–µ–Ω–æ —Å 64 –¥–æ 40\nheight:\"calc(100vh - 40px)\",// —É–º–µ–Ω—å—à–∏—Ç—å –≤—ã—Å–æ—Ç—É —á–∞—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º\nmaxHeight:\"calc(100vh - 40px)\"}:{}),className:\"govchat-chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",marginBottom:10,minHeight:32,marginTop:isMobile?18:0// –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö\n},children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.chatTitle,children:\"\\u0427\\u0430\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"auto\",marginRight:8},children:videoCallButton})]}),videoCallBanner,/*#__PURE__*/_jsxs(\"div\",{className:\"govchat-chat-box\",style:themedChatBoxStyle,children:[messages.map(msg=>{const isMine=msg.sender===username;// –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏\nconst time=msg.createdAt?new Date(msg.createdAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}):'';return/*#__PURE__*/_jsx(\"div\",{style:chatStyles.messageRow(isMine),children:/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.message(isMine),children:[!isMine&&/*#__PURE__*/_jsxs(\"span\",{style:chatStyles.messageSender,children:[msg.sender,\":\"]}),msg.text,msg.fileUrl&&msg.fileType&&/*#__PURE__*/_jsx(\"span\",{style:{display:\"block\",marginTop:8},children:msg.fileType.startsWith(\"audio/\")?/*#__PURE__*/_jsx(\"audio\",{src:msg.fileUrl,controls:true,style:{maxWidth:220,borderRadius:8,background:\"#232526\"}}):msg.fileType.startsWith(\"image/\")?/*#__PURE__*/_jsx(\"img\",{src:msg.fileUrl,alt:msg.originalName||\"image\",style:{maxWidth:120,maxHeight:120,borderRadius:8,cursor:\"pointer\",boxShadow:\"0 2px 8px #00c3ff33\"},onClick:()=>setModalMedia({type:\"image\",url:msg.fileUrl,name:msg.originalName})}):msg.fileType.startsWith(\"video/\")?/*#__PURE__*/_jsx(\"video\",{src:msg.fileUrl,controls:false,style:{maxWidth:120,maxHeight:120,borderRadius:8,cursor:\"pointer\",boxShadow:\"0 2px 8px #00c3ff33\"},onClick:()=>setModalMedia({type:\"video\",url:msg.fileUrl,name:msg.originalName}),children:\"\\u0412\\u0430\\u0448 \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0432\\u0438\\u0434\\u0435\\u043E.\"}):/*#__PURE__*/// –ü—Ä–µ–≤—å—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n_jsxs(\"span\",{style:{display:\"flex\",alignItems:\"center\",gap:8,cursor:\"pointer\",background:\"#232526\",borderRadius:8,padding:\"8px 12px\",boxShadow:\"0 2px 8px #00c3ff22\",maxWidth:220,minWidth:0,color:\"#fff\"},onClick:()=>{// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞\nconst ext=(msg.originalName||\"\").split('.').pop().toLowerCase();if(msg.fileType===\"application/pdf\"){setModalMedia({type:\"pdf\",url:msg.fileUrl,name:msg.originalName});}else{setModalMedia({type:\"doc\",url:msg.fileUrl,name:msg.originalName,ext});}},title:msg.originalName,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:28},children:(()=>{const ext=(msg.originalName||\"\").split('.').pop().toLowerCase();if(ext===\"pdf\")return\"üìÑ\";if([\"doc\",\"docx\"].includes(ext))return\"üìù\";if([\"xls\",\"xlsx\"].includes(ext))return\"üìä\";if([\"ppt\",\"pptx\"].includes(ext))return\"üìà\";if([\"txt\",\"rtf\"].includes(ext))return\"üìÉ\";return\"üìÅ\";})()}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:14,color:\"#fff\",wordBreak:\"break-all\",flex:1,minWidth:0},children:msg.originalName})]})}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",fontSize:11,marginTop:4,textAlign:isMine?\"right\":\"left\"},children:time})]})},msg._id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{style:{minHeight:22,display:\"flex\",alignItems:\"flex-end\",marginBottom:2},children:typing&&/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.typing),{},{margin:0,paddingLeft:8,paddingRight:8,background:\"none\",borderRadius:0,position:\"relative\",zIndex:2,width:\"fit-content\",maxWidth:\"80%\",alignSelf:\"flex-start\",boxShadow:\"none\"}),children:typing})}),fileToSend&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},isMobile?{position:\"fixed\",left:0,right:0,bottom:58,zIndex:1002,background:\"#35363a\",borderRadius:\"12px 12px 0 0\",padding:\"6px 8px 6px 8px\",// —É–º–µ–Ω—å—à–∏–ª–∏ –ø–∞–¥–¥–∏–Ω–≥–∏\nmaxWidth:\"100vw\",width:\"100vw\",display:\"flex\",alignItems:\"center\",gap:10,// —É–º–µ–Ω—å—à–∏–ª–∏ gap\nboxShadow:\"0 -2px 12px #0005\",justifyContent:\"flex-start\",minHeight:44// —É–º–µ–Ω—å—à–∏–ª–∏ –≤—ã—Å–æ—Ç—É\n}:{margin:\"0 0 8px 0\",padding:\"6px 10px\",background:\"#35363a\",borderRadius:8,display:\"flex\",alignItems:\"center\",gap:10,maxWidth:320}),{},{position:isMobile?\"fixed\":undefined}),children:[isMobile&&/*#__PURE__*/_jsx(\"button\",{style:{position:\"absolute\",left:8,top:\"50%\",transform:\"translateY(-50%)\",background:\"none\",border:\"none\",color:\"#ff7675\",fontWeight:700,fontSize:22,cursor:\"pointer\",padding:0,zIndex:2},title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",onClick:()=>{setFileToSend(null);setFilePreviewUrl(null);if(fileInputRefChat.current)fileInputRefChat.current.value=\"\";},children:\"\\u2715\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:10,width:\"100%\",marginLeft:isMobile?36:0// –æ—Ç—Å—Ç—É–ø –ø–æ–¥ –∫—Ä–µ—Å—Ç–∏–∫\n},children:[fileToSend.type.startsWith(\"image/\")&&filePreviewUrl&&/*#__PURE__*/_jsx(\"img\",{src:filePreviewUrl,alt:\"preview\",style:{maxWidth:isMobile?56:48,// —É–º–µ–Ω—å—à–∏–ª–∏ —Ä–∞–∑–º–µ—Ä\nmaxHeight:isMobile?56:48,borderRadius:8,objectFit:\"cover\"}}),fileToSend.type.startsWith(\"video/\")&&filePreviewUrl&&/*#__PURE__*/_jsx(\"video\",{src:filePreviewUrl,style:{maxWidth:isMobile?56:48,maxHeight:isMobile?56:48,borderRadius:8,objectFit:\"cover\"},controls:true}),!fileToSend.type.startsWith(\"image/\")&&!fileToSend.type.startsWith(\"video/\")&&/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"file\",style:{fontSize:isMobile?26:22},children:\"\\uD83D\\uDCCE\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#fff\",fontSize:isMobile?14:14,wordBreak:\"break-all\",flex:1,minWidth:0},children:fileToSend.name}),!isMobile&&/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"auto\",background:\"none\",border:\"none\",color:\"#ff7675\",fontWeight:700,fontSize:16,cursor:\"pointer\",padding:0},title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",onClick:()=>{setFileToSend(null);setFilePreviewUrl(null);if(fileInputRefChat.current)fileInputRefChat.current.value=\"\";},children:\"\\u2715\"})]})]}),audioBlob&&audioUrl&&(isMobile?/*#__PURE__*/_jsxs(\"div\",{style:{position:\"fixed\",left:0,right:0,bottom:58,// —á—É—Ç—å –≤—ã—à–µ inputRow (—É—á–∏—Ç—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É inputRow)\nzIndex:1001,background:\"#35363a\",borderRadius:\"12px 12px 0 0\",padding:\"10px 12px 10px 12px\",maxWidth:\"100vw\",width:\"100vw\",display:\"flex\",alignItems:\"center\",gap:10,boxShadow:\"0 -2px 12px #0005\",justifyContent:\"center\",minHeight:48},children:[/*#__PURE__*/_jsx(\"audio\",{src:audioUrl,controls:true,style:{height:28,maxWidth:180,borderRadius:8,background:\"#232526\"}}),/*#__PURE__*/_jsx(\"button\",{style:{background:\"#ff7675\",color:\"#fff\",border:\"none\",borderRadius:8,padding:\"6px 12px\",fontWeight:600,fontSize:15,cursor:\"pointer\",marginLeft:4},onClick:sendAudioMessage,title:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u043E\\u0435\",children:\"\\u27A4\"}),/*#__PURE__*/_jsx(\"button\",{style:{background:\"none\",color:\"#ff7675\",border:\"none\",fontWeight:700,fontSize:20,cursor:\"pointer\"},title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\",onClick:()=>{setAudioBlob(null);setAudioUrl(null);},children:\"\\u2715\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:8,margin:\"8px 0 0 0\",background:\"#35363a\",borderRadius:8,padding:\"8px 16px\",maxWidth:420},children:[/*#__PURE__*/_jsx(\"audio\",{src:audioUrl,controls:true,style:{height:32,maxWidth:220,borderRadius:8}}),/*#__PURE__*/_jsx(\"button\",{style:{background:\"#ff7675\",color:\"#fff\",border:\"none\",borderRadius:8,padding:\"6px 14px\",fontWeight:600,fontSize:15,cursor:\"pointer\",marginLeft:4},onClick:sendAudioMessage,title:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u043E\\u0435\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{style:{background:\"none\",color:\"#ff7675\",border:\"none\",fontWeight:700,fontSize:18,cursor:\"pointer\"},title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\",onClick:()=>{setAudioBlob(null);setAudioUrl(null);},children:\"\\u2715\"})]})),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.inputRow),isMobile?{padding:\"6px 2vw 6px 2vw\"}:{}),className:\"govchat-input-row\",children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},attachBtnHover?_objectSpread(_objectSpread({},chatStyles.attachBtn),chatStyles.attachBtnHover):chatStyles.attachBtn),isMobile?{width:34,height:34,minWidth:34,minHeight:34,fontSize:18,marginRight:2}:{}),type:\"button\",onClick:()=>fileInputRefChat.current&&fileInputRefChat.current.click(),title:\"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",tabIndex:-1,onMouseEnter:()=>setAttachBtnHover(true),onMouseLeave:()=>setAttachBtnHover(false),disabled:false,children:/*#__PURE__*/_jsx(\"span\",{style:{color:\"#222\",fontSize:isMobile?18:22,display:\"flex\",alignItems:\"center\"},children:\"\\uD83D\\uDCCE\"})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRefChat,type:\"file\",style:{display:\"none\"},onChange:e=>{var _e$target$files;if((_e$target$files=e.target.files)!==null&&_e$target$files!==void 0&&_e$target$files[0])setFileToSend(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.attachBtn),{},{background:recording?\"#ff7675\":\"#fff\",color:recording?\"#fff\":\"#222\",marginRight:2,marginLeft:0,border:recording?\"2px solid #ff7675\":\"none\"},isMobile?{width:34,height:34,minWidth:34,minHeight:34,fontSize:18}:{}),type:\"button\",onClick:()=>{if(!recording)startRecording();else stopRecording();},title:recording?\"–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å\":\"–ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ\",disabled:fileToSend||audioBlob,children:recording?/*#__PURE__*/_jsx(\"span\",{style:{color:\"#fff\",fontSize:isMobile?18:22,display:\"flex\",alignItems:\"center\"},children:\"\\u23FA\"}):/*#__PURE__*/_jsx(\"span\",{style:{color:\"#222\",fontSize:isMobile?18:22,display:\"flex\",alignItems:\"center\"},children:\"\\uD83C\\uDFA4\"})}),recording&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"#ff7675\",fontWeight:600,minWidth:isMobile?28:40,fontSize:isMobile?13:16},children:\"\".concat(Math.floor(recordTime/60).toString().padStart(2,\"0\"),\":\").concat((recordTime%60).toString().padStart(2,\"0\"))}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},chatStyles.input),isMobile?{fontSize:14,padding:\"8px 10px\"}:{}),value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(selectedChannel){socketRef.current.emit(\"typing\",{channel:selectedChannel});if(e.key===\"Enter\")handleSend();}},disabled:!selectedChannel,placeholder:selectedChannel?\"–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...\":\"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread({},isMobile?{background:\"linear-gradient(90deg,#00c3ff,#3a7bd5)\",color:\"#fff\",border:\"none\",borderRadius:8,width:34,height:34,minWidth:34,minHeight:34,padding:0,fontSize:18,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",boxShadow:\"0 2px 8px #00c3ff33\",marginLeft:2}:chatStyles.sendBtn),onClick:handleSend,disabled:!selectedChannel||!input.trim()&&!fileToSend,title:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",children:isMobile?/*#__PURE__*/_jsx(\"span\",{style:{fontSize:18,color:\"#fff\"},children:\"\\u27A4\"}):\"–û—Ç–ø—Ä–∞–≤–∏—Ç—å\"})]}),videoCallModal,modalMedia&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0,0,0,0.7)\",zIndex:9999,display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:()=>setModalMedia(null),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#232526\",borderRadius:12,padding:24,maxWidth:\"90vw\",maxHeight:\"90vh\",boxShadow:\"0 4px 32px #000a\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",position:\"relative\"},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:{position:\"absolute\",top:8,right:12,background:\"none\",border:\"none\",color:\"#fff\",fontSize:28,fontWeight:700,cursor:\"pointer\",zIndex:2},onClick:()=>setModalMedia(null),title:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"}),modalMedia.type===\"image\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:modalMedia.url,alt:modalMedia.name,style:{maxWidth:\"70vw\",maxHeight:\"70vh\",borderRadius:10,marginBottom:16}}),modalMedia.name&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",fontSize:16,marginBottom:16,wordBreak:\"break-all\",textAlign:\"center\",maxWidth:\"60vw\"},children:modalMedia.name})]}):modalMedia.type===\"video\"?/*#__PURE__*/_jsx(\"video\",{src:modalMedia.url,controls:true,autoPlay:true,style:{maxWidth:\"70vw\",maxHeight:\"70vh\",borderRadius:10,marginBottom:16,background:\"#000\"}}):modalMedia.type===\"pdf\"?/*#__PURE__*/_jsx(\"iframe\",{src:modalMedia.url,title:modalMedia.name,style:{width:\"70vw\",height:\"70vh\",border:\"none\",borderRadius:10,background:\"#fff\",marginBottom:16}}):modalMedia.type===\"doc\"?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:200,minWidth:200,marginBottom:16},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:64,marginBottom:16},children:(()=>{const ext=(modalMedia.ext||\"\").toLowerCase();if(ext===\"pdf\")return\"üìÑ\";if([\"doc\",\"docx\"].includes(ext))return\"üìù\";if([\"xls\",\"xlsx\"].includes(ext))return\"üìä\";if([\"ppt\",\"pptx\"].includes(ext))return\"üìà\";if([\"txt\",\"rtf\"].includes(ext))return\"üìÉ\";return\"üìÅ\";})()}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",fontSize:18,marginBottom:8,wordBreak:\"break-all\",textAlign:\"center\"},children:modalMedia.name}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",fontSize:15,marginBottom:18},children:\"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0435\\u043D \\u0434\\u043B\\u044F \\u044D\\u0442\\u043E\\u0433\\u043E \\u0442\\u0438\\u043F\\u0430 \\u0444\\u0430\\u0439\\u043B\\u0430\"})]}):null,/*#__PURE__*/_jsx(\"button\",{style:{background:\"linear-gradient(90deg,#00c3ff,#3a7bd5)\",color:\"#fff\",border:\"none\",borderRadius:8,padding:\"10px 22px\",fontWeight:600,fontSize:15,cursor:\"pointer\",boxShadow:\"0 2px 8px #00c3ff33\",textDecoration:\"none\"},onClick:async e=>{e.stopPropagation();try{const response=await fetch(modalMedia.url,{credentials:\"same-origin\"});const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement(\"a\");a.href=url;a.download=modalMedia.name||\"file\";document.body.appendChild(a);a.click();setTimeout(()=>{window.URL.revokeObjectURL(url);a.remove();},200);}catch(err){alert(\"–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞\");}},children:\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"})]})})]}),showProfile&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0,0,0,0.12)\",zIndex:99,transition:\"background 0.2s\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:handleProfilePopupBgClick,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},chatStyles.profilePopup),isMobile?{position:\"fixed\",left:\"50%\",top:\"50%\",transform:\"translate(-50%, -50%)\",width:\"92vw\",maxWidth:340,minWidth:0,height:\"auto\",maxHeight:\"72vh\",minHeight:240,borderRadius:18,padding:\"14px 8px 8px 8px\",boxShadow:\"0 2px 16px #00c3ff33\",fontSize:15,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"flex-start\"}:{transform:showProfile?\"translateY(0)\":\"translateY(120%)\",opacity:showProfile?1:0,pointerEvents:showProfile?\"auto\":\"none\"}),{},{transition:\"transform 0.32s cubic-bezier(.4,1.4,.6,1), opacity 0.22s\"}),className:\"govchat-profile-popup\",onClick:e=>e.stopPropagation(),children:[isMobile&&/*#__PURE__*/_jsxs(\"div\",{style:{position:\"sticky\",top:0,left:0,width:\"100%\",background:\"#232526\",zIndex:2,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:\"0 4px 0 0\",minHeight:36,marginBottom:8},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:17,color:\"#00c3ff\",flex:1,textAlign:\"center\"},children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileCloseBtn),{},{position:\"static\",right:0,top:0,width:32,height:32,fontSize:22,marginRight:4,marginTop:0,marginBottom:0,background:\"none\",color:\"#b2bec3\",boxShadow:\"none\"}),onClick:()=>setShowProfile(false),title:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.profileAvatar),isMobile?{width:70,height:70,margin:\"8px auto 8px auto\",fontSize:36}:{}),className:\"govchat-profile-avatar\",children:/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",width:isMobile?70:90,height:isMobile?70:90,borderRadius:\"50%\",overflow:\"hidden\",cursor:\"pointer\",border:\"2px solid #00c3ff\",margin:\"0 auto\",background:\"#35363a\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:()=>fileInputRefAvatar.current&&fileInputRefAvatar.current.click(),title:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\",children:[userProfile!==null&&userProfile!==void 0&&userProfile.avatarUrl&&userProfile.avatarUrl!==\"/uploads/avatar-default.png\"?/*#__PURE__*/_jsx(\"img\",{src:userProfile.avatarUrl?userProfile.avatarUrl+\"?t=\"+avatarVersion:\"/uploads/avatar-default.png\",alt:\"avatar\",style:{width:isMobile?70:90,height:isMobile?70:90,borderRadius:\"50%\",objectFit:\"cover\",display:\"block\"},onError:e=>{e.target.onerror=null;e.target.src=\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":5000/uploads/avatar-default.png\");}},userProfile.avatarUrl+avatarVersion):/*#__PURE__*/// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É, –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π\n_jsx(\"img\",{src:\"/uploads/avatar-default.png\",alt:\"avatar\",style:{width:isMobile?70:90,height:isMobile?70:90,borderRadius:\"50%\",objectFit:\"cover\",display:\"block\"},onError:e=>{e.target.onerror=null;e.target.src=\"https://ui-avatars.com/api/?name=\"+encodeURIComponent((userProfile===null||userProfile===void 0?void 0:userProfile.username)||\"U\")+\"&background=00c3ff&color=fff&size=90\";}}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRefAvatar,type:\"file\",accept:\"image/*\",style:{display:\"none\"},onChange:async e=>{var _e$target$files2;if(!((_e$target$files2=e.target.files)!==null&&_e$target$files2!==void 0&&_e$target$files2[0]))return;const formData=new FormData();formData.append(\"file\",e.target.files[0]);const uploadRes=await axios.post(\"\".concat(API_URL,\"/upload?avatar=1\"),formData,{headers:{Authorization:\"Bearer \".concat(token)}});await axios.patch(\"\".concat(API_URL,\"/profile\"),{avatarUrl:uploadRes.data.url},{headers:{Authorization:\"Bearer \".concat(token)}});const profileRes=await axios.get(\"\".concat(API_URL,\"/profile\"),{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(profileRes.data);setAvatarVersion(Date.now());}})]})}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({flex:1,overflowY:\"auto\",minHeight:0,marginBottom:10,display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\"},isMobile?{padding:\"0 4px\"}:{}),children:[userProfile&&!editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[!isMobile&&/*#__PURE__*/_jsx(\"div\",{style:chatStyles.profileTitle,className:\"govchat-profile-title\",children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u041D\\u0438\\u043A:\"}),\" \",userProfile.username]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442:\"}),\" \",(_userProfile$age=userProfile.age)!==null&&_userProfile$age!==void 0?_userProfile$age:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0413\\u043E\\u0440\\u043E\\u0434:\"}),\" \",(_userProfile$city=userProfile.city)!==null&&_userProfile$city!==void 0?_userProfile$city:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0421\\u0435\\u043C\\u0435\\u0439\\u043D\\u044B\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),\" \",(_userProfile$status=userProfile.status)!==null&&_userProfile$status!==void 0?_userProfile$status:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginTop:18,justifyContent:\"flex-end\",flexWrap:isMobile?\"wrap\":\"nowrap\"},children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileEditBtn),isMobile?{fontSize:14,padding:\"7px 12px\"}:{}),onClick:()=>{setEditData({username:userProfile.username||\"\",password:\"\",city:userProfile.city||\"\",status:userProfile.status||\"\",age:userProfile.age||\"\"});setEditMode(true);},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileLogoutBtn),isMobile?{fontSize:14,padding:\"7px 12px\"}:{}),onClick:()=>{localStorage.removeItem(\"token\");window.location.reload();},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]})]}),userProfile&&editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[!isMobile&&/*#__PURE__*/_jsx(\"div\",{style:chatStyles.profileTitle,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u041D\\u0438\\u043A:\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},chatStyles.profileInput),isMobile?{fontSize:14,padding:\"6px 8px\"}:{}),value:editData.username,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{username:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},chatStyles.profileInput),isMobile?{fontSize:14,padding:\"6px 8px\"}:{}),type:\"password\",value:editData.password,placeholder:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{password:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442:\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},chatStyles.profileInput),isMobile?{fontSize:14,padding:\"6px 8px\"}:{}),type:\"number\",min:0,value:editData.age,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{age:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0413\\u043E\\u0440\\u043E\\u0434:\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},chatStyles.profileInput),isMobile?{fontSize:14,padding:\"6px 8px\"}:{}),value:editData.city,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{city:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0421\\u0435\\u043C\\u0435\\u0439\\u043D\\u044B\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},chatStyles.profileInput),isMobile?{fontSize:14,padding:\"6px 8px\"}:{}),value:editData.status,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{status:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginTop:10,justifyContent:\"flex-end\",flexWrap:isMobile?\"wrap\":\"nowrap\"},children:[/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileEditBtn),isMobile?{fontSize:14,padding:\"7px 12px\"}:{}),onClick:handleProfileSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileCloseBtn),{},{position:\"static\",width:\"auto\",height:\"auto\",fontSize:isMobile?14:15,marginLeft:0,marginTop:0,marginBottom:0,background:\"#35363a\",color:\"#b2bec3\",boxShadow:\"0 2px 8px #0002\"},isMobile?{padding:\"7px 12px\"}:{}),onClick:()=>setEditMode(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]}),!userProfile&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",marginBottom:8},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})]})]})}),showCustomizer&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0,0,0,0.12)\",zIndex:120,display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:()=>setShowCustomizer(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#232526\",borderRadius:16,boxShadow:\"0 2px 16px #00c3ff33\",padding:\"32px 32px 24px 32px\",minWidth:320,maxWidth:420,zIndex:121,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",position:\"relative\"},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:{position:\"absolute\",top:10,right:16,background:\"none\",color:\"#b2bec3\",border:\"none\",borderRadius:\"50%\",width:32,height:32,fontSize:22,fontWeight:700,cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",transition:\"background 0.2s, color 0.2s\",zIndex:122},onClick:()=>setShowCustomizer(false),title:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20,color:\"#ffb347\",marginBottom:18},children:\"\\u041A\\u0430\\u0441\\u0442\\u043E\\u043C\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:18,width:\"100%\"},children:chatStyles.themes.map(t=>/*#__PURE__*/_jsxs(\"button\",{style:{display:\"flex\",alignItems:\"center\",gap:16,width:\"100%\",background:t.pageBg,border:theme.name===t.name?\"2px solid #00c3ff\":\"2px solid transparent\",borderRadius:10,padding:\"12px 18px\",cursor:\"pointer\",color:\"#222\",fontWeight:600,fontSize:16,boxShadow:theme.name===t.name?\"0 2px 12px #00c3ff44\":\"0 2px 8px #0002\",transition:\"border 0.2s, box-shadow 0.2s\"},onClick:()=>handleThemeSelect(t),children:[/*#__PURE__*/_jsx(\"span\",{style:{width:32,height:32,borderRadius:8,background:t.chatBg,border:\"1.5px solid #fff\",display:\"inline-block\",marginRight:8}}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#fff\",textShadow:\"0 1px 4px #0005\"},children:t.name}),theme.name===t.name&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"auto\",color:\"#00c3ff\",fontSize:22},children:\"\\u2714\"})]},t.name))})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","chatStyles","io","LocalNotifications","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","API_URL","concat","parseToken","token","t","split","replace","n","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","username","_unused","App","_channels$find","_userProfile$age","_userProfile$city","_userProfile$status","setToken","localStorage","getItem","channels","setChannels","selectedChannel","setSelectedChannel","messages","setMessages","input","setInput","typing","setTyping","typingTimeoutRef","showCreate","setShowCreate","newChannel","setNewChannel","authMode","setAuthMode","setUsername","password","setPassword","error","setError","userProfile","setUserProfile","editMode","setEditMode","editData","setEditData","city","status","age","showProfile","setShowProfile","registering","setRegistering","socketRef","messagesEndRef","fileInputRefChat","fileInputRefAvatar","avatarVersion","setAvatarVersion","Date","now","fileToSend","setFileToSend","filePreviewUrl","setFilePreviewUrl","modalMedia","setModalMedia","attachBtnHover","setAttachBtnHover","showCustomizer","setShowCustomizer","theme","setTheme","themes","recording","setRecording","recordTime","setRecordTime","mediaRecorder","setMediaRecorder","audioBlob","setAudioBlob","audioUrl","setAudioUrl","recordTimerRef","mobileMenuOpen","setMobileMenuOpen","videoCall","setVideoCall","active","incoming","from","videoStreams","setVideoStreams","local","remotes","setVideoPeers","videoError","setVideoError","videoConnecting","setVideoConnecting","setMySocketId","activeCallInChannel","setActiveCallInChannel","activeCallsInChannels","setActiveCallsInChannels","micEnabled","setMicEnabled","cameraEnabled","setCameraEnabled","localVideoRef","remoteVideosRef","videoPeersRef","window","requestPermissions","_unused2","Notification","requestPermission","catch","_unused3","showNotification","title","body","Capacitor","schedule","notifications","id","at","_unused4","document","visibilityState","permission","_unused5","toggleMicrophone","audioTrack","getAudioTracks","enabled","console","log","toggleCamera","videoTrack","getVideoTracks","startVideoCall","alert","stream","navigator","mediaDevices","getUserMedia","video","audio","s","_objectSpread","channel","current","emit","setTimeout","message","acceptVideoCall","createPeer","peerId","isInitiator","localStream","arguments","length","undefined","streamToUse","pc","RTCPeerConnection","iceServers","urls","credential","iceCandidatePoolSize","getTracks","forEach","track","kind","addTrack","onicecandidate","event","candidate","type","to","data","ontrack","streams","remoteStream","warn","onconnectionstatechange","connectionState","includes","removePeer","oniceconnectionstatechange","iceConnectionState","restartIce","peers","offer","createOffer","offerToReceiveAudio","offerToReceiveVideo","voiceActivityDetection","setLocalDescription","close","removed","rest","_objectWithoutProperties","_toPropertyKey","_ref","endVideoCall","Object","values","stop","leaveVideoCall","declineVideoCall","videoCallButton","style","videoCallBtn","videoCallBtnActive","onClick","disabled","children","startRecording","MediaRecorder","recorder","chunks","ondataavailable","e","size","push","onstop","blob","Blob","URL","createObjectURL","setInterval","rt","start","err","stopRecording","clearInterval","sendAudioMessage","formData","FormData","append","uploadRes","post","headers","Authorization","msg","text","sender","fileUrl","url","fileType","originalName","fetchProfile","res","get","pageBg","chatBg","found","find","_unused6","then","auth","on","prev","user","clearTimeout","_ref2","handleNewChannel","disconnect","off","scrollIntoView","behavior","handler","handleCreateChannel","trim","name","members","chs","_id","_unused7","handleSend","value","handleRegister","preventDefault","setItem","_e$response","_e$response$data","response","handleLogin","_e$response2","_e$response2$data","handleProfileSave","payload","keys","k","patch","_e$response3","_e$response3$data","handleProfilePopupBgClick","d","faviconId","link","querySelector","createElement","rel","head","appendChild","href","startsWith","revokeObjectURL","handleThemeSelect","u","_unused8","themedPageStyle","page","background","themedChatBoxStyle","chatBox","styleId","getElementById","innerHTML","responsive","documentElement","overflow","isMobile","setIsMobile","innerWidth","onResize","addEventListener","removeEventListener","onConnect","onIncoming","_ref3","initiatorSocketId","onParticipants","_ref4","participants","waitForLocalStream","Promise","resolve","checkStream","onJoined","_ref5","socketId","onLeft","_ref6","onSignal","_ref7","setRemoteDescription","RTCSessionDescription","answer","createAnswer","addIceCandidate","RTCIceCandidate","onEnded","_ref8","by","onActiveCallsUpdate","_ref9","activeCalls","_socketRef$current","_socketRef$current2","_socketRef$current3","_socketRef$current4","_socketRef$current5","_socketRef$current6","_socketRef$current7","_socketRef$current8","srcObject","entries","_ref0","videoCallModal","stopPropagation","videoCallBox","width","minHeight","padding","position","fontWeight","fontSize","color","marginBottom","textAlign","ch","display","flexDirection","alignItems","justifyContent","borderRadius","gridTemplateColumns","gap","height","_ref1","ref","el","autoPlay","playsInline","objectFit","bottom","right","border","zIndex","muted","videoCallControls","flexWrap","videoCallControlBtn","videoCallEndBtn","marginTop","videoCallBanner","videoCallBannerText","videoCallBannerIcon","videoCallBannerBtn","videoCallBannerDeclineBtn","authContainer","authTitle","onSubmit","authInput","placeholder","onChange","target","required","autoComplete","authBtn","switchBtn","mobileHeader","className","mobileMenuBtn","letterSpacing","textShadow","margin","mobileMenu","mobileMenuOverlay","mobileMenuCloseBtn","mobileMenuTitle","mobileMenuChannels","channelItem","top","boxShadow","animation","createBtn","v","profileBtn","viewBox","fill","cx","cy","r","rx","ry","marginRight","marginLeft","stroke","strokeWidth","x","y","mobileMenuFooter","desktopMenu","sidebar","sidebarTitle","channelList","transform","profileBtnBox","left","chatContainer","paddingTop","maxHeight","chatTitle","isMine","time","createdAt","toLocaleTimeString","hour","minute","messageRow","messageSender","src","controls","maxWidth","alt","cursor","minWidth","ext","pop","toLowerCase","wordBreak","flex","paddingLeft","paddingRight","alignSelf","role","inputRow","attachBtn","click","tabIndex","onMouseEnter","onMouseLeave","_e$target$files","files","Math","floor","padStart","onKeyDown","key","sendBtn","textDecoration","fetch","credentials","a","download","remove","transition","profilePopup","opacity","pointerEvents","profileCloseBtn","profileAvatar","avatarUrl","onError","onerror","location","protocol","hostname","encodeURIComponent","accept","_e$target$files2","profileRes","overflowY","profileTitle","profileField","profileLabel","profileEditBtn","profileLogoutBtn","removeItem","reload","profileInput","min"],"sources":["D:/prr/prr/semak4/video-chat/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport * as chatStyles from \"./styles/chatStyles\";\r\nimport io from \"socket.io-client\";\r\nimport { LocalNotifications } from \"@capacitor/local-notifications\";\r\n\r\n// –ë–∞–∑–æ–≤—ã–π URL API ‚Äî —Å—Ä–∞–∑—É —É–∫–∞–∂–∏ IP —Å–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ—Ä—Ç\r\n// –ø—Ä–∏–º–µ—Ä: http://192.168.0.10:5000\r\nconst API_BASE = \"http://95.81.119.128:5000\";\r\nconst API_URL = `${API_BASE}/api`;\r\n\r\nfunction parseToken(token) {\r\n  if (!token) return \"\";\r\n  try {\r\n    const t = token.split(\".\")[1].replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    const n = decodeURIComponent(\r\n      atob(t)\r\n        .split(\"\")\r\n        .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n        .join(\"\")\r\n    );\r\n    return JSON.parse(n).username || \"\";\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n  const [channels, setChannels] = useState([]);\r\n  const [selectedChannel, setSelectedChannel] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [typing, setTyping] = useState(\"\");\r\n  const typingTimeoutRef = useRef(null);\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [newChannel, setNewChannel] = useState(\"\");\r\n  const [authMode, setAuthMode] = useState(\"login\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editData, setEditData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    city: \"\",\r\n    status: \"\",\r\n    age: \"\",\r\n  });\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [] = useState(false);\r\n  const [] = useState({\r\n    city: \"\",\r\n    status: \"\",\r\n    age: \"\",\r\n  });\r\n  const [registering, setRegistering] = useState(false);\r\n  const socketRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n  const fileInputRefChat = React.useRef(null); // –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π –≤ —á–∞—Ç\r\n  const fileInputRefAvatar = React.useRef(null); // –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è\r\n  const [avatarVersion, setAvatarVersion] = useState(Date.now());\r\n  const [fileToSend, setFileToSend] = useState(null);\r\n  const [filePreviewUrl, setFilePreviewUrl] = useState(null);\r\n  const [modalMedia, setModalMedia] = useState(null); // {type, url, name}\r\n  const [attachBtnHover, setAttachBtnHover] = useState(false); // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏ –≤–ª–æ–∂–µ–Ω–∏–π\r\n  const [showCustomizer, setShowCustomizer] = useState(false); // –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\r\n  const [theme, setTheme] = useState(chatStyles.themes[0]); // –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞\r\n  const [recording, setRecording] = useState(false);\r\n  const [recordTime, setRecordTime] = useState(0);\r\n  const [mediaRecorder, setMediaRecorder] = useState(null);\r\n  const [audioBlob, setAudioBlob] = useState(null);\r\n  const [audioUrl, setAudioUrl] = useState(null);\r\n  const recordTimerRef = useRef(null);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [videoCall, setVideoCall] = useState({ active: false, incoming: false, from: null });\r\n  const [videoStreams, setVideoStreams] = useState({ local: null, remotes: {} }); // remotes: {socketId: MediaStream}\r\n  const [, setVideoPeers] = useState({}); // {socketId: RTCPeerConnection}\r\n  const [videoError, setVideoError] = useState(\"\");\r\n  const [videoConnecting, setVideoConnecting] = useState(false);\r\n  const [, setMySocketId] = useState(null);\r\n  const [activeCallInChannel, setActiveCallInChannel] = useState(null); // –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ\r\n  const [activeCallsInChannels, setActiveCallsInChannels] = useState({}); // –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤ –≤ –∫–∞–Ω–∞–ª–∞—Ö\r\n  // –ù–û–í–û–ï: —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏ –∫–∞–º–µ—Ä–æ–π\r\n  const [micEnabled, setMicEnabled] = useState(true);\r\n  const [cameraEnabled, setCameraEnabled] = useState(true);\r\n\r\n  // --- WebRTC helpers ---\r\n  const localVideoRef = useRef(null);\r\n  const remoteVideosRef = useRef({}); // {socketId: ref}\r\n  const videoPeersRef = useRef({}); // –î–æ–±–∞–≤–ª—è–µ–º ref –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ peers\r\n\r\n  // --- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ / WebView / Capacitor ---\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    // Capacitor Local Notifications (Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)\r\n    (async () => {\r\n      try {\r\n        await LocalNotifications.requestPermissions();\r\n      } catch {\r\n        // ignore\r\n      }\r\n    })();\r\n\r\n    // –û–±—ã—á–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)\r\n    if (\"Notification\" in window) {\r\n      try {\r\n        Notification.requestPermission().catch(() => {});\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const showNotification = async (title, body) => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    // 1) –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ–º –≤–Ω—É—Ç—Ä–∏ Capacitor WebView ‚Äî –ø—Ä–æ–±—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\r\n    try {\r\n      if (window.Capacitor && LocalNotifications) {\r\n        await LocalNotifications.schedule({\r\n          notifications: [\r\n            {\r\n              id: Date.now() % 2147483647,\r\n              title,\r\n              body,\r\n              schedule: { at: new Date(Date.now() + 50) },\r\n            },\r\n          ],\r\n        });\r\n        return;\r\n      }\r\n    } catch {\r\n      // ignore –∏ –ø—Ä–æ–±—É–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç\r\n    }\r\n\r\n    // 2) –§–æ–ª–±—ç–∫ –Ω–∞ –æ–±—ã—á–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\r\n    if (!(\"Notification\" in window)) return;\r\n    if (document.visibilityState === \"visible\") return;\r\n    if (Notification.permission !== \"granted\") return;\r\n    try {\r\n      new Notification(title, { body });\r\n    } catch {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  // –ù–û–í–û–ï: —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞\r\n  const toggleMicrophone = () => {\r\n    if (videoStreams.local) {\r\n      const audioTrack = videoStreams.local.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        audioTrack.enabled = !audioTrack.enabled;\r\n        setMicEnabled(audioTrack.enabled);\r\n        console.log(\"Microphone\", audioTrack.enabled ? \"enabled\" : \"disabled\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // –ù–û–í–û–ï: —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã\r\n  const toggleCamera = () => {\r\n    if (videoStreams.local) {\r\n      const videoTrack = videoStreams.local.getVideoTracks()[0];\r\n      if (videoTrack) {\r\n        videoTrack.enabled = !videoTrack.enabled;\r\n        setCameraEnabled(videoTrack.enabled);\r\n        console.log(\"Camera\", videoTrack.enabled ? \"enabled\" : \"disabled\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –∏–Ω–∏—Ü–∏–∞—Ü–∏—è ---\r\n  const startVideoCall = async () => {\r\n    if (!selectedChannel) {\r\n      alert(\"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞\");\r\n      return;\r\n    }\r\n    \r\n    console.log(\"Starting video call in channel:\", selectedChannel);\r\n    setVideoError(\"\");\r\n    setVideoConnecting(true);\r\n    \r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: true, \r\n        audio: true \r\n      });\r\n      \r\n      console.log(\"Got local stream\");\r\n      setVideoStreams(s => ({ ...s, local: stream }));\r\n      setVideoCall({ active: true, incoming: false, from: null, channel: selectedChannel });\r\n      setActiveCallInChannel(null); // —É–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—Ö–æ–¥—è—â–µ–º –∑–≤–æ–Ω–∫–µ\r\n      // –ù–û–í–û–ï: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –∫–∞–º–µ—Ä—ã\r\n      setMicEnabled(true);\r\n      setCameraEnabled(true);\r\n      \r\n      // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∑–≤–æ–Ω–∫—É\r\n      socketRef.current.emit(\"video-call-join\", { channel: selectedChannel });\r\n      \r\n      // –ó–∞—Ç–µ–º –∏–Ω–∏—Ü–∏–∏—Ä—É–µ–º –∑–≤–æ–Ω–æ–∫ –¥–ª—è –¥—Ä—É–≥–∏—Ö\r\n      setTimeout(() => {\r\n        console.log(\"Sending initiate signal to channel:\", selectedChannel);\r\n        socketRef.current.emit(\"video-call-initiate\", { channel: selectedChannel });\r\n        setVideoConnecting(false);\r\n      }, 500);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error starting video call:\", error);\r\n      setVideoError(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É: \" + error.message);\r\n      setVideoConnecting(false);\r\n      setVideoCall({ active: false, incoming: false, from: null });\r\n    }\r\n  };\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –ø—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π ---\r\n  const acceptVideoCall = async () => {\r\n    console.log(\"Accepting video call from:\", activeCallInChannel?.from, \"in channel:\", activeCallInChannel?.channel);\r\n    setVideoError(\"\");\r\n    setVideoConnecting(true);\r\n    \r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: true, \r\n        audio: true \r\n      });\r\n      \r\n      console.log(\"Got local stream for incoming call\");\r\n      setVideoStreams(s => ({ ...s, local: stream }));\r\n      setVideoCall({ \r\n        active: true, \r\n        incoming: false, \r\n        from: null, \r\n        channel: activeCallInChannel?.channel \r\n      });\r\n      setActiveCallInChannel(null); // —É–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\r\n      // –ù–û–í–û–ï: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –∫–∞–º–µ—Ä—ã\r\n      setMicEnabled(true);\r\n      setCameraEnabled(true);\r\n      \r\n      // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∑–≤–æ–Ω–∫—É\r\n      socketRef.current.emit(\"video-call-join\", { channel: activeCallInChannel?.channel });\r\n      \r\n      setTimeout(() => {\r\n        setVideoConnecting(false);\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error accepting video call:\", error);\r\n      setVideoError(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É: \" + error.message);\r\n      setVideoConnecting(false);\r\n      setVideoCall({ active: false, incoming: false, from: null });\r\n    }\r\n  };\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: —Å–æ–∑–¥–∞—Ç—å PeerConnection ---\r\n  const createPeer = async (peerId, isInitiator, localStream = null) => {\r\n    if (videoPeersRef.current[peerId]) {\r\n      console.log(\"Peer already exists for:\", peerId);\r\n      return videoPeersRef.current[peerId];\r\n    }\r\n    \r\n    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –∏–ª–∏ —Ç–µ–∫—É—â–∏–π –ª–æ–∫–∞–ª—å–Ω—ã–π\r\n    const streamToUse = localStream || videoStreams.local;\r\n    if (!streamToUse) {\r\n      console.log(\"No local stream available for peer:\", peerId);\r\n      return null;\r\n    }\r\n    \r\n    console.log(\"Creating peer connection for:\", peerId, \"as initiator:\", isInitiator);\r\n    \r\n    const pc = new RTCPeerConnection({\r\n      iceServers: [\r\n        {\r\n          urls: [\r\n            \"stun:95.81.119.128:3478\",\r\n            \"stun:stun.l.google.com:19302\"\r\n          ]\r\n        },\r\n        {\r\n          urls: [\r\n            \"turn:95.81.119.128:3478?transport=udp\",\r\n            \"turn:95.81.119.128:3478?transport=tcp\"\r\n          ],\r\n          username: \"govchat\",\r\n          credential: \"supersecretpassword\"\r\n        }\r\n      ],\r\n      iceCandidatePoolSize: 10\r\n    });\r\n    \r\n    // –°—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ ref –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞\r\n    videoPeersRef.current[peerId] = pc;\r\n    \r\n    // –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–∫–∏\r\n    streamToUse.getTracks().forEach(track => {\r\n      console.log(\"Adding track to peer:\", peerId, track.kind);\r\n      pc.addTrack(track, streamToUse);\r\n    });\r\n    \r\n    // –û–±—Ä–∞–±–æ—Ç–∫–∞ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤\r\n    pc.onicecandidate = (event) => {\r\n      if (event.candidate) {\r\n        console.log(\"Sending ICE candidate to:\", peerId, event.candidate.type);\r\n        socketRef.current.emit(\"video-signal\", {\r\n          channel: selectedChannel,\r\n          to: peerId,\r\n          data: { candidate: event.candidate }\r\n        });\r\n      } else {\r\n        console.log(\"ICE gathering completed for:\", peerId);\r\n      }\r\n    };\r\n    \r\n    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞\r\n    pc.ontrack = (event) => {\r\n      console.log(\"Received remote stream from:\", peerId, \"tracks:\", event.streams[0].getTracks().length);\r\n      const remoteStream = event.streams[0];\r\n      \r\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ—Ç–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–∫–∏\r\n      if (remoteStream.getTracks().length > 0) {\r\n        setVideoStreams(s => ({\r\n          ...s,\r\n          remotes: { ...s.remotes, [peerId]: remoteStream }\r\n        }));\r\n      } else {\r\n        console.warn(\"Received empty stream from:\", peerId);\r\n      }\r\n    };\r\n    \r\n    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\r\n    pc.onconnectionstatechange = () => {\r\n      console.log(`Connection state with ${peerId}:`, pc.connectionState);\r\n      \r\n      if (pc.connectionState === \"connected\") {\r\n        console.log(\"‚úÖ WebRTC connection established with:\", peerId);\r\n        setVideoError(\"\"); // –û—á–∏—â–∞–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏\r\n      } else if (pc.connectionState === \"connecting\") {\r\n        console.log(\"üîÑ Connecting to:\", peerId);\r\n      } else if ([\"disconnected\", \"failed\", \"closed\"].includes(pc.connectionState)) {\r\n        console.log(\"‚ùå Connection failed/closed with:\", peerId, \"- removing peer\");\r\n        \r\n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –±—ã–ª–æ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ\r\n        if (pc.connectionState === \"failed\") {\r\n          setVideoError(\"–ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.\");\r\n        }\r\n        \r\n        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è\r\n        setTimeout(() => {\r\n          if (videoPeersRef.current[peerId] && \r\n              [\"disconnected\", \"failed\", \"closed\"].includes(videoPeersRef.current[peerId].connectionState)) {\r\n            removePeer(peerId);\r\n          }\r\n        }, 3000);\r\n      }\r\n    };\r\n    \r\n    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ICE —Å–æ—Å—Ç–æ—è–Ω–∏—è\r\n    pc.oniceconnectionstatechange = () => {\r\n      console.log(`ICE connection state with ${peerId}:`, pc.iceConnectionState);\r\n      \r\n      if (pc.iceConnectionState === \"failed\") {\r\n        console.log(\"ICE connection failed with:\", peerId, \"- attempting restart\");\r\n        // –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ ICE\r\n        pc.restartIce();\r\n      }\r\n    };\r\n    \r\n    // –û–±–Ω–æ–≤–∏—Ç—å state\r\n    setVideoPeers(peers => ({ ...peers, [peerId]: pc }));\r\n    \r\n    // –°–æ–∑–¥–∞—Ç—å offer –µ—Å–ª–∏ –º—ã –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—ã\r\n    if (isInitiator) {\r\n      try {\r\n        console.log(\"Creating offer for:\", peerId);\r\n        const offer = await pc.createOffer({\r\n          offerToReceiveAudio: true,\r\n          offerToReceiveVideo: true,\r\n          voiceActivityDetection: false // –æ—Ç–∫–ª—é—á–∞–µ–º VAD –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\r\n        });\r\n        await pc.setLocalDescription(offer);\r\n        \r\n        console.log(\"Sending offer to:\", peerId);\r\n        socketRef.current.emit(\"video-signal\", {\r\n          channel: selectedChannel,\r\n          to: peerId,\r\n          data: offer\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error creating offer for\", peerId, \":\", error);\r\n        setVideoError(\"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\");\r\n      }\r\n    }\r\n    \r\n    return pc;\r\n  };\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: —É–¥–∞–ª–∏—Ç—å PeerConnection ---\r\n  const removePeer = (peerId) => {\r\n    console.log(\"Removing peer:\", peerId);\r\n    \r\n    // –£–¥–∞–ª—è–µ–º –∏–∑ ref\r\n    if (videoPeersRef.current[peerId]) {\r\n      videoPeersRef.current[peerId].close();\r\n      delete videoPeersRef.current[peerId];\r\n    }\r\n    \r\n    setVideoPeers(peers => {\r\n      const { [peerId]: removed, ...rest } = peers;\r\n      return rest;\r\n    });\r\n    \r\n    setVideoStreams(s => {\r\n      const { [peerId]: removed, ...rest } = s.remotes || {};\r\n      return { ...s, remotes: rest };\r\n    });\r\n  };\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –∑–∞–≤–µ—Ä—à–∏—Ç—å ---\r\n  const endVideoCall = () => {\r\n    console.log(\"Ending video call\");\r\n    \r\n    // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ peer connections —á–µ—Ä–µ–∑ ref\r\n    Object.values(videoPeersRef.current).forEach(pc => {\r\n      if (pc) pc.close();\r\n    });\r\n    videoPeersRef.current = {};\r\n    setVideoPeers({});\r\n    \r\n    // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫\r\n    if (videoStreams.local) {\r\n      videoStreams.local.getTracks().forEach(track => {\r\n        track.stop();\r\n      });\r\n    }\r\n    \r\n    setVideoStreams({ local: null, remotes: {} });\r\n    setVideoCall({ active: false, incoming: false, from: null });\r\n    setVideoConnecting(false);\r\n    setVideoError(\"\");\r\n    // –ù–û–í–û–ï: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –∫–∞–º–µ—Ä—ã\r\n    setMicEnabled(true);\r\n    setCameraEnabled(true);\r\n  };\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –ø–æ–∫–∏–Ω—É—Ç—å –∑–≤–æ–Ω–æ–∫ ---\r\n  const leaveVideoCall = () => {\r\n    if (videoCall.active && selectedChannel) {\r\n      socketRef.current.emit(\"video-call-leave\", { channel: selectedChannel });\r\n    }\r\n    endVideoCall();\r\n  };\r\n\r\n  // --- –û—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ ---\r\n  const declineVideoCall = () => {\r\n    setActiveCallInChannel(null);\r\n  };\r\n\r\n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞\r\n  const videoCallButton = selectedChannel ? (\r\n    <button\r\n      style={{\r\n        ...chatStyles.videoCallBtn,\r\n        ...(videoCall.active ? chatStyles.videoCallBtnActive : {}),\r\n      }}\r\n      onClick={videoCall.active ? leaveVideoCall : startVideoCall}\r\n      disabled={videoConnecting}\r\n      title={videoCall.active ? \"–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫\" : \"–ù–∞—á–∞—Ç—å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫\"}\r\n    >\r\n      {videoConnecting ? \"‚è≥\" : videoCall.active ? \"üìπ\" : \"üìπ\"}\r\n    </button>\r\n  ) : null;\r\n\r\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ\r\n  const startRecording = async () => {\r\n    if (!navigator.mediaDevices || !window.MediaRecorder) {\r\n      alert(\"–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å –∞—É–¥–∏–æ\");\r\n      return;\r\n    }\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new window.MediaRecorder(stream);\r\n      let chunks = [];\r\n      recorder.ondataavailable = (e) => {\r\n        if (e.data.size > 0) chunks.push(e.data);\r\n      };\r\n      recorder.onstop = () => {\r\n        const blob = new Blob(chunks, { type: \"audio/webm\" });\r\n        setAudioBlob(blob);\r\n        setAudioUrl(URL.createObjectURL(blob));\r\n        setRecording(false);\r\n        setRecordTime(0);\r\n        stream.getTracks().forEach(track => track.stop());\r\n      };\r\n      setMediaRecorder(recorder);\r\n      setRecording(true);\r\n      setRecordTime(0);\r\n      recordTimerRef.current = setInterval(() => {\r\n        setRecordTime(rt => rt + 1);\r\n      }, 1000);\r\n      chunks = [];\r\n      recorder.start();\r\n    } catch (err) {\r\n      alert(\"–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É\");\r\n    }\r\n  };\r\n\r\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ\r\n  const stopRecording = () => {\r\n    if (mediaRecorder) {\r\n      mediaRecorder.stop();\r\n      setMediaRecorder(null);\r\n    }\r\n    setRecording(false);\r\n    if (recordTimerRef.current) {\r\n      clearInterval(recordTimerRef.current);\r\n      recordTimerRef.current = null;\r\n    }\r\n  };\r\n\r\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ—Å–æ–æ–±—â–µ–Ω–∏—è\r\n  const sendAudioMessage = async () => {\r\n    if (!audioBlob || !selectedChannel) return;\r\n    const t = parseToken(token);\r\n    const formData = new FormData();\r\n    formData.append(\"file\", audioBlob, \"voice-message.webm\");\r\n    const uploadRes = await axios.post(\r\n      `${API_URL}/upload`,\r\n      formData,\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    const msg = {\r\n      text: \"\",\r\n      sender: t,\r\n      channel: selectedChannel,\r\n      fileUrl: uploadRes.data.url,\r\n      fileType: uploadRes.data.fileType,\r\n      originalName: uploadRes.data.originalName || \"voice-message.webm\"\r\n    };\r\n    socketRef.current && socketRef.current.emit(\"join\", selectedChannel);\r\n    socketRef.current.emit(\"message\", msg);\r\n    setAudioBlob(null);\r\n    setAudioUrl(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setUsername(parseToken(token));\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const res = await axios.get(`${API_URL}/profile`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setUserProfile(res.data);\r\n        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è\r\n        if (res.data.theme && (res.data.theme.pageBg || res.data.theme.chatBg)) {\r\n          const found = chatStyles.themes.find(\r\n            t => t.pageBg === res.data.theme.pageBg && t.chatBg === res.data.theme.chatBg\r\n          );\r\n          setTheme(found || { ...chatStyles.themes[0], ...res.data.theme });\r\n        } else {\r\n          setTheme(chatStyles.themes[0]);\r\n        }\r\n      } catch {\r\n        setUserProfile(null);\r\n        setTheme(chatStyles.themes[0]);\r\n      }\r\n    };\r\n    fetchProfile();\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    axios\r\n      .get(`${API_URL}/channels`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n      .then((res) => setChannels(res.data))\r\n      .catch(() => setChannels([]));\r\n\r\n    socketRef.current = io(\"/\", {\r\n      auth: { token },\r\n    });\r\n\r\n    socketRef.current.on(\"message\", (msg) => {\r\n      setMessages((prev) =>\r\n        msg.channel === selectedChannel ? [...prev, msg] : prev\r\n      );\r\n\r\n      if (msg.channel !== selectedChannel || document.visibilityState !== \"visible\") {\r\n        showNotification(\"–ì–æ–í–ß–∞—Ç\", `–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç ${msg.sender}`);\r\n      }\r\n    });\r\n\r\n    socketRef.current.on(\"typing\", (e) => {\r\n      setTyping(`${e.user} –ø–µ—á–∞—Ç–∞–µ—Ç...`);\r\n      if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\r\n      typingTimeoutRef.current = setTimeout(() => setTyping(\"\"), 2000);\r\n    });\r\n\r\n    // –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤\r\n    socketRef.current.on(\"video-call-status\", ({ channel, active }) => {\r\n      setActiveCallsInChannels(prev => {\r\n        if (active) {\r\n          return { ...prev, [channel]: true };\r\n        } else {\r\n          const { [channel]: removed, ...rest } = prev;\r\n          return rest;\r\n        }\r\n      });\r\n    });\r\n\r\n    // –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ\r\n    const handleNewChannel = () => {\r\n      axios\r\n        .get(`${API_URL}/channels`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setChannels(res.data))\r\n        .catch(() => setChannels([]));\r\n    };\r\n    socketRef.current.on(\"new-channel\", handleNewChannel);\r\n\r\n    return () => {\r\n      socketRef.current && socketRef.current.disconnect();\r\n      socketRef.current && socketRef.current.off(\"new-channel\", handleNewChannel);\r\n      socketRef.current && socketRef.current.off(\"video-call-status\");\r\n      if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\r\n    };\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (token && selectedChannel) {\r\n      axios\r\n        .get(`${API_URL}/messages/${selectedChannel}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setMessages(res.data));\r\n      socketRef.current && socketRef.current.emit(\"join\", selectedChannel);\r\n      // –ù–û–í–û–ï: –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–≤–æ–Ω–∫–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞\r\n      setActiveCallInChannel(null);\r\n    }\r\n  }, [token, selectedChannel]);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current && messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (!socketRef.current) return;\r\n    const handler = (msg) => {\r\n      if (msg.channel === selectedChannel) setMessages((prev) => [...prev, msg]);\r\n    };\r\n    socketRef.current.on(\"message\", handler);\r\n    return () => socketRef.current.off(\"message\", handler);\r\n  }, [selectedChannel]);\r\n\r\n  const handleCreateChannel = async () => {\r\n    if (!newChannel.trim()) return;\r\n    try {\r\n      const t = parseToken(token);\r\n      const res = await axios.post(\r\n        `${API_URL}/channels`,\r\n        { name: newChannel, members: [t] },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setShowCreate(false);\r\n      setNewChannel(\"\");\r\n      const chs = await axios.get(`${API_URL}/channels`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setChannels(chs.data);\r\n      setSelectedChannel(res.data._id);\r\n      socketRef.current && socketRef.current.emit(\"join\", res.data._id);\r\n    } catch {\r\n      alert(\"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞\");\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if ((!input.trim() && !fileToSend) || !selectedChannel) return;\r\n    const t = parseToken(token);\r\n    let msg = { text: input, sender: t, channel: selectedChannel };\r\n    if (fileToSend) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", fileToSend);\r\n      const uploadRes = await axios.post(\r\n        `${API_URL}/upload`,\r\n        formData,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      msg.fileUrl = uploadRes.data.url;\r\n      msg.fileType = uploadRes.data.fileType;\r\n      msg.originalName = uploadRes.data.originalName;\r\n    }\r\n    socketRef.current && socketRef.current.emit(\"join\", selectedChannel);\r\n    socketRef.current.emit(\"message\", msg);\r\n    setInput(\"\");\r\n    setFileToSend(null);\r\n    setFilePreviewUrl(null);\r\n    if (fileInputRefChat.current) fileInputRefChat.current.value = \"\";\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setRegistering(true);\r\n    try {\r\n      await axios.post(`${API_URL}/register`, {\r\n        username,\r\n        password,\r\n      });\r\n      // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ä–∞–∑—É –ª–æ–≥–∏–Ω–∏–º—Å—è (–±–µ–∑ –∫–∞–ø—á–∏)\r\n      const res = await axios.post(`${API_URL}/login`, {\r\n        username,\r\n        password,\r\n      });\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      setToken(res.data.token);\r\n    } catch (e) {\r\n      let msg = \"–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –≤—Ö–æ–¥–∞\";\r\n      if (e?.response?.data?.error) msg = e.response.data.error;\r\n      else if (typeof e?.message === \"string\" && e.message) msg = e.message;\r\n      setError(msg);\r\n    }\r\n    setRegistering(false);\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setRegistering(true);\r\n    try {\r\n      const res = await axios.post(`${API_URL}/login`, {\r\n        username,\r\n        password,\r\n      });\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      setToken(res.data.token);\r\n    } catch (e) {\r\n      let msg = \"–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å\";\r\n      if (e?.response?.data?.error) msg = e.response.data.error;\r\n      else if (typeof e?.message === \"string\" && e.message) msg = e.message;\r\n      setError(msg);\r\n    }\r\n    setRegistering(false);\r\n  };\r\n\r\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª—è\r\n  const handleProfileSave = async () => {\r\n    try {\r\n      const payload = {\r\n        username: editData.username,\r\n        password: editData.password,\r\n        city: editData.city,\r\n        status: editData.status,\r\n        age: editData.age,\r\n      };\r\n      Object.keys(payload).forEach(k => {\r\n        if (payload[k] === \"\" || payload[k] === null) delete payload[k];\r\n      });\r\n      const res = await axios.patch(`${API_URL}/profile`, payload, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setUserProfile(res.data);\r\n      setEditMode(false);\r\n      if (payload.username && payload.username !== userProfile.username && res.data.token) {\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        setToken(res.data.token);\r\n      }\r\n    } catch (e) {\r\n      alert(e?.response?.data?.error || e?.message || \"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è\");\r\n    }\r\n  };\r\n\r\n  const handleProfilePopupBgClick = () => {\r\n    // –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É (–∞ –Ω–µ –ø–æ —Å–∞–º–æ–º—É popup), –∑–∞–∫—Ä—ã–≤–∞–µ–º\r\n    setShowProfile(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userProfile) {\r\n      setEditData(d => ({\r\n        ...d,\r\n      }));\r\n    }\r\n  }, [userProfile]);\r\n\r\n  useEffect(() => {\r\n    document.title = \"–ì–æ–í–ß–∞—Ç 2.1 Beta\";\r\n    // –î–æ–±–∞–≤–ª—è–µ–º/–∑–∞–º–µ–Ω—è–µ–º favicon\r\n    const faviconId = \"govchat-favicon\";\r\n    let link = document.querySelector(`link[rel=\"icon\"]#${faviconId}`);\r\n    if (!link) {\r\n      link = document.createElement(\"link\");\r\n      link.rel = \"icon\";\r\n      link.id = faviconId;\r\n      document.head.appendChild(link);\r\n    }\r\n    link.type = \"image/svg+xml\";\r\n    link.href =\r\n      'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><text y=\"52\" font-size=\"52\">ü¶Ü</text></svg>';\r\n    return () => {\r\n      // –ù–µ —É–¥–∞–ª—è–µ–º favicon –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n    };\r\n  }, []);\r\n\r\n  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞\r\n  useEffect(() => {\r\n    if (fileToSend) {\r\n      if (fileToSend.type.startsWith(\"image/\") || fileToSend.type.startsWith(\"video/\")) {\r\n        const url = URL.createObjectURL(fileToSend);\r\n        setFilePreviewUrl(url);\r\n        return () => URL.revokeObjectURL(url);\r\n      } else {\r\n        setFilePreviewUrl(null);\r\n      }\r\n    } else {\r\n      setFilePreviewUrl(null);\r\n    }\r\n  }, [fileToSend]);\r\n\r\n  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã –≤ –ø—Ä–æ—Ñ–∏–ª—å\r\n  const handleThemeSelect = async (t) => {\r\n    setTheme(t);\r\n    setShowCustomizer(false);\r\n    try {\r\n      await axios.patch(`${API_URL}/profile`, { theme: { pageBg: t.pageBg, chatBg: t.chatBg } }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setUserProfile((u) => u ? { ...u, theme: { pageBg: t.pageBg, chatBg: t.chatBg } } : u);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ —Å—Ç–∏–ª—è–º\r\n  const themedPageStyle = { ...chatStyles.page, background: theme.pageBg };\r\n  const themedChatBoxStyle = { ...chatStyles.chatBox, background: theme.chatBg };\r\n\r\n  // –í—Å—Ç–∞–≤–ª—è–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –≤ <head>\r\n  useEffect(() => {\r\n    const styleId = \"govchat-responsive-style\";\r\n    if (!document.getElementById(styleId)) {\r\n      const style = document.createElement(\"style\");\r\n      style.id = styleId;\r\n      style.innerHTML = chatStyles.responsive;\r\n      document.head.appendChild(style);\r\n    }\r\n    \r\n    // –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ overflow —Å—Ç–∏–ª–∏ —Å body –∏ html\r\n    document.documentElement.style.overflow = '';\r\n    document.body.style.overflow = '';\r\n  }, []);\r\n\r\n  // –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 700);\r\n  useEffect(() => {\r\n    const onResize = () => setIsMobile(window.innerWidth <= 700);\r\n    window.addEventListener(\"resize\", onResize);\r\n    return () => window.removeEventListener(\"resize\", onResize);\r\n  }, []);\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π ---\r\n  useEffect(() => {\r\n    if (!socketRef.current) return;\r\n\r\n    const onConnect = () => {\r\n      setMySocketId(socketRef.current.id);\r\n      console.log(\"Connected with socket ID:\", socketRef.current.id);\r\n      // –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–æ–≤ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏\r\n      socketRef.current.emit(\"get-active-calls\");\r\n    };\r\n\r\n    const onIncoming = ({ from, channel, initiatorSocketId }) => {\r\n      console.log(\"Incoming call from:\", from, \"in channel:\", channel, \"my channel:\", selectedChannel);\r\n      if (channel === selectedChannel && !videoCall.active) {\r\n        console.log(\"Showing incoming call notification\");\r\n        setActiveCallInChannel({ from, channel, initiatorSocketId });\r\n      }\r\n      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ\r\n      setActiveCallsInChannels(prev => ({ ...prev, [channel]: true }));\r\n\r\n      // –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–µ\r\n      showNotification(\"–ì–æ–í–ß–∞—Ç\", `${from} –Ω–∞—á–∞–ª –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫`);\r\n    };\r\n\r\n    const onParticipants = async ({ participants }) => {\r\n      console.log(\"Participants in call:\", participants);\r\n      setVideoConnecting(false);\r\n      \r\n      // –ñ–¥–µ–º –ø–æ–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω\r\n      const waitForLocalStream = () => {\r\n        return new Promise((resolve) => {\r\n          const checkStream = () => {\r\n            if (videoStreams.local) {\r\n              resolve(videoStreams.local);\r\n            } else {\r\n              setTimeout(checkStream, 100);\r\n            }\r\n          };\r\n          checkStream();\r\n        });\r\n      };\r\n      \r\n      const localStream = await waitForLocalStream();\r\n      \r\n      // –°–æ–∑–¥–∞—Ç—å PeerConnection –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π\r\n      for (const peerId of participants) {\r\n        if (peerId !== socketRef.current.id && !videoPeersRef.current[peerId]) {\r\n          console.log(\"Creating peer for existing participant:\", peerId);\r\n          // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º peer connections\r\n          await new Promise(resolve => setTimeout(resolve, 500));\r\n          await createPeer(peerId, true, localStream);\r\n        }\r\n      }\r\n    };\r\n\r\n    const onJoined = async ({ user, socketId }) => {\r\n      console.log(\"User joined call:\", user, socketId);\r\n      if (socketId !== socketRef.current.id && !videoPeersRef.current[socketId]) {\r\n        console.log(\"Creating peer for new participant:\", socketId);\r\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫\r\n        const localStream = videoStreams.local;\r\n        if (localStream) {\r\n          // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\r\n          await new Promise(resolve => setTimeout(resolve, 1000));\r\n          await createPeer(socketId, false, localStream);\r\n        } else {\r\n          console.warn(\"No local stream available for new participant\");\r\n        }\r\n      }\r\n    };\r\n\r\n    const onLeft = ({ user, socketId }) => {\r\n      console.log(\"User left call:\", user, socketId);\r\n      removePeer(socketId);\r\n    };\r\n\r\n    const onSignal = async ({ from, data }) => {\r\n      console.log(\"Received signal from:\", from, \"type:\", data.type || 'candidate');\r\n      \r\n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º ref –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è peer\r\n      let pc = videoPeersRef.current[from];\r\n      \r\n      if (!pc && (data.type === \"offer\" || data.type === \"answer\")) {\r\n        console.log(\"Creating peer for signal from:\", from);\r\n        pc = await createPeer(from, false);\r\n      }\r\n      \r\n      if (!pc) {\r\n        console.error(\"No peer connection for:\", from);\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        if (data.type === \"offer\") {\r\n          console.log(\"Processing offer from:\", from);\r\n          await pc.setRemoteDescription(new RTCSessionDescription(data));\r\n          const answer = await pc.createAnswer({\r\n            offerToReceiveAudio: true,\r\n            offerToReceiveVideo: true,\r\n            voiceActivityDetection: false\r\n          });\r\n          await pc.setLocalDescription(answer);\r\n          \r\n          console.log(\"Sending answer to:\", from);\r\n          socketRef.current.emit(\"video-signal\", { \r\n            channel: selectedChannel, \r\n            to: from, \r\n            data: answer \r\n          });\r\n        } else if (data.type === \"answer\") {\r\n          console.log(\"Processing answer from:\", from);\r\n          await pc.setRemoteDescription(new RTCSessionDescription(data));\r\n        } else if (data.candidate) {\r\n          console.log(\"Adding ICE candidate from:\", from, \"type:\", data.candidate.type);\r\n          try {\r\n            await pc.addIceCandidate(new RTCIceCandidate(data.candidate));\r\n          } catch (error) {\r\n            console.warn(\"Error adding ICE candidate:\", error);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error handling signal from\", from, \":\", error);\r\n        setVideoError(\"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è\");\r\n      }\r\n    };\r\n\r\n    const onEnded = ({ by, channel }) => {\r\n      console.log(\"Call ended by server, ended by:\", by, \"in channel:\", channel);\r\n      endVideoCall();\r\n      setActiveCallInChannel(null);\r\n      // –£–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –≤ –∫–∞–Ω–∞–ª–µ\r\n      setActiveCallsInChannels(prev => {\r\n        const { [channel]: removed, ...rest } = prev;\r\n        return rest;\r\n      });\r\n    };\r\n\r\n    const onActiveCallsUpdate = ({ activeCalls }) => {\r\n      setActiveCallsInChannels(activeCalls);\r\n    };\r\n\r\n    socketRef.current.on(\"connect\", onConnect);\r\n    socketRef.current.on(\"video-call-incoming\", onIncoming);\r\n    socketRef.current.on(\"video-call-participants\", onParticipants);\r\n    socketRef.current.on(\"video-call-joined\", onJoined);\r\n    socketRef.current.on(\"video-call-left\", onLeft);\r\n    socketRef.current.on(\"video-signal\", onSignal);\r\n    socketRef.current.on(\"video-call-ended\", onEnded);\r\n    socketRef.current.on(\"active-calls-update\", onActiveCallsUpdate);\r\n\r\n    return () => {\r\n      socketRef.current?.off(\"connect\", onConnect);\r\n      socketRef.current?.off(\"video-call-incoming\", onIncoming);\r\n      socketRef.current?.off(\"video-call-participants\", onParticipants);\r\n      socketRef.current?.off(\"video-call-joined\", onJoined);\r\n      socketRef.current?.off(\"video-call-left\", onLeft);\r\n      socketRef.current?.off(\"video-signal\", onSignal);\r\n      socketRef.current?.off(\"video-call-ended\", onEnded);\r\n      socketRef.current?.off(\"active-calls-update\", onActiveCallsUpdate);\r\n    };\r\n  }, [selectedChannel, username, videoStreams.local, videoCall.active]);\r\n\r\n  // --- –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ ---\r\n  useEffect(() => {\r\n    // –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ\r\n    if (localVideoRef.current && videoStreams.local) {\r\n      localVideoRef.current.srcObject = videoStreams.local;\r\n      console.log(\"Set local video stream\");\r\n    }\r\n    \r\n    // –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–æ\r\n    Object.entries(videoStreams.remotes || {}).forEach(([peerId, stream]) => {\r\n      if (remoteVideosRef.current[peerId] && stream) {\r\n        remoteVideosRef.current[peerId].srcObject = stream;\r\n        console.log(\"Set remote video stream for:\", peerId);\r\n      }\r\n    });\r\n  }, [videoStreams, videoCall.active]);\r\n\r\n  // --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ ---\r\n  const videoCallModal = videoCall.active && (\r\n    <div style={chatStyles.videoCallModal} onClick={(e) => e.stopPropagation()}>\r\n      <div\r\n        style={{\r\n          ...chatStyles.videoCallBox,\r\n          width: isMobile ? \"96vw\" : 520,\r\n          minHeight: isMobile ? 280 : 360,\r\n          padding: isMobile ? \"12px 8px 12px 8px\" : \"20px 20px 16px 20px\",\r\n          position: \"relative\"\r\n        }}\r\n        onClick={e => e.stopPropagation()}\r\n      >\r\n        <div\r\n          style={{\r\n            fontWeight: 700,\r\n            fontSize: 18,\r\n            color: \"#00c3ff\",\r\n            marginBottom: 16,\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          üìπ –í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫: {channels.find((ch) => ch._id === selectedChannel)?.name || \"\"}\r\n        </div>\r\n        \r\n        <div\r\n          style={{\r\n            position: \"relative\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            minHeight: isMobile ? 180 : 240,\r\n            background: \"#000\",\r\n            borderRadius: 12,\r\n            overflow: \"hidden\",\r\n            marginBottom: 16,\r\n          }}\r\n        >\r\n          {/* –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–æ */}\r\n          {Object.entries(videoStreams.remotes || {}).length > 0 ? (\r\n            <div style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: Object.keys(videoStreams.remotes || {}).length === 1 ? \"1fr\" : \"1fr 1fr\",\r\n              gap: 8,\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              minHeight: isMobile ? 180 : 240,\r\n            }}>\r\n              {Object.entries(videoStreams.remotes || {}).map(([peerId]) => (\r\n                <video\r\n                  key={peerId}\r\n                  ref={el => {\r\n                    if (el) remoteVideosRef.current[peerId] = el;\r\n                  }}\r\n                  autoPlay\r\n                  playsInline\r\n                  style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    objectFit: \"cover\",\r\n                    background: \"#000\",\r\n                    borderRadius: 8,\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div style={{\r\n              color: \"#b2bec3\",\r\n              fontSize: 16,\r\n              textAlign: \"center\",\r\n              padding: 20,\r\n            }}>\r\n              {videoConnecting ? \"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...\" : \"–û–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤...\"}\r\n            </div>\r\n          )}\r\n          \r\n          {/* –ú–æ–µ –≤–∏–¥–µ–æ - –º–∞–ª–µ–Ω—å–∫–æ–µ –≤ —É–≥–ª—É */}\r\n          {videoStreams.local && (\r\n            <div style={{\r\n              position: \"absolute\",\r\n              bottom: 12,\r\n              right: 12,\r\n              width: isMobile ? 80 : 120,\r\n              height: isMobile ? 60 : 90,\r\n              borderRadius: 8,\r\n              border: \"2px solid #00c3ff\",\r\n              background: \"#000\",\r\n              zIndex: 10,\r\n              overflow: \"hidden\",\r\n            }}>\r\n              {cameraEnabled ? (\r\n                <video\r\n                  ref={localVideoRef}\r\n                  autoPlay\r\n                  muted\r\n                  playsInline\r\n                  style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    objectFit: \"cover\",\r\n                  }}\r\n                />\r\n              ) : (\r\n                <div style={{\r\n                  width: \"100%\",\r\n                  height: \"100%\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  background: \"#333\",\r\n                  color: \"#fff\",\r\n                  fontSize: isMobile ? 20 : 24,\r\n                }}>\r\n                  üì∑\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div style={{\r\n          ...chatStyles.videoCallControls,\r\n          gap: 12,\r\n          flexWrap: \"wrap\",\r\n          justifyContent: \"center\",\r\n        }}>\r\n          {/* –ö–Ω–æ–ø–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ */}\r\n          <button\r\n            style={{\r\n              ...chatStyles.videoCallControlBtn,\r\n              background: micEnabled ? \"#35363a\" : \"#ff7675\",\r\n              color: \"#fff\",\r\n            }}\r\n            onClick={toggleMicrophone}\r\n            title={micEnabled ? \"–í—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω\" : \"–í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω\"}\r\n          >\r\n            {micEnabled ? \"üé§\" : \"üîá\"}\r\n          </button>\r\n          \r\n          {/* –ö–Ω–æ–ø–∫–∞ –∫–∞–º–µ—Ä—ã */}\r\n          <button\r\n            style={{\r\n              ...chatStyles.videoCallControlBtn,\r\n              background: cameraEnabled ? \"#35363a\" : \"#ff7675\",\r\n              color: \"#fff\",\r\n            }}\r\n            onClick={toggleCamera}\r\n            title={cameraEnabled ? \"–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É\" : \"–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É\"}\r\n          >\r\n            {cameraEnabled ? \"üìπ\" : \"üì∑\"}\r\n          </button>\r\n          \r\n          {/* –ö–Ω–æ–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è */}\r\n          <button\r\n            style={chatStyles.videoCallEndBtn}\r\n            onClick={leaveVideoCall}\r\n          >\r\n            –ó–∞–≤–µ—Ä—à–∏—Ç—å\r\n          </button>\r\n        </div>\r\n        \r\n        {videoError && (\r\n          <div\r\n            style={{\r\n              color: \"#ff7675\",\r\n              marginTop: 12,\r\n              fontWeight: 500,\r\n              textAlign: \"center\",\r\n            }}\r\n          >\r\n            {videoError}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  //  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—Ö–æ–¥—è—â–µ–º –∑–≤–æ–Ω–∫–µ\r\n  const videoCallBanner = activeCallInChannel && selectedChannel === activeCallInChannel.channel && !videoCall.active && (\r\n    <div style={chatStyles.videoCallBanner}>\r\n      <div style={chatStyles.videoCallBannerText}>\r\n        <span style={chatStyles.videoCallBannerIcon}>üìπ</span>\r\n        {isMobile ? (\r\n          <span><strong>{activeCallInChannel.from}</strong> –Ω–∞—á–∞–ª –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫</span>\r\n        ) : (\r\n          <span><strong>{activeCallInChannel.from}</strong> –Ω–∞—á–∞–ª –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫ –≤ —ç—Ç–æ–º –∫–∞–Ω–∞–ª–µ</span>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <button\r\n          style={chatStyles.videoCallBannerBtn}\r\n          onClick={acceptVideoCall}\r\n          disabled={videoConnecting}\r\n        >\r\n          {videoConnecting ? \"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...\" : \"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è\"}\r\n        </button>\r\n        <button\r\n          style={chatStyles.videoCallBannerDeclineBtn}\r\n          onClick={declineVideoCall}\r\n        >\r\n          –°–∫—Ä—ã—Ç—å\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  if (!token) {\r\n    return (\r\n      <div style={chatStyles.page}>\r\n        <div style={chatStyles.authContainer}>\r\n          <div style={chatStyles.authTitle}>\r\n            {authMode === \"register\" ? \"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\" : \"–í—Ö–æ–¥\"}\r\n          </div>\r\n          {error && <div style={chatStyles.error}>{error}</div>}\r\n          <form\r\n            onSubmit={authMode === \"register\" ? handleRegister : handleLogin}\r\n            style={{ width: \"100%\" }}\r\n          >\r\n            <input\r\n              style={chatStyles.authInput}\r\n              placeholder=\"–ò–º—è\"\r\n              value={username}\r\n              onChange={e => setUsername(e.target.value)}\r\n              required\r\n              autoComplete=\"username\"\r\n            />\r\n            <input\r\n              style={chatStyles.authInput}\r\n              placeholder=\"–ü–∞—Ä–æ–ª—å\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={e => setPassword(e.target.value)}\r\n              required\r\n              autoComplete=\"current-password\"\r\n            />\r\n            <button\r\n              style={chatStyles.authBtn}\r\n              type=\"submit\"\r\n              disabled={registering}\r\n            >\r\n              {authMode === \"register\" ? \"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è\" : \"–í–æ–π—Ç–∏\"}\r\n            </button>\r\n          </form>\r\n          <button\r\n            style={chatStyles.switchBtn}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              setAuthMode(authMode === \"register\" ? \"login\" : \"register\");\r\n              setError(\"\");\r\n              setUsername(\"\");\r\n              setPassword(\"\");\r\n            }}\r\n          >\r\n            {authMode === \"register\" ? \"–í–æ–π—Ç–∏\" : \"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- –ú–æ–±–∏–ª—å–Ω—ã–π header ---\r\n  const mobileHeader = (\r\n    <div style={chatStyles.mobileHeader} className=\"govchat-mobile-header\">\r\n      <button\r\n        style={chatStyles.mobileMenuBtn}\r\n        onClick={() => setMobileMenuOpen(true)}\r\n        aria-label=\"–ú–µ–Ω—é\"\r\n      >\r\n        <span style={{ fontSize: 28 }}>‚ò∞</span>\r\n      </button>\r\n      <div style={{\r\n        fontWeight: 700,\r\n        fontSize: 20,\r\n        color: \"#00c3ff\",\r\n        letterSpacing: 1,\r\n        textShadow: \"0 2px 8px #0002\",\r\n        margin: \"0 auto\",\r\n      }}>\r\n        –ì–æ–í–ß–∞—Ç 2.1 Beta\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // --- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é ---\r\n  const mobileMenu = (\r\n    <div style={chatStyles.mobileMenuOverlay} onClick={() => setMobileMenuOpen(false)}>\r\n      <div\r\n        style={chatStyles.mobileMenu}\r\n        onClick={e => e.stopPropagation()}\r\n      >\r\n        <button\r\n          style={chatStyles.mobileMenuCloseBtn}\r\n          onClick={() => setMobileMenuOpen(false)}\r\n          aria-label=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n        >‚úï</button>\r\n        <div style={chatStyles.mobileMenuTitle}>–ö–∞–Ω–∞–ª—ã</div>\r\n        <div style={chatStyles.mobileMenuChannels}>\r\n          {channels.length === 0 ? (\r\n            <div style={{ color: \"#b2bec3\", marginBottom: 8 }}>\r\n              –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤\r\n            </div>\r\n          ) : (\r\n            channels.map((ch) => (\r\n              <div\r\n                key={ch._id}\r\n                style={{\r\n                  ...chatStyles.channelItem(selectedChannel === ch._id),\r\n                  position: \"relative\", // –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞\r\n                }}\r\n                onClick={() => {\r\n                  setSelectedChannel(ch._id);\r\n                  setMobileMenuOpen(false);\r\n                }}\r\n              >\r\n                {ch.name}\r\n                {/* –ö—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ */}\r\n                {activeCallsInChannels[ch._id] && (\r\n                  <div\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      top: 8,\r\n                      right: 8,\r\n                      width: 8,\r\n                      height: 8,\r\n                      borderRadius: \"50%\",\r\n                      background: \"#ff4757\",\r\n                      border: \"2px solid #fff\",\r\n                      boxShadow: \"0 0 6px #ff4757\",\r\n                      animation: \"pulse 2s infinite\",\r\n                    }}\r\n                    title=\"–ê–∫—Ç–∏–≤–Ω—ã–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫\"\r\n                  />\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n          <button\r\n            style={chatStyles.createBtn}\r\n            onClick={() => setShowCreate((v) => !v)}\r\n          >\r\n            {showCreate ? \"–°–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ\" : \"–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª\"}\r\n          </button>\r\n          {showCreate && (\r\n            <div style={{ marginTop: 10 }}>\r\n              <input\r\n                style={chatStyles.input}\r\n                placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞\"\r\n                value={newChannel}\r\n                onChange={e => setNewChannel(e.target.value)}\r\n              />\r\n              <button style={chatStyles.createBtn} onClick={handleCreateChannel}>\r\n                –°–æ–∑–¥–∞—Ç—å\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* –ö–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –ø–æ—Å–ª–µ —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ */}\r\n        <div\r\n          className=\"govchat-mobile-profile-actions\"\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            gap: 18,\r\n            margin: \"18px 0 16px 0\",\r\n          }}\r\n        >\r\n          {/* –ü—Ä–æ—Ñ–∏–ª—å */}\r\n          <button\r\n            style={{\r\n              ...chatStyles.profileBtn,\r\n              width: 48,\r\n              height: 48,\r\n              fontSize: 24,\r\n              flexDirection: \"column\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\"\r\n            }}\r\n            onClick={() => {\r\n              setShowProfile(true);\r\n              setMobileMenuOpen(false);\r\n              setEditMode(false);\r\n            }}\r\n            title=\"–ü—Ä–æ—Ñ–∏–ª—å\"\r\n          >\r\n            <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\">\r\n              <circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"#00c3ff\" />\r\n              <circle cx=\"13\" cy=\"10\" r=\"4\" fill=\"#fff\" />\r\n              <ellipse cx=\"13\" cy=\"19\" rx=\"7\" ry=\"4\" fill=\"#fff\" />\r\n            </svg>\r\n          </button>\r\n          {/* –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è */}\r\n          <button\r\n            style={{\r\n              ...chatStyles.profileBtn,\r\n              width: 48,\r\n              height: 48,\r\n              fontSize: 24,\r\n              flexDirection: \"column\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              background: \"none\",\r\n              border: \"none\",\r\n              marginRight: 0,\r\n              marginLeft: 0,\r\n              boxShadow: \"0 2px 8px #00c3ff33\"\r\n            }}\r\n            onClick={() => {\r\n              setShowCustomizer(true);\r\n              setMobileMenuOpen(false);\r\n            }}\r\n            title=\"–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è\"\r\n          >\r\n            <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\">\r\n              <circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"#ffb347\" />\r\n              <path d=\"M7 19c0-2 2-4 4-4s4 2 4 4\" stroke=\"#fff\" strokeWidth=\"2\" />\r\n              <rect x=\"10\" y=\"6\" width=\"6\" height=\"8\" rx=\"2\" fill=\"#fff\" stroke=\"#ffb347\" strokeWidth=\"1.5\"/>\r\n              <rect x=\"8\" y=\"14\" width=\"10\" height=\"4\" rx=\"2\" fill=\"#ffb347\" stroke=\"#fff\" strokeWidth=\"1.5\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div style={chatStyles.mobileMenuFooter}>\r\n          {/* –ö–Ω–æ–ø–∫–∞ \"–í—ã–π—Ç–∏\" —É–±—Ä–∞–Ω–∞ –∏–∑ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // --- –î–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –º–µ–Ω—é ---\r\n  const desktopMenu = (\r\n    <div style={chatStyles.sidebar} className=\"govchat-sidebar\">\r\n      <div style={chatStyles.sidebarTitle}>–ì–æ–í–ß–∞—Ç 2.1 Beta</div>\r\n      <div style={chatStyles.channelList} className=\"govchat-channel-list\">\r\n        <div style={{ fontWeight: 600, color: \"#fff\", marginBottom: 10 }}>–ö–∞–Ω–∞–ª—ã</div>\r\n        {channels.length === 0 ? (\r\n          <div style={{ color: \"#b2bec3\", marginBottom: 8 }}>\r\n            –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤\r\n          </div>\r\n        ) : (\r\n          channels.map((ch) => (\r\n            <div\r\n              key={ch._id}\r\n              style={{\r\n                ...chatStyles.channelItem(selectedChannel === ch._id),\r\n                position: \"relative\", // –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞\r\n              }}\r\n              onClick={() => setSelectedChannel(ch._id)}\r\n            >\r\n              {ch.name}\r\n              {/* –ö—Ä–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ */}\r\n              {activeCallsInChannels[ch._id] && (\r\n                <div\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    top: \"50%\",\r\n                    right: 12,\r\n                    transform: \"translateY(-50%)\",\r\n                    width: 8,\r\n                    height: 8,\r\n                    borderRadius: \"50%\",\r\n                    background: \"#ff4757\",\r\n                    border: \"2px solid #fff\",\r\n                    boxShadow: \"0 0 6px #ff4757\",\r\n                    animation: \"pulse 2s infinite\",\r\n                  }}\r\n                  title=\"–ê–∫—Ç–∏–≤–Ω—ã–π –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫\"\r\n                />\r\n              )}\r\n            </div>\r\n          ))\r\n        )}\r\n        <button\r\n          style={chatStyles.createBtn}\r\n          onClick={() => setShowCreate((v) => !v)}\r\n        >\r\n          {showCreate ? \"–°–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ\" : \"–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª\"}\r\n        </button>\r\n        {showCreate && (\r\n          <div style={{ marginTop: 10 }}>\r\n            <input\r\n              style={chatStyles.input}\r\n              placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞\"\r\n              value={newChannel}\r\n              onChange={e => setNewChannel(e.target.value)}\r\n            />\r\n            <button style={chatStyles.createBtn} onClick={handleCreateChannel}>\r\n              –°–æ–∑–¥–∞—Ç—å\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* --- –ö–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ --- */}\r\n      <div style={{\r\n        ...chatStyles.profileBtnBox,\r\n        left: \"auto\",\r\n        right: 178,\r\n        bottom: 70,\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        gap: 10,\r\n        zIndex: 10\r\n      }}>\r\n        {/* –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */}\r\n        <button\r\n          style={chatStyles.profileBtn}\r\n          onClick={() => {\r\n            setShowProfile(v => !v);\r\n            setEditMode(false);\r\n          }}\r\n          title=\"–ü—Ä–æ—Ñ–∏–ª—å\"\r\n        >\r\n          <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\">\r\n            <circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"#00c3ff\" />\r\n            <circle cx=\"13\" cy=\"10\" r=\"4\" fill=\"#fff\" />\r\n            <ellipse cx=\"13\" cy=\"19\" rx=\"7\" ry=\"4\" fill=\"#fff\" />\r\n          </svg>\r\n        </button>\r\n        {/* –ö–Ω–æ–ø–∫–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ */}\r\n        <button\r\n          style={{\r\n            ...chatStyles.profileBtn,\r\n            background: \"none\",\r\n            border: \"none\",\r\n            marginRight: 0,\r\n            marginLeft: 0,\r\n            boxShadow: \"0 2px 8px #00c3ff33\"\r\n          }}\r\n          onClick={() => setShowCustomizer(v => !v)}\r\n          title=\"–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è\"\r\n        >\r\n          <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\">\r\n            <circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"#ffb347\" />\r\n            <path d=\"M7 19c0-2 2-4 4-4s4 2 4 4\" stroke=\"#fff\" strokeWidth=\"2\" />\r\n            <rect x=\"10\" y=\"6\" width=\"6\" height=\"8\" rx=\"2\" fill=\"#fff\" stroke=\"#ffb347\" strokeWidth=\"1.5\"/>\r\n            <rect x=\"8\" y=\"14\" width=\"10\" height=\"4\" rx=\"2\" fill=\"#ffb347\" stroke=\"#fff\" strokeWidth=\"1.5\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div style={themedPageStyle} className=\"govchat-page\">\r\n      {/* –ú–æ–±–∏–ª—å–Ω—ã–π header */}\r\n      {isMobile && mobileHeader}\r\n      {/* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */}\r\n      {isMobile && mobileMenuOpen && mobileMenu}\r\n      {/* –°–∞–π–¥–±–∞—Ä —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */}\r\n      {!isMobile && desktopMenu}\r\n      \r\n      {/* –ß–∞—Ç –≤—Å–µ–≥–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –Ω–æ —Å –æ—Ç—Å—Ç—É–ø–æ–º —Å–≤–µ—Ä—Ö—É –Ω–∞ –º–æ–±–∏–ª–µ */}\r\n      <div\r\n        style={{\r\n          ...chatStyles.chatContainer,\r\n          ...(isMobile\r\n            ? {\r\n                paddingTop: 40, // —É–º–µ–Ω—å—à–µ–Ω–æ —Å 64 –¥–æ 40\r\n                height: \"calc(100vh - 40px)\", // —É–º–µ–Ω—å—à–∏—Ç—å –≤—ã—Å–æ—Ç—É —á–∞—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º\r\n                maxHeight: \"calc(100vh - 40px)\",\r\n              }\r\n            : {}),\r\n        }}\r\n        className=\"govchat-chat-container\"\r\n      >\r\n        <div style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          width: \"100%\",\r\n          marginBottom: 10,\r\n          minHeight: 32,\r\n          marginTop: isMobile ? 18 : 0 // –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö\r\n        }}>\r\n          <div style={chatStyles.chatTitle}>–ß–∞—Ç</div>\r\n          {/* –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ —Å–ø—Ä–∞–≤–∞ –æ—Ç \"–ß–∞—Ç\" */}\r\n          <div style={{ marginLeft: \"auto\", marginRight: 8 }}>\r\n            {videoCallButton}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–µ */}\r\n        {videoCallBanner}\r\n        \r\n        <div\r\n          className=\"govchat-chat-box\"\r\n          style={themedChatBoxStyle}\r\n        >\r\n          {messages.map((msg) => {\r\n            const isMine = msg.sender === username;\r\n            // –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏\r\n            const time = msg.createdAt ? new Date(msg.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : '';\r\n            return (\r\n              <div key={msg._id} style={chatStyles.messageRow(isMine)}>\r\n                <div style={chatStyles.message(isMine)}>\r\n                  {/* –¢–æ–ª—å–∫–æ –¥–ª—è —á—É–∂–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è */}\r\n                  {!isMine && (\r\n                    <span style={chatStyles.messageSender}>\r\n                      {msg.sender}:\r\n                    </span>\r\n                  )}\r\n                  {msg.text}\r\n                  {/* –ü—Ä–µ–≤—å—é —Ñ–∞–π–ª–æ–≤ */}\r\n                  {msg.fileUrl && msg.fileType && (\r\n                    <span style={{ display: \"block\", marginTop: 8 }}>\r\n                      {msg.fileType.startsWith(\"audio/\") ? (\r\n                        <audio src={msg.fileUrl} controls style={{ maxWidth: 220, borderRadius: 8, background: \"#232526\" }} />\r\n                      ) : msg.fileType.startsWith(\"image/\") ? (\r\n                        <img\r\n                          src={msg.fileUrl}\r\n                          alt={msg.originalName || \"image\"}\r\n                          style={{ maxWidth: 120, maxHeight: 120, borderRadius: 8, cursor: \"pointer\", boxShadow: \"0 2px 8px #00c3ff33\" }}\r\n                          onClick={() => setModalMedia({ type: \"image\", url: msg.fileUrl, name: msg.originalName })}\r\n                        />\r\n                      ) : msg.fileType.startsWith(\"video/\") ? (\r\n                        <video\r\n                          src={msg.fileUrl}\r\n                          controls={false}\r\n                          style={{ maxWidth: 120, maxHeight: 120, borderRadius: 8, cursor: \"pointer\", boxShadow: \"0 2px 8px #00c3ff33\" }}\r\n                          onClick={() => setModalMedia({ type: \"video\", url: msg.fileUrl, name: msg.originalName })}\r\n                        >\r\n                          –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.\r\n                        </video>\r\n                      ) : (\r\n                        // –ü—Ä–µ–≤—å—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\r\n                        <span\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 8,\r\n                            cursor: \"pointer\",\r\n                            background: \"#232526\",\r\n                            borderRadius: 8,\r\n                            padding: \"8px 12px\",\r\n                            boxShadow: \"0 2px 8px #00c3ff22\",\r\n                            maxWidth: 220,\r\n                            minWidth: 0,\r\n                            color: \"#fff\"\r\n                          }}\r\n                          onClick={() => {\r\n                            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞\r\n                            const ext = (msg.originalName || \"\").split('.').pop().toLowerCase();\r\n                            if (msg.fileType === \"application/pdf\") {\r\n                              setModalMedia({ type: \"pdf\", url: msg.fileUrl, name: msg.originalName });\r\n                            } else {\r\n                              setModalMedia({ type: \"doc\", url: msg.fileUrl, name: msg.originalName, ext });\r\n                            }\r\n                          }}\r\n                          title={msg.originalName}\r\n                        >\r\n                          {/* –ò–∫–æ–Ω–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é */}\r\n                          <span style={{ fontSize: 28 }}>\r\n                            {(() => {\r\n                              const ext = (msg.originalName || \"\").split('.').pop().toLowerCase();\r\n                              if (ext === \"pdf\") return \"üìÑ\";\r\n                              if ([\"doc\", \"docx\"].includes(ext)) return \"üìù\";\r\n                              if ([\"xls\", \"xlsx\"].includes(ext)) return \"üìä\";\r\n                              if ([\"ppt\", \"pptx\"].includes(ext)) return \"üìà\";\r\n                              if ([\"txt\", \"rtf\"].includes(ext)) return \"üìÉ\";\r\n                              return \"üìÅ\";\r\n                            })()}\r\n                          </span>\r\n                          <span style={{\r\n                            fontSize: 14,\r\n                            color: \"#fff\",\r\n                            wordBreak: \"break-all\",\r\n                            flex: 1,\r\n                            minWidth: 0,\r\n                          }}>\r\n                            {msg.originalName}\r\n                          </span>\r\n                        </span>\r\n                      )}\r\n                      {/* –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∞—Ç—å —É–±—Ä–∞–Ω–∞ –æ—Ç—Å—é–¥–∞ */}\r\n                    </span>\r\n                  )}\r\n                  {/* –í—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥ —Ç–µ–∫—Å—Ç–æ–º, –º–µ–Ω—å—à–∏–º —à—Ä–∏—Ñ—Ç–æ–º */}\r\n                  <div style={{ color: \"#b2bec3\", fontSize: 11, marginTop: 4, textAlign: isMine ? \"right\" : \"left\" }}>\r\n                    {time}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        {/* typing –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π flex-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–¥ inputRow */}\r\n        <div style={{ minHeight: 22, display: \"flex\", alignItems: \"flex-end\", marginBottom: 2 }}>\r\n          {typing && (\r\n            <div style={{\r\n              ...chatStyles.typing,\r\n              margin: 0,\r\n              paddingLeft: 8,\r\n              paddingRight: 8,\r\n              background: \"none\",\r\n              borderRadius: 0,\r\n              position: \"relative\",\r\n              zIndex: 2,\r\n              width: \"fit-content\",\r\n              maxWidth: \"80%\",\r\n              alignSelf: \"flex-start\",\r\n              boxShadow: \"none\"\r\n            }}>\r\n              {typing}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* –ü—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Ç–µ–ø–µ—Ä—å –Ω–∞–¥ inputRow (–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º, –∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ) */}\r\n        {fileToSend && (\r\n          <div\r\n            style={{\r\n              ...(isMobile\r\n                ? {\r\n                    position: \"fixed\",\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 58,\r\n                    zIndex: 1002,\r\n                    background: \"#35363a\",\r\n                    borderRadius: \"12px 12px 0 0\",\r\n                    padding: \"6px 8px 6px 8px\", // —É–º–µ–Ω—å—à–∏–ª–∏ –ø–∞–¥–¥–∏–Ω–≥–∏\r\n                    maxWidth: \"100vw\",\r\n                    width: \"100vw\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 10, // —É–º–µ–Ω—å—à–∏–ª–∏ gap\r\n                    boxShadow: \"0 -2px 12px #0005\",\r\n                    justifyContent: \"flex-start\",\r\n                    minHeight: 44, // —É–º–µ–Ω—å—à–∏–ª–∏ –≤—ã—Å–æ—Ç—É\r\n                  }\r\n                : {\r\n                    margin: \"0 0 8px 0\",\r\n                    padding: \"6px 10px\",\r\n                    background: \"#35363a\",\r\n                    borderRadius: 8,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 10,\r\n                    maxWidth: 320,\r\n                  }),\r\n              position: isMobile ? \"fixed\" : undefined,\r\n            }}\r\n          >\r\n            {/* –ö–Ω–æ–ø–∫–∞ –∫—Ä–µ—Å—Ç–∏–∫–∞ –¥–ª—è –æ—Ç–º–µ–Ω—ã - –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —Å–ª–µ–≤–∞ */}\r\n            {isMobile && (\r\n              <button\r\n                style={{\r\n                  position: \"absolute\",\r\n                  left: 8,\r\n                  top: \"50%\",\r\n                  transform: \"translateY(-50%)\",\r\n                  background: \"none\",\r\n                  border: \"none\",\r\n                  color: \"#ff7675\",\r\n                  fontWeight: 700,\r\n                  fontSize: 22,\r\n                  cursor: \"pointer\",\r\n                  padding: 0,\r\n                  zIndex: 2,\r\n                }}\r\n                title=\"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª\"\r\n                onClick={() => {\r\n                  setFileToSend(null);\r\n                  setFilePreviewUrl(null);\r\n                  if (fileInputRefChat.current) fileInputRefChat.current.value = \"\";\r\n                }}\r\n              >\r\n                ‚úï\r\n              </button>\r\n            )}\r\n            {/* –°–¥–≤–∏–≥–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–ø—Ä–∞–≤–æ –µ—Å–ª–∏ –º–æ–±–∏–ª—å–Ω—ã–π */}\r\n            <div style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: 10,\r\n              width: \"100%\",\r\n              marginLeft: isMobile ? 36 : 0, // –æ—Ç—Å—Ç—É–ø –ø–æ–¥ –∫—Ä–µ—Å—Ç–∏–∫\r\n            }}>\r\n              {fileToSend.type.startsWith(\"image/\") && filePreviewUrl && (\r\n                <img\r\n                  src={filePreviewUrl}\r\n                  alt=\"preview\"\r\n                  style={{\r\n                    maxWidth: isMobile ? 56 : 48, // —É–º–µ–Ω—å—à–∏–ª–∏ —Ä–∞–∑–º–µ—Ä\r\n                    maxHeight: isMobile ? 56 : 48,\r\n                    borderRadius: 8,\r\n                    objectFit: \"cover\",\r\n                  }}\r\n                />\r\n              )}\r\n              {fileToSend.type.startsWith(\"video/\") && filePreviewUrl && (\r\n                <video\r\n                  src={filePreviewUrl}\r\n                  style={{\r\n                    maxWidth: isMobile ? 56 : 48,\r\n                    maxHeight: isMobile ? 56 : 48,\r\n                    borderRadius: 8,\r\n                    objectFit: \"cover\",\r\n                  }}\r\n                  controls\r\n                />\r\n              )}\r\n              {!fileToSend.type.startsWith(\"image/\") && !fileToSend.type.startsWith(\"video/\") && (\r\n                <span role=\"img\" aria-label=\"file\" style={{ fontSize: isMobile ? 26 : 22 }}>üìé</span>\r\n              )}\r\n              <span\r\n                style={{\r\n                  color: \"#fff\",\r\n                  fontSize: isMobile ? 14 : 14,\r\n                  wordBreak: \"break-all\",\r\n                  flex: 1,\r\n                  minWidth: 0,\r\n                }}\r\n              >\r\n                {fileToSend.name}\r\n              </span>\r\n              {/* –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –∫—Ä–µ—Å—Ç–∏–∫ —Å–ø—Ä–∞–≤–∞, –Ω–∞ –º–æ–±–∏–ª–µ —É–±–∏—Ä–∞–µ–º */}\r\n              {!isMobile && (\r\n                <button\r\n                  style={{\r\n                    marginLeft: \"auto\",\r\n                    background: \"none\",\r\n                    border: \"none\",\r\n                    color: \"#ff7675\",\r\n                    fontWeight: 700,\r\n                    fontSize: 16,\r\n                    cursor: \"pointer\",\r\n                    padding: 0,\r\n                  }}\r\n                  title=\"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª\"\r\n                  onClick={() => {\r\n                    setFileToSend(null);\r\n                    setFilePreviewUrl(null);\r\n                    if (fileInputRefChat.current) fileInputRefChat.current.value = \"\";\r\n                  }}\r\n                >\r\n                  ‚úï\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* --- –ë–ª–æ–∫ –ø—Ä–µ–¥–ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è --- */}\r\n        {audioBlob && audioUrl && (\r\n          isMobile ? (\r\n            <div style={{\r\n              position: \"fixed\",\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 58, // —á—É—Ç—å –≤—ã—à–µ inputRow (—É—á–∏—Ç—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É inputRow)\r\n              zIndex: 1001,\r\n              background: \"#35363a\",\r\n              borderRadius: \"12px 12px 0 0\",\r\n              padding: \"10px 12px 10px 12px\",\r\n              maxWidth: \"100vw\",\r\n              width: \"100vw\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: 10,\r\n              boxShadow: \"0 -2px 12px #0005\",\r\n              justifyContent: \"center\",\r\n              minHeight: 48\r\n            }}>\r\n              <audio src={audioUrl} controls style={{ height: 28, maxWidth: 180, borderRadius: 8, background: \"#232526\" }} />\r\n              <button\r\n                style={{\r\n                  background: \"#ff7675\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  borderRadius: 8,\r\n                  padding: \"6px 12px\",\r\n                  fontWeight: 600,\r\n                  fontSize: 15,\r\n                  cursor: \"pointer\",\r\n                  marginLeft: 4\r\n                }}\r\n                onClick={sendAudioMessage}\r\n                title=\"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ\"\r\n              >\r\n                ‚û§\r\n              </button>\r\n              <button\r\n                style={{\r\n                  background: \"none\",\r\n                  color: \"#ff7675\",\r\n                  border: \"none\",\r\n                  fontWeight: 700,\r\n                  fontSize: 20,\r\n                  cursor: \"pointer\"\r\n                }}\r\n                title=\"–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å\"\r\n                onClick={() => {\r\n                  setAudioBlob(null);\r\n                  setAudioUrl(null);\r\n                }}\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: 8,\r\n              margin: \"8px 0 0 0\",\r\n              background: \"#35363a\",\r\n              borderRadius: 8,\r\n              padding: \"8px 16px\",\r\n              maxWidth: 420\r\n            }}>\r\n              <audio src={audioUrl} controls style={{ height: 32, maxWidth: 220, borderRadius: 8 }} />\r\n              <button\r\n                style={{\r\n                  background: \"#ff7675\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  borderRadius: 8,\r\n                  padding: \"6px 14px\",\r\n                  fontWeight: 600,\r\n                  fontSize: 15,\r\n                  cursor: \"pointer\",\r\n                  marginLeft: 4\r\n                }}\r\n                onClick={sendAudioMessage}\r\n                title=\"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ\"\r\n              >\r\n                –û—Ç–ø—Ä–∞–≤–∏—Ç—å\r\n              </button>\r\n              <button\r\n                style={{\r\n                  background: \"none\",\r\n                  color: \"#ff7675\",\r\n                  border: \"none\",\r\n                  fontWeight: 700,\r\n                  fontSize: 18,\r\n                  cursor: \"pointer\"\r\n                }}\r\n                title=\"–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å\"\r\n                onClick={() => {\r\n                  setAudioBlob(null);\r\n                  setAudioUrl(null);\r\n                }}\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n          )\r\n        )}\r\n        <div\r\n          style={{\r\n            ...chatStyles.inputRow,\r\n            ...(isMobile ? { padding: \"6px 2vw 6px 2vw\" } : {}),\r\n          }}\r\n          className=\"govchat-input-row\"\r\n        >\r\n          {/* –ö–Ω–æ–ø–∫–∞ –≤–ª–æ–∂–µ–Ω–∏—è */}\r\n          <button\r\n            style={{\r\n              ...(attachBtnHover\r\n                ? { ...chatStyles.attachBtn, ...chatStyles.attachBtnHover }\r\n                : chatStyles.attachBtn),\r\n              ...(isMobile\r\n                ? {\r\n                    width: 34,\r\n                    height: 34,\r\n                    minWidth:  34,\r\n                    minHeight: 34,\r\n                    fontSize: 18,\r\n                    marginRight: 2,\r\n                  }\r\n                : {}),\r\n            }}\r\n            type=\"button\"\r\n            onClick={() => fileInputRefChat.current && fileInputRefChat.current.click()}\r\n            title=\"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª\"\r\n            tabIndex={-1}\r\n            onMouseEnter={() => setAttachBtnHover(true)}\r\n            onMouseLeave={() => setAttachBtnHover(false)}\r\n            disabled={false}\r\n          >\r\n            <span style={{\r\n              color: \"#222\",\r\n              fontSize: isMobile ? 18 : 22,\r\n              display: \"flex\",\r\n              alignItems: \"center\"\r\n            }}>üìé</span>\r\n          </button>\r\n          <input\r\n            ref={fileInputRefChat}\r\n            type=\"file\"\r\n            style={{ display: \"none\" }}\r\n            onChange={e => {\r\n              if (e.target.files?.[0]) setFileToSend(e.target.files[0]);\r\n            }}\r\n          />\r\n          {/* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ (–≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞ –º–æ–±–∏–ª–µ) */}\r\n          <button\r\n            style={{\r\n              ...chatStyles.attachBtn,\r\n              background: recording ? \"#ff7675\" : \"#fff\",\r\n              color: recording ? \"#fff\" : \"#222\",\r\n              marginRight: 2,\r\n              marginLeft: 0,\r\n              border: recording ? \"2px solid #ff7675\" : \"none\",\r\n              ...(isMobile\r\n                ? {\r\n                    width: 34,\r\n                    height: 34,\r\n                    minWidth: 34,\r\n                    minHeight: 34,\r\n                    fontSize: 18,\r\n                  }\r\n                : {}),\r\n            }}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              if (!recording) startRecording();\r\n              else stopRecording();\r\n            }}\r\n            title={recording ? \"–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å\" : \"–ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ\"}\r\n            disabled={fileToSend || audioBlob}\r\n          >\r\n            {recording ? (\r\n              <span style={{\r\n                color: \"#fff\",\r\n                fontSize: isMobile ? 18 : 22,\r\n                display: \"flex\",\r\n                alignItems: \"center\"\r\n              }}>‚è∫</span>\r\n            ) : (\r\n              <span style={{\r\n                color: \"#222\",\r\n                fontSize: isMobile ? 18 : 22,\r\n                display: \"flex\",\r\n                alignItems: \"center\"\r\n              }}>üé§</span>\r\n            )}\r\n          </button>\r\n          {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø–∏—Å–∏ */}\r\n          {recording && (\r\n            <span style={{\r\n              color: \"#ff7675\",\r\n              fontWeight: 600,\r\n              minWidth: isMobile ? 28 : 40,\r\n              fontSize: isMobile ? 13 : 16,\r\n            }}>\r\n              {`${Math.floor(recordTime / 60)\r\n                .toString()\r\n                .padStart(2, \"0\")}:${(recordTime % 60).toString().padStart(2, \"0\")}`}\r\n            </span>\r\n          )}\r\n          {/* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */}\r\n          <input\r\n            style={{\r\n              ...chatStyles.input,\r\n              ...(isMobile ? { fontSize: 14, padding: \"8px 10px\" } : {}),\r\n            }}\r\n            value={input}\r\n            onChange={e => setInput(e.target.value)}\r\n            onKeyDown={e => {\r\n              if (selectedChannel) {\r\n                socketRef.current.emit(\"typing\", { channel: selectedChannel });\r\n                if (e.key === \"Enter\") handleSend();\r\n              }\r\n            }}\r\n            disabled={!selectedChannel}\r\n            placeholder={\r\n              selectedChannel\r\n                ? \"–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...\"\r\n\r\n                : \"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª\"\r\n            }\r\n          />\r\n          {/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ */}\r\n          <button\r\n            style={{\r\n              ...(isMobile\r\n                ? {\r\n                    background: \"linear-gradient(90deg,#00c3ff,#3a7bd5)\",\r\n                    color: \"#fff\",\r\n                    border: \"none\",\r\n                    borderRadius: 8,\r\n                    width: 34,\r\n                    height: 34,\r\n                    minWidth: 34,\r\n                    minHeight: 34,\r\n                    padding: 0,\r\n                    fontSize: 18,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    boxShadow: \"0 2px 8px #00c3ff33\",\r\n                    marginLeft: 2,\r\n                  }\r\n                : chatStyles.sendBtn),\r\n            }}\r\n            onClick={handleSend}\r\n            disabled={!selectedChannel || (!input.trim() && !fileToSend)}\r\n            title=\"–û—Ç–ø—Ä–∞–≤–∏—Ç—å\"\r\n          >\r\n            {isMobile\r\n              ? <span style={{ fontSize: 18, color: \"#fff\" }}>‚û§</span>\r\n              : \"–û—Ç–ø—Ä–∞–≤–∏—Ç—å\"}\r\n          </button>\r\n        </div>\r\n        \r\n        {/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞ */}\r\n        {videoCallModal}\r\n        \r\n        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ */}\r\n        {modalMedia && (\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              left: 0,\r\n              top: 0,\r\n              width: \"100vw\",\r\n              height: \"100vh\",\r\n              background: \"rgba(0,0,0,0.7)\",\r\n              zIndex: 9999,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n            onClick={() => setModalMedia(null)}\r\n          >\r\n            <div\r\n              style={{\r\n                background: \"#232526\",\r\n                borderRadius: 12,\r\n                padding: 24,\r\n                maxWidth: \"90vw\",\r\n                maxHeight: \"90vh\",\r\n                boxShadow: \"0 4px 32px #000a\",\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                alignItems: \"center\",\r\n                position: \"relative\",\r\n              }}\r\n              onClick={e => e.stopPropagation()}\r\n            >\r\n              <button\r\n                style={{\r\n                  position: \"absolute\",\r\n                  top: 8,\r\n                  right: 12,\r\n                  background: \"none\",\r\n                  border: \"none\",\r\n                  color: \"#fff\",\r\n                  fontSize: 28,\r\n                  fontWeight: 700,\r\n                  cursor: \"pointer\",\r\n                  zIndex: 2,\r\n                }}\r\n                onClick={() => setModalMedia(null)}\r\n                title=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n              >‚úï</button>\r\n              {modalMedia.type === \"image\" ? (\r\n                <>\r\n                  <img\r\n                    src={modalMedia.url}\r\n                    alt={modalMedia.name}\r\n                    style={{ maxWidth: \"70vw\", maxHeight: \"70vh\", borderRadius: 10, marginBottom: 16 }}\r\n                  />\r\n                  {/* –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π —Å–∫–∞—á–∞—Ç—å */}\r\n                  {modalMedia.name && (\r\n                    <div style={{\r\n                      color: \"#fff\",\r\n                      fontSize: 16,\r\n                      marginBottom: 16,\r\n                      wordBreak: \"break-all\",\r\n                      textAlign: \"center\",\r\n                      maxWidth: \"60vw\",\r\n                    }}>\r\n                      {modalMedia.name}\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : modalMedia.type === \"video\" ? (\r\n                <video\r\n                  src={modalMedia.url}\r\n                  controls\r\n                  autoPlay\r\n                  style={{ maxWidth: \"70vw\", maxHeight: \"70vh\", borderRadius: 10, marginBottom: 16, background: \"#000\" }}\r\n                />\r\n              ) : modalMedia.type === \"pdf\" ? (\r\n                <iframe\r\n                  src={modalMedia.url}\r\n                  title={modalMedia.name}\r\n                  style={{\r\n                    width: \"70vw\",\r\n                    height: \"70vh\",\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    background: \"#fff\",\r\n                    marginBottom: 16,\r\n                  }}\r\n                />\r\n              ) : modalMedia.type === \"doc\" ? (\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  minHeight: 200,\r\n                  minWidth: 200,\r\n                  marginBottom: 16,\r\n                }}>\r\n                  <span style={{ fontSize: 64, marginBottom: 16 }}>\r\n                    {(() => {\r\n                      const ext = (modalMedia.ext || \"\").toLowerCase();\r\n                      if (ext === \"pdf\") return \"üìÑ\";\r\n                      if ([\"doc\", \"docx\"].includes(ext)) return \"üìù\";\r\n                      if ([\"xls\", \"xlsx\"].includes(ext)) return \"üìä\";\r\n                      if ([\"ppt\", \"pptx\"].includes(ext)) return \"üìà\";\r\n                      if ([\"txt\", \"rtf\"].includes(ext)) return \"üìÉ\";\r\n                      return \"üìÅ\";\r\n                    })()}\r\n                  </span>\r\n                  <div style={{ color: \"#fff\", fontSize: 18, marginBottom: 8, wordBreak: \"break-all\", textAlign: \"center\" }}>\r\n                    {modalMedia.name}\r\n                  </div>\r\n                  <div style={{ color: \"#b2bec3\", fontSize: 15, marginBottom: 18 }}>\r\n                    –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n              <button\r\n                style={{\r\n                  background: \"linear-gradient(90deg,#00c3ff,#3a7bd5)\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  borderRadius: 8,\r\n                  padding: \"10px 22px\",\r\n                  fontWeight: 600,\r\n                  fontSize: 15,\r\n                  cursor: \"pointer\",\r\n                  boxShadow: \"0 2px 8px #00c3ff33\",\r\n                  textDecoration: \"none\",\r\n                }}\r\n                onClick={async (e) => {\r\n                  e.stopPropagation();\r\n                  try {\r\n                    const response = await fetch(modalMedia.url, { credentials: \"same-origin\" });\r\n                    const blob = await response.blob();\r\n                    const url = window.URL.createObjectURL(blob);\r\n                    const a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = modalMedia.name || \"file\";\r\n                    document.body.appendChild(a);\r\n                    a.click();\r\n                    setTimeout(() => {\r\n                      window.URL.revokeObjectURL(url);\r\n                      a.remove();\r\n                    }, 200);\r\n                  } catch (err) {\r\n                    alert(\"–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞\");\r\n                  }\r\n                }}\r\n              >\r\n                –°–∫–∞—á–∞—Ç—å\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è */}\r\n      {showProfile && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            left: 0,\r\n            top: 0,\r\n            width: \"100vw\",\r\n            height: \"100vh\",\r\n            background: \"rgba(0,0,0,0.12)\",\r\n            zIndex: 99,\r\n            transition: \"background 0.2s\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n          onClick={handleProfilePopupBgClick}\r\n        >\r\n          <div\r\n            style={{\r\n              ...chatStyles.profilePopup,\r\n              ...(isMobile\r\n                ? {\r\n                    position: \"fixed\",\r\n                    left: \"50%\",\r\n                    top: \"50%\",\r\n                    transform: \"translate(-50%, -50%)\",\r\n                    width: \"92vw\",\r\n                    maxWidth: 340,\r\n                    minWidth: 0,\r\n                    height: \"auto\",\r\n                    maxHeight: \"72vh\",\r\n                    minHeight: 240,\r\n                    borderRadius: 18,\r\n                    padding: \"14px 8px 8px 8px\",\r\n                    boxShadow: \"0 2px 16px #00c3ff33\",\r\n                    fontSize: 15,\r\n\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"flex-start\",\r\n                  }\r\n                : {\r\n                    transform: showProfile ? \"translateY(0)\" : \"translateY(120%)\",\r\n                    opacity: showProfile ? 1 : 0,\r\n                    pointerEvents: showProfile ? \"auto\" : \"none\",\r\n                  }),\r\n              transition: \"transform 0.32s cubic-bezier(.4,1.4,.6,1), opacity 0.22s\",\r\n            }}\r\n            className=\"govchat-profile-popup\"\r\n            onClick={e => e.stopPropagation()}\r\n          >\r\n            {/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∞–ø–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ */}\r\n            {isMobile && (\r\n              <div style={{\r\n                position: \"sticky\",\r\n                top: 0,\r\n                left: 0,\r\n                width: \"100%\",\r\n                background: \"#232526\",\r\n                zIndex: 2,\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                padding: \"0 4px 0 0\",\r\n                minHeight: 36,\r\n                marginBottom: 8,\r\n              }}>\r\n                <div style={{ fontWeight: 700, fontSize: 17, color: \"#00c3ff\", flex: 1, textAlign: \"center\" }}>\r\n                  –ü—Ä–æ—Ñ–∏–ª—å\r\n                </div>\r\n                {/* –ö—Ä–µ—Å—Ç–∏–∫ —Å–ø—Ä–∞–≤–∞ —Å–≤–µ—Ä—Ö—É */}\r\n                <button\r\n                  style={{\r\n                    ...chatStyles.profileCloseBtn,\r\n                    position: \"static\",\r\n                    right: 0,\r\n                    top: 0,\r\n                    width: 32,\r\n                    height: 32,\r\n                    fontSize: 22,\r\n                    marginRight: 4,\r\n                    marginTop: 0,\r\n                    marginBottom: 0,\r\n                    background: \"none\",\r\n                    color: \"#b2bec3\",\r\n                    boxShadow: \"none\",\r\n                  }}\r\n                  onClick={() => setShowProfile(false)}\r\n                  title=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n                >‚úï</button>\r\n              </div>\r\n            )}\r\n            {/* –ù–æ–≤—ã–π –∞–≤–∞—Ç–∞—Ä/–∑–Ω–∞—á–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è */}\r\n            <div\r\n              style={{\r\n                ...chatStyles.profileAvatar,\r\n                ...(isMobile\r\n                  ? { width: 70, height: 70, margin: \"8px auto 8px auto\", fontSize: 36 }\r\n                  : {}),\r\n              }}\r\n              className=\"govchat-profile-avatar\"\r\n            >\r\n              <div\r\n                style={{\r\n                  position: \"relative\",\r\n                  width: isMobile ? 70 : 90,\r\n                  height: isMobile ? 70 : 90,\r\n                  borderRadius: \"50%\",\r\n                  overflow: \"hidden\",\r\n                  cursor: \"pointer\",\r\n                  border: \"2px solid #00c3ff\",\r\n                  margin: \"0 auto\",\r\n                  background: \"#35363a\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n                onClick={() => fileInputRefAvatar.current && fileInputRefAvatar.current.click()}\r\n                title=\"–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ\"\r\n              >\r\n                {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–≤–∞—Ç–∞—Ä —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å –∏ –Ω–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π */}\r\n                {userProfile?.avatarUrl &&\r\n                  userProfile.avatarUrl !== \"/uploads/avatar-default.png\" ? (\r\n                  <img\r\n                    key={userProfile.avatarUrl + avatarVersion}\r\n                    src={\r\n                      userProfile.avatarUrl\r\n                        ? userProfile.avatarUrl + \"?t=\" + avatarVersion\r\n                        : \"/uploads/avatar-default.png\"\r\n                    }\r\n                    alt=\"avatar\"\r\n                    style={{\r\n                      width: isMobile ? 70 : 90,\r\n                      height: isMobile ? 70 : 90,\r\n                      borderRadius: \"50%\",\r\n                      objectFit: \"cover\",\r\n                      display: \"block\",\r\n                    }}\r\n                    onError={e => {\r\n                      e.target.onerror = null;\r\n                      e.target.src =\r\n                        `${window.location.protocol}//${window.location.hostname}:5000/uploads/avatar-default.png`;\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É, –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π\r\n                  <img\r\n                    src={\"/uploads/avatar-default.png\"}\r\n                    alt=\"avatar\"\r\n                    style={{\r\n                      width: isMobile ? 70 : 90,\r\n                      height: isMobile ? 70 : 90,\r\n                      borderRadius: \"50%\",\r\n                      objectFit: \"cover\",\r\n                      display: \"block\",\r\n                    }}\r\n                    onError={e => {\r\n                      e.target.onerror = null;\r\n                      e.target.src =\r\n                        \"https://ui-avatars.com/api/?name=\" +\r\n                        encodeURIComponent(userProfile?.username || \"U\") +\r\n                        \"&background=00c3ff&color=fff&size=90\";\r\n                    }}\r\n                  />\r\n                )}\r\n                <input\r\n                  ref={fileInputRefAvatar}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  style={{ display: \"none\" }}\r\n                  onChange={async e => {\r\n                    if (!e.target.files?.[0]) return;\r\n                    const formData = new FormData();\r\n                    formData.append(\"file\", e.target.files[0]);\r\n                    const uploadRes = await axios.post(\r\n                      `${API_URL}/upload?avatar=1`,\r\n                      formData,\r\n                      {\r\n                        headers: { Authorization: `Bearer ${token}` },\r\n                      }\r\n                    );\r\n                    await axios.patch(\r\n                      `${API_URL}/profile`,\r\n                      { avatarUrl: uploadRes.data.url },\r\n                      { headers: { Authorization: `Bearer ${token}` } }\r\n                    );\r\n                    const profileRes = await axios.get(`${API_URL}/profile`, {\r\n                      headers: { Authorization: `Bearer ${token}` },\r\n                    });\r\n                    setUserProfile(profileRes.data);\r\n                    setAvatarVersion(Date.now());\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            {/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ—Ñ–∏–ª—è —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π */}\r\n            <div style={{\r\n              flex: 1,\r\n              overflowY: \"auto\",\r\n              minHeight: 0,\r\n              marginBottom: 10,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"flex-start\",\r\n              ...(isMobile ? { padding: \"0 4px\" } : {})\r\n            }}>\r\n              {userProfile && !editMode && (\r\n                <>\r\n                  {!isMobile && (\r\n                    <div style={chatStyles.profileTitle} className=\"govchat-profile-title\">–ü—Ä–æ—Ñ–∏–ª—å</div>\r\n                  )}\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–ù–∏–∫:</span> {userProfile.username}\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–í–æ–∑—Ä–∞—Å—Ç:</span> {userProfile.age ?? \"‚Äî\"}\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–ì–æ—Ä–æ–¥:</span> {userProfile.city ?? \"‚Äî\"}\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–°–µ–º–µ–π–Ω—ã–π —Å—Ç–∞—Ç—É—Å:</span> {userProfile.status ?? \"‚Äî\"}\r\n                  </div>\r\n                  {/* –ö–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º–æ–π –æ–±–ª–∞—Å—Ç–∏, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */}\r\n                  <div style={{\r\n                    display: \"flex\",\r\n                    gap: 8,\r\n                    marginTop: 18,\r\n                    justifyContent: \"flex-end\",\r\n                    flexWrap: isMobile ? \"wrap\" : \"nowrap\",\r\n                  }}>\r\n                    <button\r\n                      style={{\r\n                        ...chatStyles.profileEditBtn,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"7px 12px\" } : {})\r\n                      }}\r\n                      onClick={() => {\r\n                        setEditData({\r\n                          username: userProfile.username || \"\",\r\n                          password: \"\",\r\n                          city: userProfile.city || \"\",\r\n                          status: userProfile.status || \"\",\r\n                          age: userProfile.age || \"\",\r\n                        });\r\n                        setEditMode(true);\r\n                      }}\r\n                    >\r\n                      –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å\r\n                    </button>\r\n                    <button\r\n                      style={{\r\n                        ...chatStyles.profileLogoutBtn,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"7px 12px\" } : {})\r\n                      }}\r\n                      onClick={() => {\r\n                        localStorage.removeItem(\"token\");\r\n                        window.location.reload();\r\n                      }}\r\n                    >\r\n                      –í—ã–π—Ç–∏\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n              {userProfile && editMode && (\r\n                <>\r\n                  {!isMobile && (\r\n                    <div style={chatStyles.profileTitle}>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</div>\r\n                  )}\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–ù–∏–∫:</span>\r\n                    <input\r\n                      style={{\r\n                        ...chatStyles.profileInput,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"6px 8px\" } : {})\r\n                      }}\r\n                      value={editData.username}\r\n                      onChange={e => setEditData(d => ({ ...d, username: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–ü–∞—Ä–æ–ª—å:</span>\r\n                    <input\r\n                      style={{\r\n                        ...chatStyles.profileInput,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"6px 8px\" } : {})\r\n                      }}\r\n                      type=\"password\"\r\n                      value={editData.password}\r\n                      placeholder=\"–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å\"\r\n                      onChange={e => setEditData(d => ({ ...d, password: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–í–æ–∑—Ä–∞—Å—Ç:</span>\r\n                    <input\r\n                      style={{\r\n                        ...chatStyles.profileInput,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"6px 8px\" } : {})\r\n                      }}\r\n                      type=\"number\"\r\n                      min={0}\r\n                      value={editData.age}\r\n                      onChange={e => setEditData(d => ({ ...d, age: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–ì–æ—Ä–æ–¥:</span>\r\n                    <input\r\n                      style={{\r\n                        ...chatStyles.profileInput,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"6px 8px\" } : {})\r\n                      }}\r\n                      value={editData.city}\r\n                      onChange={e => setEditData(d => ({ ...d, city: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  <div style={chatStyles.profileField}>\r\n                    <span style={chatStyles.profileLabel}>–°–µ–º–µ–π–Ω—ã–π —Å—Ç–∞—Ç—É—Å:</span>\r\n                    <input\r\n                      style={{\r\n                        ...chatStyles.profileInput,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"6px 8px\" } : {})\r\n                      }}\r\n                      value={editData.status}\r\n                      onChange={e => setEditData(d => ({ ...d, status: e.target.value }))}\r\n                    />\r\n                  </div>\r\n                  {/* –ö–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º–æ–π –æ–±–ª–∞—Å—Ç–∏, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–ª–µ–π */}\r\n                  <div style={{\r\n                    display: \"flex\",\r\n                    gap: 8,\r\n                    marginTop: 10,\r\n                    justifyContent: \"flex-end\",\r\n                    flexWrap: isMobile ? \"wrap\" : \"nowrap\",\r\n                  }}>\r\n                    <button\r\n                      style={{\r\n                        ...chatStyles.profileEditBtn,\r\n                        ...(isMobile ? { fontSize: 14, padding: \"7px 12px\" } : {})\r\n                      }}\r\n                      onClick={handleProfileSave}\r\n                    >\r\n                      –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\r\n                    </button>\r\n                    <button\r\n                      style={{\r\n                        ...chatStyles.profileCloseBtn,\r\n                        position: \"static\",\r\n                        width: \"auto\",\r\n                        height: \"auto\",\r\n                        fontSize: isMobile ? 14 : 15,\r\n                        marginLeft: 0,\r\n                        marginTop: 0,\r\n                        marginBottom: 0,\r\n                        background: \"#35363a\",\r\n                        color: \"#b2bec3\",\r\n                        boxShadow: \"0 2px 8px #0002\",\r\n                        ...(isMobile ? { padding: \"7px 12px\" } : {})\r\n                      }}\r\n                      onClick={() => setEditMode(false)}\r\n                    >\r\n                      –û—Ç–º–µ–Ω–∞\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n              {!userProfile && (\r\n                <div style={{ color: \"#b2bec3\", marginBottom: 8 }}>–ó–∞–≥—Ä—É–∑–∫–∞...</div>\r\n              )}\r\n            </div>\r\n            {/* –ö–Ω–æ–ø–∫–∏ —É–±—Ä–∞–Ω—ã –∏–∑ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ popup */}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ */}\r\n      {showCustomizer && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            left: 0,\r\n            top: 0,\r\n            width: \"100vw\",\r\n            height: \"100vh\",\r\n            background: \"rgba(0,0,0,0.12)\",\r\n            zIndex: 120,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n          onClick={() => setShowCustomizer(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              background: \"#232526\",\r\n              borderRadius: 16,\r\n              boxShadow: \"0 2px 16px #00c3ff33\",\r\n              padding: \"32px 32px 24px 32px\",\r\n              minWidth: 320,\r\n              maxWidth: 420,\r\n              zIndex: 121,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              alignItems: \"center\",\r\n              position: \"relative\",\r\n            }}\r\n            onClick={e => e.stopPropagation()}\r\n          >\r\n            <button\r\n              style={{\r\n                position: \"absolute\",\r\n                top: 10,\r\n                right: 16,\r\n                background: \"none\",\r\n                color: \"#b2bec3\",\r\n                border: \"none\",\r\n                borderRadius: \"50%\",\r\n                width: 32,\r\n                height: 32,\r\n                fontSize: 22,\r\n                fontWeight: 700,\r\n                cursor: \"pointer\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                transition: \"background 0.2s, color 0.2s\",\r\n                zIndex: 122,\r\n              }}\r\n              onClick={() => setShowCustomizer(false)}\r\n              title=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n            >‚úï</button>\r\n            <div style={{ fontWeight: 700, fontSize: 20, color: \"#ffb347\", marginBottom: 18 }}>\r\n              –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\r\n            </div>\r\n            <div style={{ display: \"flex\", flexDirection: \"column\", gap: 18, width: \"100%\" }}>\r\n              {chatStyles.themes.map((t) => (\r\n                <button\r\n                  key={t.name}\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 16,\r\n                    width: \"100%\",\r\n                    background: t.pageBg,\r\n                    border: theme.name === t.name ? \"2px solid #00c3ff\" : \"2px solid transparent\",\r\n                    borderRadius: 10,\r\n                    padding: \"12px 18px\",\r\n                    cursor: \"pointer\",\r\n                    color: \"#222\",\r\n                    fontWeight: 600,\r\n                    fontSize: 16,\r\n                    boxShadow: theme.name === t.name ? \"0 2px 12px #00c3ff44\" : \"0 2px 8px #0002\",\r\n                    transition: \"border 0.2s, box-shadow 0.2s\",\r\n                  }}\r\n                  onClick={() => handleThemeSelect(t)}\r\n                >\r\n                  <span style={{\r\n                    width: 32, height: 32, borderRadius: 8, background: t.chatBg,\r\n                    border: \"1.5px solid #fff\", display: \"inline-block\", marginRight: 8\r\n                  }} />\r\n                  <span style={{ color: \"#fff\", textShadow: \"0 1px 4px #0005\" }}>{t.name}</span>\r\n                  {theme.name === t.name && (\r\n                    <span style={{ marginLeft: \"auto\", color: \"#00c3ff\", fontSize: 22 }}>‚úî</span>\r\n                  )}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}