{"ast":null,"code":"import _objectSpread from\"C:/Users/larak/AppData/Local/npm-cache/_npx/cd53aabf71f3f793/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import*as chatStyles from\"./styles/chatStyles\";import io from\"socket.io-client\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=\"http://localhost:5000/api\";function parseToken(token){if(!token)return\"\";try{const t=token.split(\".\")[1].replace(/-/g,\"+\").replace(/_/g,\"/\");const n=decodeURIComponent(atob(t).split(\"\").map(c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));return JSON.parse(n).username||\"\";}catch(_unused){return\"\";}}function App(){var _userProfile$age,_userProfile$city,_userProfile$status;const[token,setToken]=useState(localStorage.getItem(\"token\"));const[channels,setChannels]=useState([]);const[selectedChannel,setSelectedChannel]=useState(null);const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[typing,setTyping]=useState(\"\");const typingTimeoutRef=useRef(null);const[showCreate,setShowCreate]=useState(false);const[newChannel,setNewChannel]=useState(\"\");const[authMode,setAuthMode]=useState(\"login\");const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[userProfile,setUserProfile]=useState(null);const[editMode,setEditMode]=useState(false);const[editData,setEditData]=useState({username:\"\",password:\"\",city:\"\",status:\"\",age:\"\"});const[showProfile,setShowProfile]=useState(false);const[showProfileModal,setShowProfileModal]=useState(false);const[profileModalData,setProfileModalData]=useState({city:\"\",status:\"\",age:\"\"});const[registering,setRegistering]=useState(false);const socketRef=useRef(null);const messagesEndRef=useRef(null);const fileInputRefChat=React.useRef(null);// –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π –≤ —á–∞—Ç\nconst fileInputRefAvatar=React.useRef(null);// –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è\nconst[avatarVersion,setAvatarVersion]=useState(Date.now());const[fileToSend,setFileToSend]=useState(null);const[filePreviewUrl,setFilePreviewUrl]=useState(null);const[modalMedia,setModalMedia]=useState(null);// {type, url, name}\nconst[attachBtnHover,setAttachBtnHover]=useState(false);// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏ –≤–ª–æ–∂–µ–Ω–∏–π\nconst[showCustomizer,setShowCustomizer]=useState(false);// –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\nconst[theme,setTheme]=useState(chatStyles.themes[0]);// –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞\nconst[isRecording,setIsRecording]=useState(false);const[mediaRecorder,setMediaRecorder]=useState(null);const[audioChunks,setAudioChunks]=useState([]);useEffect(()=>{setUsername(parseToken(token));},[token]);useEffect(()=>{if(!token)return;const fetchProfile=async()=>{try{const res=await axios.get(\"\".concat(API_URL,\"/profile\"),{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(res.data);// –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è\nif(res.data.theme&&(res.data.theme.pageBg||res.data.theme.chatBg)){const found=chatStyles.themes.find(t=>t.pageBg===res.data.theme.pageBg&&t.chatBg===res.data.theme.chatBg);setTheme(found||_objectSpread(_objectSpread({},chatStyles.themes[0]),res.data.theme));}else{setTheme(chatStyles.themes[0]);}}catch(_unused2){setUserProfile(null);setTheme(chatStyles.themes[0]);}};fetchProfile();},[token]);useEffect(()=>{if(!token)return;axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setChannels(res.data)).catch(()=>setChannels([]));socketRef.current=io(\"http://localhost:5000\",{auth:{token}});socketRef.current.on(\"message\",msg=>{setMessages(prev=>msg.channel===selectedChannel?[...prev,msg]:prev);});socketRef.current.on(\"typing\",e=>{setTyping(\"\".concat(e.user,\" \\u043F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\"));if(typingTimeoutRef.current)clearTimeout(typingTimeoutRef.current);typingTimeoutRef.current=setTimeout(()=>setTyping(\"\"),2000);});// –ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫: –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ\nconst handleNewChannel=()=>{axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setChannels(res.data)).catch(()=>setChannels([]));};socketRef.current.on(\"new-channel\",handleNewChannel);return()=>{socketRef.current&&socketRef.current.disconnect();socketRef.current&&socketRef.current.off(\"new-channel\",handleNewChannel);if(typingTimeoutRef.current)clearTimeout(typingTimeoutRef.current);};// eslint-disable-next-line\n},[token]);useEffect(()=>{if(token&&selectedChannel){axios.get(\"\".concat(API_URL,\"/messages/\").concat(selectedChannel),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setMessages(res.data));socketRef.current&&socketRef.current.emit(\"join\",selectedChannel);}},[token,selectedChannel]);useEffect(()=>{messagesEndRef.current&&messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});},[messages]);useEffect(()=>{if(!socketRef.current)return;const handler=msg=>{if(msg.channel===selectedChannel)setMessages(prev=>[...prev,msg]);};socketRef.current.on(\"message\",handler);return()=>socketRef.current.off(\"message\",handler);},[selectedChannel]);const handleCreateChannel=async()=>{if(!newChannel.trim())return;try{const t=parseToken(token);const res=await axios.post(\"\".concat(API_URL,\"/channels\"),{name:newChannel,members:[t]},{headers:{Authorization:\"Bearer \".concat(token)}});setShowCreate(false);setNewChannel(\"\");const chs=await axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}});setChannels(chs.data);setSelectedChannel(res.data._id);socketRef.current&&socketRef.current.emit(\"join\",res.data._id);// socketRef.current && socketRef.current.emit(\"new-channel\"); // –£–î–ê–õ–ï–ù–û, —Ç–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä —Å–∞–º —ç–º–∏—Ç–∏—Ç\n}catch(_unused3){alert(\"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞\");}};const handleSend=async()=>{if(!input.trim()&&!fileToSend||!selectedChannel)return;const t=parseToken(token);let msg={text:input,sender:t,channel:selectedChannel};if(fileToSend){const formData=new FormData();formData.append(\"file\",fileToSend);const uploadRes=await axios.post(\"\".concat(API_URL,\"/upload\"),formData,{headers:{Authorization:\"Bearer \".concat(token)}});msg.fileUrl=uploadRes.data.url.startsWith(\"http\")?uploadRes.data.url:\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":5000\").concat(uploadRes.data.url);msg.fileType=uploadRes.data.fileType;msg.originalName=uploadRes.data.originalName;}socketRef.current&&socketRef.current.emit(\"join\",selectedChannel);socketRef.current.emit(\"message\",msg);setInput(\"\");setFileToSend(null);setFilePreviewUrl(null);if(fileInputRefChat.current)fileInputRefChat.current.value=\"\";};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\nconst handleRegister=async e=>{e.preventDefault();setError(\"\");setRegistering(true);try{await axios.post(\"\".concat(API_URL,\"/register\"),{username,password});// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ä–∞–∑—É –ª–æ–≥–∏–Ω–∏–º\nconst res=await axios.post(\"\".concat(API_URL,\"/login\"),{username,password});localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}catch(e){var _e$response,_e$response$data;setError((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||\"–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ª–æ–≥–∏–Ω–∞\");}setRegistering(false);};// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞\nconst handleLogin=async e=>{e.preventDefault();setError(\"\");setRegistering(true);try{const res=await axios.post(\"\".concat(API_URL,\"/login\"),{username,password});localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}catch(e){var _e$response2,_e$response2$data;setError((e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.error)||\"–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å\");}setRegistering(false);};// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª—è\nconst handleProfileSave=async()=>{try{const payload={username:editData.username,password:editData.password,city:editData.city,status:editData.status,age:editData.age};Object.keys(payload).forEach(k=>{if(payload[k]===\"\"||payload[k]===null)delete payload[k];});const res=await axios.patch(\"\".concat(API_URL,\"/profile\"),payload,{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(res.data);setEditMode(false);if(payload.username&&payload.username!==userProfile.username&&res.data.token){localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}}catch(e){var _e$response3,_e$response3$data;alert((e===null||e===void 0?void 0:(_e$response3=e.response)===null||_e$response3===void 0?void 0:(_e$response3$data=_e$response3.data)===null||_e$response3$data===void 0?void 0:_e$response3$data.error)||(e===null||e===void 0?void 0:e.message)||\"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è\");}};const handleProfilePopupBgClick=e=>{// –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É (–∞ –Ω–µ –ø–æ —Å–∞–º–æ–º—É popup), –∑–∞–∫—Ä—ã–≤–∞–µ–º\nsetShowProfile(false);};useEffect(()=>{if(userProfile){setEditData(d=>_objectSpread({},d));}},[userProfile]);useEffect(()=>{document.title=\"–ì–æ–í–ß–∞—Ç 2.1 Beta\";// –î–æ–±–∞–≤–ª—è–µ–º/–∑–∞–º–µ–Ω—è–µ–º favicon\nconst faviconId=\"govchat-favicon\";let link=document.querySelector(\"link[rel=\\\"icon\\\"]#\".concat(faviconId));if(!link){link=document.createElement(\"link\");link.rel=\"icon\";link.id=faviconId;document.head.appendChild(link);}// SVG-—ç–º–æ–¥–∑–∏-–∏–∫–æ–Ω–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ü¶Ü)\nlink.type=\"image/svg+xml\";link.href='data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><text y=\"52\" font-size=\"52\">ü¶Ü</text></svg>';return()=>{// –ù–µ —É–¥–∞–ª—è–µ–º favicon –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n};},[]);// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞\nuseEffect(()=>{if(fileToSend){if(fileToSend.type.startsWith(\"image/\")||fileToSend.type.startsWith(\"video/\")){const url=URL.createObjectURL(fileToSend);setFilePreviewUrl(url);return()=>URL.revokeObjectURL(url);}else{setFilePreviewUrl(null);}}else{setFilePreviewUrl(null);}},[fileToSend]);// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã –≤ –ø—Ä–æ—Ñ–∏–ª—å\nconst handleThemeSelect=async t=>{setTheme(t);setShowCustomizer(false);try{await axios.patch(\"\".concat(API_URL,\"/profile\"),{theme:{pageBg:t.pageBg,chatBg:t.chatBg}},{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(u=>u?_objectSpread(_objectSpread({},u),{},{theme:{pageBg:t.pageBg,chatBg:t.chatBg}}):u);}catch(_unused4){// ignore\n}};// –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ —Å—Ç–∏–ª—è–º\nconst themedPageStyle=_objectSpread(_objectSpread({},chatStyles.page),{},{background:theme.pageBg});const themedChatBoxStyle=_objectSpread(_objectSpread({},chatStyles.chatBox),{},{background:theme.chatBg});// --- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ---\nconst handleRecordStart=async()=>{if(isRecording)return;try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const recorder=new window.MediaRecorder(stream);setMediaRecorder(recorder);setAudioChunks([]);recorder.ondataavailable=e=>{if(e.data.size>0)setAudioChunks(chunks=>[...chunks,e.data]);};recorder.onstop=()=>{if(audioChunks.length===0)return;const audioBlob=new Blob(audioChunks,{type:\"audio/webm\"});const audioFile=new File([audioBlob],\"voice-\".concat(Date.now(),\".webm\"),{type:\"audio/webm\"});setFileToSend(audioFile);setFilePreviewUrl(null);setIsRecording(false);setMediaRecorder(null);setAudioChunks([]);};recorder.start();setIsRecording(true);}catch(e){alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É\");}};const handleRecordStop=()=>{if(mediaRecorder&&isRecording){mediaRecorder.stop();setIsRecording(false);}};// --- –ù–æ–≤—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–ø–∏—Å–∏ ---\nconst handleRecordBtn=async e=>{e.preventDefault();if(!isRecording){await handleRecordStart();}else{handleRecordStop();}};if(!token){return/*#__PURE__*/_jsx(\"div\",{style:chatStyles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.authContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.authTitle,children:authMode===\"register\"?\"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\":\"–í—Ö–æ–¥\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:chatStyles.error,children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:authMode===\"register\"?handleRegister:handleLogin,style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(\"input\",{style:chatStyles.authInput,placeholder:\"\\u0418\\u043C\\u044F\",value:username,onChange:e=>setUsername(e.target.value),required:true,autoComplete:\"username\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.authInput,placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.authBtn,type:\"submit\",disabled:registering,children:authMode===\"register\"?\"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è\":\"–í–æ–π—Ç–∏\"})]}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.switchBtn,type:\"button\",onClick:()=>{setAuthMode(authMode===\"register\"?\"login\":\"register\");setError(\"\");},children:authMode===\"register\"?\"–í–æ–π—Ç–∏\":\"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{style:themedPageStyle,children:[/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.sidebar,children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.sidebarTitle,children:\"\\u0413\\u043E\\u0412\\u0427\\u0430\\u0442 2.1 Beta\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.channelList,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600,color:\"#fff\",marginBottom:10},children:\"\\u041A\\u0430\\u043D\\u0430\\u043B\\u044B\"}),channels.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",marginBottom:8},children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u043D\\u0430\\u043B\\u043E\\u0432\"}):/*#__PURE__*/_jsx(_Fragment,{children:channels.map(ch=>/*#__PURE__*/_jsx(\"div\",{style:chatStyles.channelItem(selectedChannel===ch._id),onClick:()=>setSelectedChannel(ch._id),children:ch.name},ch._id))}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.createBtn,onClick:()=>setShowCreate(v=>!v),children:showCreate?\"–°–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ\":\"–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª\"}),showCreate&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"input\",{style:chatStyles.input,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannel,onChange:e=>setNewChannel(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.createBtn,onClick:handleCreateChannel,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.profileBtnBox),{},{left:\"auto\",right:178,bottom:70,display:\"flex\",flexDirection:\"row\",alignItems:\"center\",gap:10,zIndex:10}),children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.profileBtn,onClick:()=>{setShowProfile(v=>!v);setEditMode(false);},title:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"26\",height:\"26\",viewBox:\"0 0 26 26\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"13\",r:\"13\",fill:\"#00c3ff\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"10\",r:\"4\",fill:\"#fff\"}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"13\",cy:\"19\",rx:\"7\",ry:\"4\",fill:\"#fff\"})]})}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileBtn),{},{background:\"none\",border:\"none\",marginRight:0,marginLeft:0,boxShadow:\"0 2px 8px #00c3ff33\"}),onClick:()=>setShowCustomizer(v=>!v),title:\"\\u041A\\u0430\\u0441\\u0442\\u043E\\u043C\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"26\",height:\"26\",viewBox:\"0 0 26 26\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"13\",cy:\"13\",r:\"13\",fill:\"#ffb347\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7 19c0-2 2-4 4-4s4 2 4 4\",stroke:\"#fff\",strokeWidth:\"2\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"10\",y:\"6\",width:\"6\",height:\"8\",rx:\"2\",fill:\"#fff\",stroke:\"#ffb347\",strokeWidth:\"1.5\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"8\",y:\"14\",width:\"10\",height:\"4\",rx:\"2\",fill:\"#ffb347\",stroke:\"#fff\",strokeWidth:\"1.5\"})]})}),showProfile&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0,0,0,0.12)\",zIndex:99,transition:\"background 0.2s\"},onClick:handleProfilePopupBgClick,children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.profilePopup),{},{transform:showProfile?\"translateY(0)\":\"translateY(120%)\",opacity:showProfile?1:0,pointerEvents:showProfile?\"auto\":\"none\",transition:\"transform 0.32s cubic-bezier(.4,1.4,.6,1), opacity 0.22s\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\"}),onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.profileAvatar,children:/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\",width:90,height:90,borderRadius:\"50%\",overflow:\"hidden\",cursor:\"pointer\",border:\"2px solid #00c3ff\",margin:\"0 auto\",background:\"#35363a\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:()=>fileInputRefAvatar.current&&fileInputRefAvatar.current.click(),title:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\",children:[userProfile!==null&&userProfile!==void 0&&userProfile.avatarUrl&&userProfile.avatarUrl!==\"/uploads/avatar-default.png\"?/*#__PURE__*/_jsx(\"img\",{src:userProfile.avatarUrl.startsWith(\"http\")?userProfile.avatarUrl+\"?t=\"+avatarVersion:\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":5000\").concat(userProfile.avatarUrl,\"?t=\").concat(avatarVersion),alt:\"avatar\",style:{width:90,height:90,borderRadius:\"50%\",objectFit:\"cover\",display:\"block\"},onError:e=>{e.target.onerror=null;e.target.src=\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":5000/uploads/avatar-default.png\");}},userProfile.avatarUrl+avatarVersion):/*#__PURE__*/// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É, –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π\n_jsx(\"img\",{src:\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":5000/uploads/avatar-default.png\"),alt:\"avatar\",style:{width:90,height:90,borderRadius:\"50%\",objectFit:\"cover\",display:\"block\"},onError:e=>{e.target.onerror=null;e.target.src=\"https://ui-avatars.com/api/?name=\"+encodeURIComponent((userProfile===null||userProfile===void 0?void 0:userProfile.username)||\"U\")+\"&background=00c3ff&color=fff&size=90\";}}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRefAvatar,type:\"file\",accept:\"image/*\",style:{display:\"none\"},onChange:async e=>{var _e$target$files;if(!((_e$target$files=e.target.files)!==null&&_e$target$files!==void 0&&_e$target$files[0]))return;const formData=new FormData();formData.append(\"file\",e.target.files[0]);const uploadRes=await axios.post(\"\".concat(API_URL,\"/upload?avatar=1\"),formData,{headers:{Authorization:\"Bearer \".concat(token)}});await axios.patch(\"\".concat(API_URL,\"/profile\"),{avatarUrl:uploadRes.data.url},{headers:{Authorization:\"Bearer \".concat(token)}});const profileRes=await axios.get(\"\".concat(API_URL,\"/profile\"),{headers:{Authorization:\"Bearer \".concat(token)}});setUserProfile(profileRes.data);setAvatarVersion(Date.now());}})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:\"auto\",minHeight:0,marginBottom:10,display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\"},children:[userProfile&&!editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.profileTitle,children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u041D\\u0438\\u043A:\"}),\" \",userProfile.username]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442:\"}),\" \",(_userProfile$age=userProfile.age)!==null&&_userProfile$age!==void 0?_userProfile$age:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0413\\u043E\\u0440\\u043E\\u0434:\"}),\" \",(_userProfile$city=userProfile.city)!==null&&_userProfile$city!==void 0?_userProfile$city:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0421\\u0435\\u043C\\u0435\\u0439\\u043D\\u044B\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),\" \",(_userProfile$status=userProfile.status)!==null&&_userProfile$status!==void 0?_userProfile$status:\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginTop:18,justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.profileEditBtn,onClick:()=>{setEditData({username:userProfile.username||\"\",password:\"\",city:userProfile.city||\"\",status:userProfile.status||\"\",age:userProfile.age||\"\"});setEditMode(true);},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.profileLogoutBtn,onClick:()=>{localStorage.removeItem(\"token\");window.location.reload();},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]})]}),userProfile&&editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:chatStyles.profileTitle,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u041D\\u0438\\u043A:\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.profileInput,value:editData.username,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{username:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.profileInput,type:\"password\",value:editData.password,placeholder:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{password:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0412\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442:\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.profileInput,type:\"number\",min:0,value:editData.age,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{age:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0413\\u043E\\u0440\\u043E\\u0434:\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.profileInput,value:editData.city,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{city:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.profileField,children:[/*#__PURE__*/_jsx(\"span\",{style:chatStyles.profileLabel,children:\"\\u0421\\u0435\\u043C\\u0435\\u0439\\u043D\\u044B\\u0439 \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.profileInput,value:editData.status,onChange:e=>setEditData(d=>_objectSpread(_objectSpread({},d),{},{status:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginTop:10,justifyContent:\"flex-end\",flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(\"button\",{style:chatStyles.profileEditBtn,onClick:handleProfileSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},chatStyles.profileCloseBtn),{},{position:\"static\",width:\"auto\",height:\"auto\",fontSize:15,marginLeft:0,marginTop:0,marginBottom:0,background:\"#35363a\",color:\"#b2bec3\",boxShadow:\"0 2px 8px #0002\"}),onClick:()=>setEditMode(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})]}),!userProfile&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",marginBottom:8},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})]})]})})]}),showCustomizer&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0,0,0,0.12)\",zIndex:120,display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:()=>setShowCustomizer(false),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#232526\",borderRadius:16,boxShadow:\"0 2px 16px #00c3ff33\",padding:\"32px 32px 24px 32px\",minWidth:320,maxWidth:420,zIndex:121,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",position:\"relative\"},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:{position:\"absolute\",top:10,right:16,background:\"none\",color:\"#b2bec3\",border:\"none\",borderRadius:\"50%\",width:32,height:32,fontSize:22,fontWeight:700,cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",transition:\"background 0.2s, color 0.2s\",zIndex:122},onClick:()=>setShowCustomizer(false),title:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700,fontSize:20,color:\"#ffb347\",marginBottom:18},children:\"\\u041A\\u0430\\u0441\\u0442\\u043E\\u043C\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:18,width:\"100%\"},children:chatStyles.themes.map((t,idx)=>/*#__PURE__*/_jsxs(\"button\",{style:{display:\"flex\",alignItems:\"center\",gap:16,width:\"100%\",background:t.pageBg,border:theme.name===t.name?\"2px solid #00c3ff\":\"2px solid transparent\",borderRadius:10,padding:\"12px 18px\",cursor:\"pointer\",color:\"#222\",fontWeight:600,fontSize:16,boxShadow:theme.name===t.name?\"0 2px 12px #00c3ff44\":\"0 2px 8px #0002\",transition:\"border 0.2s, box-shadow 0.2s\"},onClick:()=>handleThemeSelect(t),children:[/*#__PURE__*/_jsx(\"span\",{style:{width:32,height:32,borderRadius:8,background:t.chatBg,border:\"1.5px solid #fff\",display:\"inline-block\",marginRight:8}}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#fff\",textShadow:\"0 1px 4px #0005\"},children:t.name}),theme.name===t.name&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"auto\",color:\"#00c3ff\",fontSize:22},children:\"\\u2714\"})]},t.name))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.chatContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",marginBottom:10,minHeight:32},children:/*#__PURE__*/_jsx(\"div\",{style:chatStyles.chatTitle,children:\"\\u0427\\u0430\\u0442\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box\",style:themedChatBoxStyle,children:[messages.map(msg=>{const isMine=msg.sender===username;// –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏\nconst time=msg.createdAt?new Date(msg.createdAt).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}):'';return/*#__PURE__*/_jsx(\"div\",{style:chatStyles.messageRow(isMine),children:/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.message(isMine),children:[!isMine&&/*#__PURE__*/_jsxs(\"span\",{style:chatStyles.messageSender,children:[msg.sender,\":\"]}),msg.text,msg.fileUrl&&msg.fileType&&/*#__PURE__*/_jsx(\"span\",{style:{display:\"block\",marginTop:8},children:msg.fileType.startsWith(\"image/\")?/*#__PURE__*/_jsx(\"img\",{src:msg.fileUrl,alt:msg.originalName||\"image\",style:{maxWidth:120,maxHeight:120,borderRadius:8,cursor:\"pointer\",boxShadow:\"0 2px 8px #00c3ff33\"},onClick:()=>setModalMedia({type:\"image\",url:msg.fileUrl,name:msg.originalName})}):msg.fileType.startsWith(\"video/\")?/*#__PURE__*/_jsx(\"video\",{src:msg.fileUrl,controls:false,style:{maxWidth:120,maxHeight:120,borderRadius:8,cursor:\"pointer\",boxShadow:\"0 2px 8px #00c3ff33\"},onClick:()=>setModalMedia({type:\"video\",url:msg.fileUrl,name:msg.originalName}),children:\"\\u0412\\u0430\\u0448 \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0432\\u0438\\u0434\\u0435\\u043E.\"}):msg.fileType.startsWith(\"audio/\")?/*#__PURE__*/_jsx(\"audio\",{src:msg.fileUrl,controls:true,style:{maxWidth:220,borderRadius:8,background:\"#232526\",marginTop:4},children:\"\\u0412\\u0430\\u0448 \\u0431\\u0440\\u0430\\u0443\\u0437\\u0435\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u0438\\u0432\\u0430\\u0435\\u0442 \\u0430\\u0443\\u0434\\u0438\\u043E.\"}):/*#__PURE__*/// –ü—Ä–µ–≤—å—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n_jsxs(\"span\",{style:{display:\"flex\",alignItems:\"center\",gap:8,cursor:\"pointer\",background:\"#232526\",borderRadius:8,padding:\"8px 12px\",boxShadow:\"0 2px 8px #00c3ff22\",maxWidth:220,minWidth:0,color:\"#fff\"},onClick:()=>{// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞\nconst ext=(msg.originalName||\"\").split('.').pop().toLowerCase();if(msg.fileType===\"application/pdf\"){setModalMedia({type:\"pdf\",url:msg.fileUrl,name:msg.originalName});}else{setModalMedia({type:\"doc\",url:msg.fileUrl,name:msg.originalName,ext});}},title:msg.originalName,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:28},children:(()=>{const ext=(msg.originalName||\"\").split('.').pop().toLowerCase();if(ext===\"pdf\")return\"üìÑ\";if([\"doc\",\"docx\"].includes(ext))return\"üìù\";if([\"xls\",\"xlsx\"].includes(ext))return\"üìä\";if([\"ppt\",\"pptx\"].includes(ext))return\"üìà\";if([\"txt\",\"rtf\"].includes(ext))return\"üìÉ\";return\"üìÅ\";})()}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:14,color:\"#fff\",wordBreak:\"break-all\",flex:1,minWidth:0},children:msg.originalName})]})}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",fontSize:11,marginTop:4,textAlign:isMine?\"right\":\"left\"},children:time})]})},msg._id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{style:{minHeight:22,display:\"flex\",alignItems:\"flex-end\",marginBottom:2},children:typing&&/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},chatStyles.typing),{},{margin:0,paddingLeft:8,paddingRight:8,background:\"none\",borderRadius:0,position:\"relative\",zIndex:2,width:\"fit-content\",maxWidth:\"80%\",alignSelf:\"flex-start\",boxShadow:\"none\"}),children:typing})}),fileToSend&&/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"0 0 8px 0\",padding:\"6px 10px\",background:\"#35363a\",borderRadius:8,display:\"flex\",alignItems:\"center\",gap:10,maxWidth:320},children:[fileToSend.type.startsWith(\"image/\")&&filePreviewUrl&&/*#__PURE__*/_jsx(\"img\",{src:filePreviewUrl,alt:\"preview\",style:{maxWidth:48,maxHeight:48,borderRadius:6}}),fileToSend.type.startsWith(\"video/\")&&filePreviewUrl&&/*#__PURE__*/_jsx(\"video\",{src:filePreviewUrl,style:{maxWidth:48,maxHeight:48,borderRadius:6},controls:true}),!fileToSend.type.startsWith(\"image/\")&&!fileToSend.type.startsWith(\"video/\")&&/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"file\",children:\"\\uD83D\\uDCCE\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#fff\",fontSize:14,wordBreak:\"break-all\"},children:fileToSend.name}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"auto\",background:\"none\",border:\"none\",color:\"#ff7675\",fontWeight:700,fontSize:16,cursor:\"pointer\"},title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",onClick:()=>{setFileToSend(null);setFilePreviewUrl(null);if(fileInputRefChat.current)fileInputRefChat.current.value=\"\";},children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:chatStyles.inputRow,children:[/*#__PURE__*/_jsxs(\"button\",{style:isRecording?_objectSpread(_objectSpread({},chatStyles.recordBtn),chatStyles.recordBtnActive):chatStyles.recordBtn,type:\"button\",onClick:handleRecordBtn,onTouchStart:e=>{if(!isRecording)handleRecordBtn(e);},onTouchEnd:e=>{if(isRecording)handleRecordBtn(e);},title:isRecording?\"–ù–∞–∂–º–∏—Ç–µ –µ—â—ë —Ä–∞–∑, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å\":\"–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ\",disabled:!selectedChannel,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:isRecording?\"#fff\":\"#d63031\",fontSize:22,display:\"flex\",alignItems:\"center\"},children:\"\\uD83C\\uDFA4\"}),isRecording&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:6,width:10,height:10,borderRadius:\"50%\",background:\"#ff7675\",display:\"inline-block\",animation:\"record-blink 1s infinite\"}})]}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread({},attachBtnHover?_objectSpread(_objectSpread({},chatStyles.attachBtn),chatStyles.attachBtnHover):chatStyles.attachBtn),type:\"button\",onClick:()=>fileInputRefChat.current&&fileInputRefChat.current.click(),title:\"\\u041F\\u0440\\u0438\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\",tabIndex:-1,onMouseEnter:()=>setAttachBtnHover(true),onMouseLeave:()=>setAttachBtnHover(false),disabled:false,children:/*#__PURE__*/_jsx(\"span\",{style:{color:\"#222\",fontSize:22,display:\"flex\",alignItems:\"center\"},children:\"\\uD83D\\uDCCE\"})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRefChat,type:\"file\",style:{display:\"none\"},onChange:e=>{var _e$target$files2;if((_e$target$files2=e.target.files)!==null&&_e$target$files2!==void 0&&_e$target$files2[0])setFileToSend(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{style:chatStyles.input,value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(selectedChannel){socketRef.current.emit(\"typing\",{channel:selectedChannel});if(e.key===\"Enter\")handleSend();}},disabled:!selectedChannel,placeholder:selectedChannel?\"–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...\":\"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª\"}),/*#__PURE__*/_jsx(\"button\",{style:chatStyles.sendBtn,onClick:handleSend,disabled:!selectedChannel||!input.trim()&&!fileToSend,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]}),modalMedia&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",left:0,top:0,width:\"100vw\",height:\"100vh\",background:\"rgba(0,0,0,0.7)\",zIndex:9999,display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},onClick:()=>setModalMedia(null),children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#232526\",borderRadius:12,padding:24,maxWidth:\"90vw\",maxHeight:\"90vh\",boxShadow:\"0 4px 32px #000a\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",position:\"relative\"},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{style:{position:\"absolute\",top:8,right:12,background:\"none\",border:\"none\",color:\"#fff\",fontSize:28,fontWeight:700,cursor:\"pointer\",zIndex:2},onClick:()=>setModalMedia(null),title:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",children:\"\\u2715\"}),modalMedia.type===\"image\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:modalMedia.url,alt:modalMedia.name,style:{maxWidth:\"70vw\",maxHeight:\"70vh\",borderRadius:10,marginBottom:16}}),modalMedia.name&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",fontSize:16,marginBottom:16,wordBreak:\"break-all\",textAlign:\"center\",maxWidth:\"60vw\"},children:modalMedia.name})]}):modalMedia.type===\"video\"?/*#__PURE__*/_jsx(\"video\",{src:modalMedia.url,controls:true,autoPlay:true,style:{maxWidth:\"70vw\",maxHeight:\"70vh\",borderRadius:10,marginBottom:16,background:\"#000\"}}):modalMedia.type===\"pdf\"?/*#__PURE__*/_jsx(\"iframe\",{src:modalMedia.url,title:modalMedia.name,style:{width:\"70vw\",height:\"70vh\",border:\"none\",borderRadius:10,background:\"#fff\",marginBottom:16}}):modalMedia.type===\"doc\"?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:200,minWidth:200,marginBottom:16},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:64,marginBottom:16},children:(()=>{const ext=(modalMedia.ext||\"\").toLowerCase();if(ext===\"pdf\")return\"üìÑ\";if([\"doc\",\"docx\"].includes(ext))return\"üìù\";if([\"xls\",\"xlsx\"].includes(ext))return\"üìä\";if([\"ppt\",\"pptx\"].includes(ext))return\"üìà\";if([\"txt\",\"rtf\"].includes(ext))return\"üìÉ\";return\"üìÅ\";})()}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#fff\",fontSize:18,marginBottom:8,wordBreak:\"break-all\",textAlign:\"center\"},children:modalMedia.name}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b2bec3\",fontSize:15,marginBottom:18},children:\"\\u041F\\u0440\\u0435\\u0434\\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0435\\u043D \\u0434\\u043B\\u044F \\u044D\\u0442\\u043E\\u0433\\u043E \\u0442\\u0438\\u043F\\u0430 \\u0444\\u0430\\u0439\\u043B\\u0430\"})]}):null,/*#__PURE__*/_jsx(\"button\",{style:{background:\"linear-gradient(90deg,#00c3ff,#3a7bd5)\",color:\"#fff\",border:\"none\",borderRadius:8,padding:\"10px 22px\",fontWeight:600,fontSize:15,cursor:\"pointer\",boxShadow:\"0 2px 8px #00c3ff33\",textDecoration:\"none\"},onClick:async e=>{e.stopPropagation();try{const response=await fetch(modalMedia.url,{credentials:\"same-origin\"});const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement(\"a\");a.href=url;a.download=modalMedia.name||\"file\";document.body.appendChild(a);a.click();setTimeout(()=>{window.URL.revokeObjectURL(url);a.remove();},200);}catch(err){alert(\"–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞\");}},children:\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"})]})})]}),useEffect(()=>{const styleId=\"record-blink-style\";if(!document.getElementById(styleId)){const style=document.createElement(\"style\");style.id=styleId;style.innerHTML=\"\\n            @keyframes record-blink {\\n              0% { opacity: 1; }\\n              50% { opacity: 0.2; }\\n              100% { opacity: 1; }\\n            }\\n          \";document.head.appendChild(style);}},[])]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","chatStyles","io","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","parseToken","token","t","split","replace","n","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","username","_unused","App","_userProfile$age","_userProfile$city","_userProfile$status","setToken","localStorage","getItem","channels","setChannels","selectedChannel","setSelectedChannel","messages","setMessages","input","setInput","typing","setTyping","typingTimeoutRef","showCreate","setShowCreate","newChannel","setNewChannel","authMode","setAuthMode","setUsername","password","setPassword","error","setError","userProfile","setUserProfile","editMode","setEditMode","editData","setEditData","city","status","age","showProfile","setShowProfile","showProfileModal","setShowProfileModal","profileModalData","setProfileModalData","registering","setRegistering","socketRef","messagesEndRef","fileInputRefChat","fileInputRefAvatar","avatarVersion","setAvatarVersion","Date","now","fileToSend","setFileToSend","filePreviewUrl","setFilePreviewUrl","modalMedia","setModalMedia","attachBtnHover","setAttachBtnHover","showCustomizer","setShowCustomizer","theme","setTheme","themes","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","audioChunks","setAudioChunks","fetchProfile","res","get","concat","headers","Authorization","data","pageBg","chatBg","found","find","_objectSpread","_unused2","then","catch","current","auth","on","msg","prev","channel","e","user","clearTimeout","setTimeout","handleNewChannel","disconnect","off","emit","scrollIntoView","behavior","handler","handleCreateChannel","trim","post","name","members","chs","_id","_unused3","alert","handleSend","text","sender","formData","FormData","append","uploadRes","fileUrl","url","startsWith","window","location","protocol","hostname","fileType","originalName","value","handleRegister","preventDefault","setItem","_e$response","_e$response$data","response","handleLogin","_e$response2","_e$response2$data","handleProfileSave","payload","Object","keys","forEach","k","patch","_e$response3","_e$response3$data","message","handleProfilePopupBgClick","d","document","title","faviconId","link","querySelector","createElement","rel","id","head","appendChild","type","href","URL","createObjectURL","revokeObjectURL","handleThemeSelect","u","_unused4","themedPageStyle","page","background","themedChatBoxStyle","chatBox","handleRecordStart","stream","navigator","mediaDevices","getUserMedia","audio","recorder","MediaRecorder","ondataavailable","size","chunks","onstop","length","audioBlob","Blob","audioFile","File","start","handleRecordStop","stop","handleRecordBtn","style","children","authContainer","authTitle","onSubmit","width","authInput","placeholder","onChange","target","required","autoComplete","authBtn","disabled","switchBtn","onClick","sidebar","sidebarTitle","channelList","fontWeight","color","marginBottom","ch","channelItem","createBtn","v","marginTop","profileBtnBox","left","right","bottom","display","flexDirection","alignItems","gap","zIndex","profileBtn","height","viewBox","fill","cx","cy","r","rx","ry","border","marginRight","marginLeft","boxShadow","stroke","strokeWidth","x","y","position","top","transition","profilePopup","transform","opacity","pointerEvents","justifyContent","stopPropagation","profileAvatar","borderRadius","overflow","cursor","margin","click","avatarUrl","src","alt","objectFit","onError","onerror","encodeURIComponent","ref","accept","_e$target$files","files","profileRes","flex","overflowY","minHeight","profileTitle","profileField","profileLabel","profileEditBtn","profileLogoutBtn","removeItem","reload","profileInput","min","flexWrap","profileCloseBtn","fontSize","padding","minWidth","maxWidth","idx","textShadow","chatContainer","chatTitle","className","isMine","time","createdAt","toLocaleTimeString","hour","minute","messageRow","messageSender","maxHeight","controls","ext","pop","toLowerCase","includes","wordBreak","textAlign","paddingLeft","paddingRight","alignSelf","role","inputRow","recordBtn","recordBtnActive","onTouchStart","onTouchEnd","animation","attachBtn","tabIndex","onMouseEnter","onMouseLeave","_e$target$files2","onKeyDown","key","sendBtn","autoPlay","textDecoration","fetch","credentials","blob","a","download","body","remove","err","styleId","getElementById","innerHTML"],"sources":["D:/prr/prr/semak4/driver/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport * as chatStyles from \"./styles/chatStyles\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst API_URL = \"http://localhost:5000/api\";\r\n\r\nfunction parseToken(token) {\r\n  if (!token) return \"\";\r\n  try {\r\n    const t = token.split(\".\")[1].replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    const n = decodeURIComponent(\r\n      atob(t)\r\n        .split(\"\")\r\n        .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n        .join(\"\")\r\n    );\r\n    return JSON.parse(n).username || \"\";\r\n  } catch {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n  const [channels, setChannels] = useState([]);\r\n  const [selectedChannel, setSelectedChannel] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [typing, setTyping] = useState(\"\");\r\n  const typingTimeoutRef = useRef(null);\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [newChannel, setNewChannel] = useState(\"\");\r\n  const [authMode, setAuthMode] = useState(\"login\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editData, setEditData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    city: \"\",\r\n    status: \"\",\r\n    age: \"\",\r\n  });\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [showProfileModal, setShowProfileModal] = useState(false);\r\n  const [profileModalData, setProfileModalData] = useState({\r\n    city: \"\",\r\n    status: \"\",\r\n    age: \"\",\r\n  });\r\n  const [registering, setRegistering] = useState(false);\r\n  const socketRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n  const fileInputRefChat = React.useRef(null); // –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π –≤ —á–∞—Ç\r\n  const fileInputRefAvatar = React.useRef(null); // –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è\r\n  const [avatarVersion, setAvatarVersion] = useState(Date.now());\r\n  const [fileToSend, setFileToSend] = useState(null);\r\n  const [filePreviewUrl, setFilePreviewUrl] = useState(null);\r\n  const [modalMedia, setModalMedia] = useState(null); // {type, url, name}\r\n  const [attachBtnHover, setAttachBtnHover] = useState(false); // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö–æ–≤–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏ –≤–ª–æ–∂–µ–Ω–∏–π\r\n  const [showCustomizer, setShowCustomizer] = useState(false); // –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\r\n  const [theme, setTheme] = useState(chatStyles.themes[0]); // –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [mediaRecorder, setMediaRecorder] = useState(null);\r\n  const [audioChunks, setAudioChunks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setUsername(parseToken(token));\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const res = await axios.get(`${API_URL}/profile`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setUserProfile(res.data);\r\n        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è\r\n        if (res.data.theme && (res.data.theme.pageBg || res.data.theme.chatBg)) {\r\n          const found = chatStyles.themes.find(\r\n            t => t.pageBg === res.data.theme.pageBg && t.chatBg === res.data.theme.chatBg\r\n          );\r\n          setTheme(found || { ...chatStyles.themes[0], ...res.data.theme });\r\n        } else {\r\n          setTheme(chatStyles.themes[0]);\r\n        }\r\n      } catch {\r\n        setUserProfile(null);\r\n        setTheme(chatStyles.themes[0]);\r\n      }\r\n    };\r\n    fetchProfile();\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    axios\r\n      .get(`${API_URL}/channels`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n      .then((res) => setChannels(res.data))\r\n      .catch(() => setChannels([]));\r\n\r\n    socketRef.current = io(\"http://localhost:5000\", {\r\n      auth: { token },\r\n    });\r\n\r\n    socketRef.current.on(\"message\", (msg) => {\r\n      setMessages((prev) =>\r\n        msg.channel === selectedChannel ? [...prev, msg] : prev\r\n      );\r\n    });\r\n\r\n    socketRef.current.on(\"typing\", (e) => {\r\n      setTyping(`${e.user} –ø–µ—á–∞—Ç–∞–µ—Ç...`);\r\n      if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\r\n      typingTimeoutRef.current = setTimeout(() => setTyping(\"\"), 2000);\r\n    });\r\n\r\n    // –ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫: –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ\r\n    const handleNewChannel = () => {\r\n      axios\r\n        .get(`${API_URL}/channels`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setChannels(res.data))\r\n        .catch(() => setChannels([]));\r\n    };\r\n    socketRef.current.on(\"new-channel\", handleNewChannel);\r\n\r\n    return () => {\r\n      socketRef.current && socketRef.current.disconnect();\r\n      socketRef.current && socketRef.current.off(\"new-channel\", handleNewChannel);\r\n      if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (token && selectedChannel) {\r\n      axios\r\n        .get(`${API_URL}/messages/${selectedChannel}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setMessages(res.data));\r\n      socketRef.current && socketRef.current.emit(\"join\", selectedChannel);\r\n    }\r\n  }, [token, selectedChannel]);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current && messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (!socketRef.current) return;\r\n    const handler = (msg) => {\r\n      if (msg.channel === selectedChannel) setMessages((prev) => [...prev, msg]);\r\n    };\r\n    socketRef.current.on(\"message\", handler);\r\n    return () => socketRef.current.off(\"message\", handler);\r\n  }, [selectedChannel]);\r\n\r\n  const handleCreateChannel = async () => {\r\n    if (!newChannel.trim()) return;\r\n    try {\r\n      const t = parseToken(token);\r\n      const res = await axios.post(\r\n        `${API_URL}/channels`,\r\n        { name: newChannel, members: [t] },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setShowCreate(false);\r\n      setNewChannel(\"\");\r\n      const chs = await axios.get(`${API_URL}/channels`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setChannels(chs.data);\r\n      setSelectedChannel(res.data._id);\r\n      socketRef.current && socketRef.current.emit(\"join\", res.data._id);\r\n      // socketRef.current && socketRef.current.emit(\"new-channel\"); // –£–î–ê–õ–ï–ù–û, —Ç–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä —Å–∞–º —ç–º–∏—Ç–∏—Ç\r\n    } catch {\r\n      alert(\"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞\");\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if ((!input.trim() && !fileToSend) || !selectedChannel) return;\r\n    const t = parseToken(token);\r\n    let msg = { text: input, sender: t, channel: selectedChannel };\r\n    if (fileToSend) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", fileToSend);\r\n      const uploadRes = await axios.post(\r\n        `${API_URL}/upload`,\r\n        formData,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      msg.fileUrl = uploadRes.data.url.startsWith(\"http\")\r\n        ? uploadRes.data.url\r\n        : `${window.location.protocol}//${window.location.hostname}:5000${uploadRes.data.url}`;\r\n      msg.fileType = uploadRes.data.fileType;\r\n      msg.originalName = uploadRes.data.originalName;\r\n    }\r\n    socketRef.current && socketRef.current.emit(\"join\", selectedChannel);\r\n    socketRef.current.emit(\"message\", msg);\r\n    setInput(\"\");\r\n    setFileToSend(null);\r\n    setFilePreviewUrl(null);\r\n    if (fileInputRefChat.current) fileInputRefChat.current.value = \"\";\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setRegistering(true);\r\n    try {\r\n      await axios.post(`${API_URL}/register`, {\r\n        username,\r\n        password,\r\n      });\r\n      // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ä–∞–∑—É –ª–æ–≥–∏–Ω–∏–º\r\n      const res = await axios.post(`${API_URL}/login`, {\r\n        username,\r\n        password,\r\n      });\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      setToken(res.data.token);\r\n    } catch (e) {\r\n      setError(\r\n        e?.response?.data?.error ||\r\n          \"–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ª–æ–≥–∏–Ω–∞\"\r\n      );\r\n    }\r\n    setRegistering(false);\r\n  };\r\n\r\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setRegistering(true);\r\n    try {\r\n      const res = await axios.post(`${API_URL}/login`, {\r\n        username,\r\n        password,\r\n      });\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      setToken(res.data.token);\r\n    } catch (e) {\r\n      setError(\r\n        e?.response?.data?.error ||\r\n          \"–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å\"\r\n      );\r\n    }\r\n    setRegistering(false);\r\n  };\r\n\r\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª—è\r\n  const handleProfileSave = async () => {\r\n    try {\r\n      const payload = {\r\n        username: editData.username,\r\n        password: editData.password,\r\n        city: editData.city,\r\n        status: editData.status,\r\n        age: editData.age,\r\n      };\r\n      Object.keys(payload).forEach(k => {\r\n        if (payload[k] === \"\" || payload[k] === null) delete payload[k];\r\n      });\r\n      const res = await axios.patch(`${API_URL}/profile`, payload, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setUserProfile(res.data);\r\n      setEditMode(false);\r\n      if (payload.username && payload.username !== userProfile.username && res.data.token) {\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        setToken(res.data.token);\r\n      }\r\n    } catch (e) {\r\n      alert(e?.response?.data?.error || e?.message || \"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è\");\r\n    }\r\n  };\r\n\r\n  const handleProfilePopupBgClick = (e) => {\r\n    // –ï—Å–ª–∏ –∫–ª–∏–∫ –ø–æ —Ñ–æ–Ω—É (–∞ –Ω–µ –ø–æ —Å–∞–º–æ–º—É popup), –∑–∞–∫—Ä—ã–≤–∞–µ–º\r\n    setShowProfile(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userProfile) {\r\n      setEditData(d => ({\r\n        ...d,\r\n      }));\r\n    }\r\n  }, [userProfile]);\r\n\r\n  useEffect(() => {\r\n    document.title = \"–ì–æ–í–ß–∞—Ç 2.1 Beta\";\r\n    // –î–æ–±–∞–≤–ª—è–µ–º/–∑–∞–º–µ–Ω—è–µ–º favicon\r\n    const faviconId = \"govchat-favicon\";\r\n    let link = document.querySelector(`link[rel=\"icon\"]#${faviconId}`);\r\n    if (!link) {\r\n      link = document.createElement(\"link\");\r\n      link.rel = \"icon\";\r\n      link.id = faviconId;\r\n      document.head.appendChild(link);\r\n    }\r\n    // SVG-—ç–º–æ–¥–∑–∏-–∏–∫–æ–Ω–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ü¶Ü)\r\n    link.type = \"image/svg+xml\";\r\n    link.href =\r\n      'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><text y=\"52\" font-size=\"52\">ü¶Ü</text></svg>';\r\n    return () => {\r\n      // –ù–µ —É–¥–∞–ª—è–µ–º favicon –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n    };\r\n  }, []);\r\n\r\n  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞\r\n  useEffect(() => {\r\n    if (fileToSend) {\r\n      if (fileToSend.type.startsWith(\"image/\") || fileToSend.type.startsWith(\"video/\")) {\r\n        const url = URL.createObjectURL(fileToSend);\r\n        setFilePreviewUrl(url);\r\n        return () => URL.revokeObjectURL(url);\r\n      } else {\r\n        setFilePreviewUrl(null);\r\n      }\r\n    } else {\r\n      setFilePreviewUrl(null);\r\n    }\r\n  }, [fileToSend]);\r\n\r\n  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã –≤ –ø—Ä–æ—Ñ–∏–ª—å\r\n  const handleThemeSelect = async (t) => {\r\n    setTheme(t);\r\n    setShowCustomizer(false);\r\n    try {\r\n      await axios.patch(`${API_URL}/profile`, { theme: { pageBg: t.pageBg, chatBg: t.chatBg } }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setUserProfile((u) => u ? { ...u, theme: { pageBg: t.pageBg, chatBg: t.chatBg } } : u);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ —Å—Ç–∏–ª—è–º\r\n  const themedPageStyle = { ...chatStyles.page, background: theme.pageBg };\r\n  const themedChatBoxStyle = { ...chatStyles.chatBox, background: theme.chatBg };\r\n\r\n  // --- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ---\r\n  const handleRecordStart = async () => {\r\n    if (isRecording) return;\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new window.MediaRecorder(stream);\r\n      setMediaRecorder(recorder);\r\n      setAudioChunks([]);\r\n      recorder.ondataavailable = e => {\r\n        if (e.data.size > 0) setAudioChunks(chunks => [...chunks, e.data]);\r\n      };\r\n      recorder.onstop = () => {\r\n        if (audioChunks.length === 0) return;\r\n        const audioBlob = new Blob(audioChunks, { type: \"audio/webm\" });\r\n        const audioFile = new File([audioBlob], `voice-${Date.now()}.webm`, { type: \"audio/webm\" });\r\n        setFileToSend(audioFile);\r\n        setFilePreviewUrl(null);\r\n        setIsRecording(false);\r\n        setMediaRecorder(null);\r\n        setAudioChunks([]);\r\n      };\r\n      recorder.start();\r\n      setIsRecording(true);\r\n    } catch (e) {\r\n      alert(\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É\");\r\n    }\r\n  };\r\n\r\n  const handleRecordStop = () => {\r\n    if (mediaRecorder && isRecording) {\r\n      mediaRecorder.stop();\r\n      setIsRecording(false);\r\n    }\r\n  };\r\n\r\n  // --- –ù–æ–≤—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–ø–∏—Å–∏ ---\r\n  const handleRecordBtn = async (e) => {\r\n    e.preventDefault();\r\n    if (!isRecording) {\r\n      await handleRecordStart();\r\n    } else {\r\n      handleRecordStop();\r\n    }\r\n  };\r\n\r\n  if (!token) {\r\n    return (\r\n      <div style={chatStyles.page}>\r\n        <div style={chatStyles.authContainer}>\r\n          <div style={chatStyles.authTitle}>\r\n            {authMode === \"register\" ? \"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\" : \"–í—Ö–æ–¥\"}\r\n          </div>\r\n          {error && <div style={chatStyles.error}>{error}</div>}\r\n          <form\r\n            onSubmit={authMode === \"register\" ? handleRegister : handleLogin}\r\n            style={{ width: \"100%\" }}\r\n          >\r\n            <input\r\n              style={chatStyles.authInput}\r\n              placeholder=\"–ò–º—è\"\r\n              value={username}\r\n              onChange={e => setUsername(e.target.value)}\r\n              required\r\n              autoComplete=\"username\"\r\n            />\r\n            <input\r\n              style={chatStyles.authInput}\r\n              placeholder=\"–ü–∞—Ä–æ–ª—å\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={e => setPassword(e.target.value)}\r\n              required\r\n              autoComplete=\"current-password\"\r\n            />\r\n            <button\r\n              style={chatStyles.authBtn}\r\n              type=\"submit\"\r\n              disabled={registering}\r\n            >\r\n              {authMode === \"register\" ? \"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è\" : \"–í–æ–π—Ç–∏\"}\r\n            </button>\r\n          </form>\r\n          <button\r\n            style={chatStyles.switchBtn}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              setAuthMode(authMode === \"register\" ? \"login\" : \"register\");\r\n              setError(\"\");\r\n            }}\r\n          >\r\n            {authMode === \"register\" ? \"–í–æ–π—Ç–∏\" : \"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={themedPageStyle}>\r\n      <div style={chatStyles.sidebar}>\r\n        <div style={chatStyles.sidebarTitle}>–ì–æ–í–ß–∞—Ç 2.1 Beta</div>\r\n        <div style={chatStyles.channelList}>\r\n          <div style={{ fontWeight: 600, color: \"#fff\", marginBottom: 10 }}>–ö–∞–Ω–∞–ª—ã</div>\r\n          {channels.length === 0 ? (\r\n            <div style={{ color: \"#b2bec3\", marginBottom: 8 }}>\r\n              –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {channels.map((ch) => (\r\n                <div\r\n                  key={ch._id}\r\n                  style={chatStyles.channelItem(selectedChannel === ch._id)}\r\n                  onClick={() => setSelectedChannel(ch._id)}\r\n                >\r\n                  {ch.name}\r\n                </div>\r\n              ))}\r\n            </>\r\n          )}\r\n          <button\r\n            style={chatStyles.createBtn}\r\n            onClick={() => setShowCreate((v) => !v)}\r\n          >\r\n            {showCreate ? \"–°–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ\" : \"–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª\"}\r\n          </button>\r\n          {showCreate && (\r\n            <div style={{ marginTop: 10 }}>\r\n              <input\r\n                style={chatStyles.input}\r\n                placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞\"\r\n                value={newChannel}\r\n                onChange={e => setNewChannel(e.target.value)}\r\n              />\r\n              <button style={chatStyles.createBtn} onClick={handleCreateChannel}>\r\n                –°–æ–∑–¥–∞—Ç—å\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* –ö–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –±–æ–∫—Å–µ —Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É */}\r\n        <div style={{\r\n          ...chatStyles.profileBtnBox,\r\n          left: \"auto\",\r\n          right: 178,\r\n          bottom: 70,\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          alignItems: \"center\",\r\n          gap: 10,\r\n          zIndex: 10\r\n        }}>\r\n          {/* –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */}\r\n          <button\r\n            style={chatStyles.profileBtn}\r\n            onClick={() => {\r\n              setShowProfile(v => !v);\r\n              setEditMode(false);\r\n            }}\r\n            title=\"–ü—Ä–æ—Ñ–∏–ª—å\"\r\n          >\r\n            <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\">\r\n              <circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"#00c3ff\" />\r\n              <circle cx=\"13\" cy=\"10\" r=\"4\" fill=\"#fff\" />\r\n              <ellipse cx=\"13\" cy=\"19\" rx=\"7\" ry=\"4\" fill=\"#fff\" />\r\n            </svg>\r\n          </button>\r\n          {/* –ö–Ω–æ–ø–∫–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ */}\r\n          <button\r\n            style={{\r\n              ...chatStyles.profileBtn,\r\n              background: \"none\",\r\n              border: \"none\",\r\n              marginRight: 0,\r\n              marginLeft: 0,\r\n              boxShadow: \"0 2px 8px #00c3ff33\"\r\n            }}\r\n            onClick={() => setShowCustomizer(v => !v)}\r\n            title=\"–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è\"\r\n          >\r\n            <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\">\r\n              <circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"#ffb347\" />\r\n              <path d=\"M7 19c0-2 2-4 4-4s4 2 4 4\" stroke=\"#fff\" strokeWidth=\"2\" />\r\n              <rect x=\"10\" y=\"6\" width=\"6\" height=\"8\" rx=\"2\" fill=\"#fff\" stroke=\"#ffb347\" strokeWidth=\"1.5\"/>\r\n              <rect x=\"8\" y=\"14\" width=\"10\" height=\"4\" rx=\"2\" fill=\"#ffb347\" stroke=\"#fff\" strokeWidth=\"1.5\"/>\r\n            </svg>\r\n          </button>\r\n          {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è */}\r\n          {showProfile && (\r\n            <div\r\n              style={{\r\n                position: \"fixed\",\r\n                left: 0,\r\n                top: 0,\r\n                width: \"100vw\",\r\n                height: \"100vh\",\r\n                background: \"rgba(0,0,0,0.12)\",\r\n                zIndex: 99,\r\n                transition: \"background 0.2s\",\r\n              }}\r\n              onClick={handleProfilePopupBgClick}\r\n            >\r\n              <div\r\n                style={{\r\n                  ...chatStyles.profilePopup,\r\n                  transform: showProfile ? \"translateY(0)\" : \"translateY(120%)\",\r\n                  opacity: showProfile ? 1 : 0,\r\n                  pointerEvents: showProfile ? \"auto\" : \"none\",\r\n                  transition: \"transform 0.32s cubic-bezier(.4,1.4,.6,1), opacity 0.22s\",\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  justifyContent: \"flex-start\",\r\n                }}\r\n                onClick={e => e.stopPropagation()}\r\n              >\r\n                {/* –ù–æ–≤—ã–π –∞–≤–∞—Ç–∞—Ä/–∑–Ω–∞—á–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è */}\r\n                <div style={chatStyles.profileAvatar}>\r\n                  <div\r\n                    style={{\r\n                      position: \"relative\",\r\n                      width: 90,\r\n                      height: 90,\r\n                      borderRadius: \"50%\",\r\n                      overflow: \"hidden\",\r\n                      cursor: \"pointer\",\r\n                      border: \"2px solid #00c3ff\",\r\n                      margin: \"0 auto\",\r\n                      background: \"#35363a\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                    onClick={() => fileInputRefAvatar.current && fileInputRefAvatar.current.click()}\r\n                    title=\"–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ\"\r\n                  >\r\n                    {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∞–≤–∞—Ç–∞—Ä —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å –∏ –Ω–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π */}\r\n                    {userProfile?.avatarUrl &&\r\n                      userProfile.avatarUrl !== \"/uploads/avatar-default.png\" ? (\r\n                      <img\r\n                        key={userProfile.avatarUrl + avatarVersion}\r\n                        src={\r\n                          userProfile.avatarUrl.startsWith(\"http\")\r\n                            ? userProfile.avatarUrl + \"?t=\" + avatarVersion\r\n                            : `${window.location.protocol}//${window.location.hostname}:5000${userProfile.avatarUrl}?t=${avatarVersion}`\r\n                        }\r\n                        alt=\"avatar\"\r\n                        style={{\r\n                          width: 90,\r\n                          height: 90,\r\n                          borderRadius: \"50%\",\r\n                          objectFit: \"cover\",\r\n                          display: \"block\",\r\n                        }}\r\n                        onError={e => {\r\n                          e.target.onerror = null;\r\n                          e.target.src =\r\n                            `${window.location.protocol}//${window.location.hostname}:5000/uploads/avatar-default.png`;\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É, –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π\r\n                      <img\r\n                        src={`${window.location.protocol}//${window.location.hostname}:5000/uploads/avatar-default.png`}\r\n                        alt=\"avatar\"\r\n                        style={{\r\n                          width: 90,\r\n                          height: 90,\r\n                          borderRadius: \"50%\",\r\n                          objectFit: \"cover\",\r\n                          display: \"block\",\r\n                        }}\r\n                        onError={e => {\r\n                          e.target.onerror = null;\r\n                          e.target.src =\r\n                            \"https://ui-avatars.com/api/?name=\" +\r\n                            encodeURIComponent(userProfile?.username || \"U\") +\r\n                            \"&background=00c3ff&color=fff&size=90\";\r\n                        }}\r\n                      />\r\n                    )}\r\n                    <input\r\n                      ref={fileInputRefAvatar}\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      style={{ display: \"none\" }}\r\n                      onChange={async e => {\r\n                        if (!e.target.files?.[0]) return;\r\n                        const formData = new FormData();\r\n                        formData.append(\"file\", e.target.files[0]);\r\n                        const uploadRes = await axios.post(\r\n                          `${API_URL}/upload?avatar=1`,\r\n                          formData,\r\n                          {\r\n                            headers: { Authorization: `Bearer ${token}` },\r\n                          }\r\n                        );\r\n                        await axios.patch(\r\n                          `${API_URL}/profile`,\r\n                          { avatarUrl: uploadRes.data.url },\r\n                          { headers: { Authorization: `Bearer ${token}` } }\r\n                        );\r\n                        const profileRes = await axios.get(`${API_URL}/profile`, {\r\n                          headers: { Authorization: `Bearer ${token}` },\r\n                        });\r\n                        setUserProfile(profileRes.data);\r\n                        setAvatarVersion(Date.now());\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                {/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ—Ñ–∏–ª—è —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π */}\r\n                <div style={{\r\n                  flex: 1,\r\n                  overflowY: \"auto\",\r\n                  minHeight: 0,\r\n                  marginBottom: 10,\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  justifyContent: \"flex-start\"\r\n                }}>\r\n                  {userProfile && !editMode && (\r\n                    <>\r\n                      <div style={chatStyles.profileTitle}>–ü—Ä–æ—Ñ–∏–ª—å</div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–ù–∏–∫:</span> {userProfile.username}\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–í–æ–∑—Ä–∞—Å—Ç:</span> {userProfile.age ?? \"‚Äî\"}\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–ì–æ—Ä–æ–¥:</span> {userProfile.city ?? \"‚Äî\"}\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–°–µ–º–µ–π–Ω—ã–π —Å—Ç–∞—Ç—É—Å:</span> {userProfile.status ?? \"‚Äî\"}\r\n                      </div>\r\n                      {/* –ö–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º–æ–π –æ–±–ª–∞—Å—Ç–∏, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */}\r\n                      <div style={{ display: \"flex\", gap: 8, marginTop: 18, justifyContent: \"flex-end\" }}>\r\n                        <button\r\n                          style={chatStyles.profileEditBtn}\r\n                          onClick={() => {\r\n                            setEditData({\r\n                              username: userProfile.username || \"\",\r\n                              password: \"\",\r\n                              city: userProfile.city || \"\",\r\n                              status: userProfile.status || \"\",\r\n                              age: userProfile.age || \"\",\r\n                            });\r\n                            setEditMode(true);\r\n                          }}\r\n                        >\r\n                          –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å\r\n                        </button>\r\n                        <button\r\n                          style={chatStyles.profileLogoutBtn}\r\n                          onClick={() => {\r\n                            localStorage.removeItem(\"token\");\r\n                            window.location.reload();\r\n                          }}\r\n                        >\r\n                          –í—ã–π—Ç–∏\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                  {userProfile && editMode && (\r\n                    <>\r\n                      <div style={chatStyles.profileTitle}>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–ù–∏–∫:</span>\r\n                        <input\r\n                          style={chatStyles.profileInput}\r\n                          value={editData.username}\r\n                          onChange={e => setEditData(d => ({ ...d, username: e.target.value }))}\r\n                        />\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–ü–∞—Ä–æ–ª—å:</span>\r\n                        <input\r\n                          style={chatStyles.profileInput}\r\n                          type=\"password\"\r\n                          value={editData.password}\r\n                          placeholder=\"–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å\"\r\n                          onChange={e => setEditData(d => ({ ...d, password: e.target.value }))}\r\n                        />\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–í–æ–∑—Ä–∞—Å—Ç:</span>\r\n                        <input\r\n                          style={chatStyles.profileInput}\r\n                          type=\"number\"\r\n                          min={0}\r\n                          value={editData.age}\r\n                          onChange={e => setEditData(d => ({ ...d, age: e.target.value }))}\r\n                        />\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–ì–æ—Ä–æ–¥:</span>\r\n                        <input\r\n                          style={chatStyles.profileInput}\r\n                          value={editData.city}\r\n                          onChange={e => setEditData(d => ({ ...d, city: e.target.value }))}\r\n                        />\r\n                      </div>\r\n                      <div style={chatStyles.profileField}>\r\n                        <span style={chatStyles.profileLabel}>–°–µ–º–µ–π–Ω—ã–π —Å—Ç–∞—Ç—É—Å:</span>\r\n                        <input\r\n                          style={chatStyles.profileInput}\r\n                          value={editData.status}\r\n                          onChange={e => setEditData(d => ({ ...d, status: e.target.value }))}\r\n                        />\r\n                      </div>\r\n                      {/* –ö–Ω–æ–ø–∫–∏ —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–æ–ª–ª–∏—Ä—É–µ–º–æ–π –æ–±–ª–∞—Å—Ç–∏, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–ª–µ–π */}\r\n                      <div style={{ display: \"flex\", gap: 8, marginTop: 10, justifyContent: \"flex-end\", flexWrap: \"wrap\" }}>\r\n                        <button\r\n                          style={chatStyles.profileEditBtn}\r\n                          onClick={handleProfileSave}\r\n                        >\r\n                          –°–æ—Ö—Ä–∞–Ω–∏—Ç—å\r\n                        </button>\r\n                        <button\r\n                          style={{\r\n                            ...chatStyles.profileCloseBtn,\r\n                            position: \"static\",\r\n                            width: \"auto\",\r\n                            height: \"auto\",\r\n                            fontSize: 15,\r\n                            marginLeft: 0,\r\n                            marginTop: 0,\r\n                            marginBottom: 0,\r\n                            background: \"#35363a\",\r\n                            color: \"#b2bec3\",\r\n                            boxShadow: \"0 2px 8px #0002\",\r\n                          }}\r\n                          onClick={() => setEditMode(false)}\r\n                        >\r\n                          –û—Ç–º–µ–Ω–∞\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                  {!userProfile && (\r\n                    <div style={{ color: \"#b2bec3\", marginBottom: 8 }}>–ó–∞–≥—Ä—É–∑–∫–∞...</div>\r\n                  )}\r\n                </div>\r\n                {/* –ö–Ω–æ–ø–∫–∏ —É–±—Ä–∞–Ω—ã –∏–∑ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ popup */}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ */}\r\n        {showCustomizer && (\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              left: 0,\r\n              top: 0,\r\n              width: \"100vw\",\r\n              height: \"100vh\",\r\n              background: \"rgba(0,0,0,0.12)\",\r\n              zIndex: 120,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\"\r\n            }}\r\n            onClick={() => setShowCustomizer(false)}\r\n          >\r\n            <div\r\n              style={{\r\n                background: \"#232526\",\r\n                borderRadius: 16,\r\n                boxShadow: \"0 2px 16px #00c3ff33\",\r\n                padding: \"32px 32px 24px 32px\",\r\n                minWidth: 320,\r\n                maxWidth: 420,\r\n                zIndex: 121,\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                alignItems: \"center\",\r\n                position: \"relative\"\r\n              }}\r\n              onClick={e => e.stopPropagation()}\r\n            >\r\n              <button\r\n                style={{\r\n                  position: \"absolute\",\r\n                  top: 10,\r\n                  right: 16,\r\n                  background: \"none\",\r\n                  color: \"#b2bec3\",\r\n                  border: \"none\",\r\n                  borderRadius: \"50%\",\r\n                  width: 32,\r\n                  height: 32,\r\n                  fontSize: 22,\r\n                  fontWeight: 700,\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  transition: \"background 0.2s, color 0.2s\",\r\n                  zIndex: 122,\r\n                }}\r\n                onClick={() => setShowCustomizer(false)}\r\n                title=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n              >‚úï</button>\r\n              <div style={{ fontWeight: 700, fontSize: 20, color: \"#ffb347\", marginBottom: 18 }}>\r\n                –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"column\", gap: 18, width: \"100%\" }}>\r\n                {chatStyles.themes.map((t, idx) => (\r\n                  <button\r\n                    key={t.name}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: 16,\r\n                      width: \"100%\",\r\n                      background: t.pageBg,\r\n                      border: theme.name === t.name ? \"2px solid #00c3ff\" : \"2px solid transparent\",\r\n                      borderRadius: 10,\r\n                      padding: \"12px 18px\",\r\n                      cursor: \"pointer\",\r\n                      color: \"#222\",\r\n                      fontWeight: 600,\r\n                      fontSize: 16,\r\n                      boxShadow: theme.name === t.name ? \"0 2px 12px #00c3ff44\" : \"0 2px 8px #0002\",\r\n                      transition: \"border 0.2s, box-shadow 0.2s\"\r\n                    }}\r\n                    onClick={() => handleThemeSelect(t)}\r\n                  >\r\n                    <span style={{\r\n                      width: 32, height: 32, borderRadius: 8, background: t.chatBg,\r\n                      border: \"1.5px solid #fff\", display: \"inline-block\", marginRight: 8\r\n                    }} />\r\n                    <span style={{ color: \"#fff\", textShadow: \"0 1px 4px #0005\" }}>{t.name}</span>\r\n                    {theme.name === t.name && (\r\n                      <span style={{ marginLeft: \"auto\", color: \"#00c3ff\", fontSize: 22 }}>‚úî</span>\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div style={chatStyles.chatContainer}>\r\n        <div style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          width: \"100%\",\r\n          marginBottom: 10,\r\n          minHeight: 32\r\n        }}>\r\n          <div style={chatStyles.chatTitle}>–ß–∞—Ç</div>\r\n        </div>\r\n        <div\r\n          className=\"chat-box\"\r\n          style={themedChatBoxStyle}\r\n        >\r\n          {messages.map((msg) => {\r\n            const isMine = msg.sender === username;\r\n            // –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏\r\n            const time = msg.createdAt ? new Date(msg.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : '';\r\n            return (\r\n              <div key={msg._id} style={chatStyles.messageRow(isMine)}>\r\n                <div style={chatStyles.message(isMine)}>\r\n                  {/* –¢–æ–ª—å–∫–æ –¥–ª—è —á—É–∂–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è */}\r\n                  {!isMine && (\r\n                    <span style={chatStyles.messageSender}>\r\n                      {msg.sender}:\r\n                    </span>\r\n                  )}\r\n                  {msg.text}\r\n                  {/* –ü—Ä–µ–≤—å—é —Ñ–∞–π–ª–æ–≤ */}\r\n                  {msg.fileUrl && msg.fileType && (\r\n                    <span style={{ display: \"block\", marginTop: 8 }}>\r\n                      {msg.fileType.startsWith(\"image/\") ? (\r\n                        <img\r\n                          src={msg.fileUrl}\r\n                          alt={msg.originalName || \"image\"}\r\n                          style={{ maxWidth: 120, maxHeight: 120, borderRadius: 8, cursor: \"pointer\", boxShadow: \"0 2px 8px #00c3ff33\" }}\r\n                          onClick={() => setModalMedia({ type: \"image\", url: msg.fileUrl, name: msg.originalName })}\r\n                        />\r\n                      ) : msg.fileType.startsWith(\"video/\") ? (\r\n                        <video\r\n                          src={msg.fileUrl}\r\n                          controls={false}\r\n                          style={{ maxWidth: 120, maxHeight: 120, borderRadius: 8, cursor: \"pointer\", boxShadow: \"0 2px 8px #00c3ff33\" }}\r\n                          onClick={() => setModalMedia({ type: \"video\", url: msg.fileUrl, name: msg.originalName })}\r\n                        >\r\n                          –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.\r\n                        </video>\r\n                      ) : msg.fileType.startsWith(\"audio/\") ? (\r\n                        <audio\r\n                          src={msg.fileUrl}\r\n                          controls\r\n                          style={{ maxWidth: 220, borderRadius: 8, background: \"#232526\", marginTop: 4 }}\r\n                        >\r\n                          –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.\r\n                        </audio>\r\n                      ) : (\r\n                        // –ü—Ä–µ–≤—å—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\r\n                        <span\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 8,\r\n                            cursor: \"pointer\",\r\n                            background: \"#232526\",\r\n                            borderRadius: 8,\r\n                            padding: \"8px 12px\",\r\n                            boxShadow: \"0 2px 8px #00c3ff22\",\r\n                            maxWidth: 220,\r\n                            minWidth: 0,\r\n                            color: \"#fff\"\r\n                          }}\r\n                          onClick={() => {\r\n                            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞\r\n                            const ext = (msg.originalName || \"\").split('.').pop().toLowerCase();\r\n                            if (msg.fileType === \"application/pdf\") {\r\n                              setModalMedia({ type: \"pdf\", url: msg.fileUrl, name: msg.originalName });\r\n                            } else {\r\n                              setModalMedia({ type: \"doc\", url: msg.fileUrl, name: msg.originalName, ext });\r\n                            }\r\n                          }}\r\n                          title={msg.originalName}\r\n                        >\r\n                          {/* –ò–∫–æ–Ω–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é */}\r\n                          <span style={{ fontSize: 28 }}>\r\n                            {(() => {\r\n                              const ext = (msg.originalName || \"\").split('.').pop().toLowerCase();\r\n                              if (ext === \"pdf\") return \"üìÑ\";\r\n                              if ([\"doc\", \"docx\"].includes(ext)) return \"üìù\";\r\n                              if ([\"xls\", \"xlsx\"].includes(ext)) return \"üìä\";\r\n                              if ([\"ppt\", \"pptx\"].includes(ext)) return \"üìà\";\r\n                              if ([\"txt\", \"rtf\"].includes(ext)) return \"üìÉ\";\r\n                              return \"üìÅ\";\r\n                            })()}\r\n                          </span>\r\n                          <span style={{\r\n                            fontSize: 14,\r\n                            color: \"#fff\",\r\n                            wordBreak: \"break-all\",\r\n                            flex: 1,\r\n                            minWidth: 0,\r\n                          }}>\r\n                            {msg.originalName}\r\n                          </span>\r\n                        </span>\r\n                      )}\r\n                      {/* –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∞—Ç—å —É–±—Ä–∞–Ω–∞ –æ—Ç—Å—é–¥–∞ */}\r\n                    </span>\r\n                  )}\r\n                  {/* –í—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥ —Ç–µ–∫—Å—Ç–æ–º, –º–µ–Ω—å—à–∏–º —à—Ä–∏—Ñ—Ç–æ–º */}\r\n                  <div style={{ color: \"#b2bec3\", fontSize: 11, marginTop: 4, textAlign: isMine ? \"right\" : \"left\" }}>\r\n                    {time}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        {/* typing –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π flex-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–¥ inputRow */}\r\n        <div style={{ minHeight: 22, display: \"flex\", alignItems: \"flex-end\", marginBottom: 2 }}>\r\n          {typing && (\r\n            <div style={{\r\n              ...chatStyles.typing,\r\n              margin: 0,\r\n              paddingLeft: 8,\r\n              paddingRight: 8,\r\n              background: \"none\",\r\n              borderRadius: 0,\r\n              position: \"relative\",\r\n              zIndex: 2,\r\n              width: \"fit-content\",\r\n              maxWidth: \"80%\",\r\n              alignSelf: \"flex-start\",\r\n              boxShadow: \"none\"\r\n            }}>\r\n              {typing}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* –ü—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Ç–µ–ø–µ—Ä—å –Ω–∞–¥ inputRow */}\r\n        {fileToSend && (\r\n          <div style={{\r\n            margin: \"0 0 8px 0\",\r\n            padding: \"6px 10px\",\r\n            background: \"#35363a\",\r\n            borderRadius: 8,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 10,\r\n            maxWidth: 320\r\n          }}>\r\n            {fileToSend.type.startsWith(\"image/\") && filePreviewUrl && (\r\n              <img src={filePreviewUrl} alt=\"preview\" style={{ maxWidth: 48, maxHeight: 48, borderRadius: 6 }} />\r\n            )}\r\n            {fileToSend.type.startsWith(\"video/\") && filePreviewUrl && (\r\n              <video src={filePreviewUrl} style={{ maxWidth: 48, maxHeight: 48, borderRadius: 6 }} controls />\r\n            )}\r\n            {!fileToSend.type.startsWith(\"image/\") && !fileToSend.type.startsWith(\"video/\") && (\r\n              <span role=\"img\" aria-label=\"file\">üìé</span>\r\n            )}\r\n            <span style={{ color: \"#fff\", fontSize: 14, wordBreak: \"break-all\" }}>{fileToSend.name}</span>\r\n            <button\r\n              style={{\r\n                marginLeft: \"auto\",\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"#ff7675\",\r\n                fontWeight: 700,\r\n                fontSize: 16,\r\n                cursor: \"pointer\"\r\n              }}\r\n              title=\"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª\"\r\n              onClick={() => {\r\n                setFileToSend(null);\r\n                setFilePreviewUrl(null);\r\n                if (fileInputRefChat.current) fileInputRefChat.current.value = \"\";\r\n              }}\r\n            >\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        <div style={chatStyles.inputRow}>\r\n          {/* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ */}\r\n          <button\r\n            style={isRecording\r\n              ? { ...chatStyles.recordBtn, ...chatStyles.recordBtnActive }\r\n              : chatStyles.recordBtn}\r\n            type=\"button\"\r\n            onClick={handleRecordBtn}\r\n            onTouchStart={e => { if (!isRecording) handleRecordBtn(e); }}\r\n            onTouchEnd={e => { if (isRecording) handleRecordBtn(e); }}\r\n            title={isRecording ? \"–ù–∞–∂–º–∏—Ç–µ –µ—â—ë —Ä–∞–∑, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å\" : \"–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ\"}\r\n            disabled={!selectedChannel}\r\n          >\r\n            <span style={{ color: isRecording ? \"#fff\" : \"#d63031\", fontSize: 22, display: \"flex\", alignItems: \"center\" }}>üé§</span>\r\n            {isRecording && (\r\n              <span style={{\r\n                marginLeft: 6,\r\n                width: 10,\r\n                height: 10,\r\n                borderRadius: \"50%\",\r\n                background: \"#ff7675\",\r\n                display: \"inline-block\",\r\n                animation: \"record-blink 1s infinite\"\r\n              }} />\r\n            )}\r\n          </button>\r\n          {/* –ö–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ */}\r\n          <button\r\n            style={{\r\n              ...(attachBtnHover ? { ...chatStyles.attachBtn, ...chatStyles.attachBtnHover } : chatStyles.attachBtn),\r\n            }}\r\n            type=\"button\"\r\n            onClick={() => fileInputRefChat.current && fileInputRefChat.current.click()}\r\n            title=\"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª\"\r\n            tabIndex={-1}\r\n            onMouseEnter={() => setAttachBtnHover(true)}\r\n            onMouseLeave={() => setAttachBtnHover(false)}\r\n            disabled={false}\r\n          >\r\n            <span style={{ color: \"#222\", fontSize: 22, display: \"flex\", alignItems: \"center\" }}>üìé</span>\r\n          </button>\r\n          <input\r\n            ref={fileInputRefChat}\r\n            type=\"file\"\r\n            style={{ display: \"none\" }}\r\n            onChange={e => {\r\n              if (e.target.files?.[0]) setFileToSend(e.target.files[0]);\r\n            }}\r\n          />\r\n          <input\r\n            style={chatStyles.input}\r\n            value={input}\r\n            onChange={e => setInput(e.target.value)}\r\n            onKeyDown={e => {\r\n              if (selectedChannel) {\r\n                socketRef.current.emit(\"typing\", { channel: selectedChannel });\r\n                if (e.key === \"Enter\") handleSend();\r\n              }\r\n            }}\r\n            disabled={!selectedChannel}\r\n            placeholder={\r\n              selectedChannel\r\n                ? \"–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...\"\r\n                : \"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª\"\r\n            }\r\n          />\r\n          <button\r\n            style={chatStyles.sendBtn}\r\n            onClick={handleSend}\r\n            disabled={!selectedChannel || (!input.trim() && !fileToSend)}\r\n          >\r\n            –û—Ç–ø—Ä–∞–≤–∏—Ç—å\r\n          </button>\r\n        </div>\r\n        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ */}\r\n        {modalMedia && (\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              left: 0,\r\n              top: 0,\r\n              width: \"100vw\",\r\n              height: \"100vh\",\r\n              background: \"rgba(0,0,0,0.7)\",\r\n              zIndex: 9999,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\"\r\n            }}\r\n            onClick={() => setModalMedia(null)}\r\n          >\r\n            <div\r\n              style={{\r\n                background: \"#232526\",\r\n                borderRadius: 12,\r\n                padding: 24,\r\n                maxWidth: \"90vw\",\r\n                maxHeight: \"90vh\",\r\n                boxShadow: \"0 4px 32px #000a\",\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                alignItems: \"center\",\r\n                position: \"relative\"\r\n              }}\r\n              onClick={e => e.stopPropagation()}\r\n            >\r\n              <button\r\n                style={{\r\n                  position: \"absolute\",\r\n                  top: 8,\r\n                  right: 12,\r\n                  background: \"none\",\r\n                  border: \"none\",\r\n                  color: \"#fff\",\r\n                  fontSize: 28,\r\n                  fontWeight: 700,\r\n                  cursor: \"pointer\",\r\n                  zIndex: 2\r\n                }}\r\n                onClick={() => setModalMedia(null)}\r\n                title=\"–ó–∞–∫—Ä—ã—Ç—å\"\r\n              >‚úï</button>\r\n              {modalMedia.type === \"image\" ? (\r\n                <>\r\n                  <img\r\n                    src={modalMedia.url}\r\n                    alt={modalMedia.name}\r\n                    style={{ maxWidth: \"70vw\", maxHeight: \"70vh\", borderRadius: 10, marginBottom: 16 }}\r\n                  />\r\n                  {/* –ù–∞–∑–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π —Å–∫–∞—á–∞—Ç—å */}\r\n                  {modalMedia.name && (\r\n                    <div style={{\r\n                      color: \"#fff\",\r\n                      fontSize: 16,\r\n                      marginBottom: 16,\r\n                      wordBreak: \"break-all\",\r\n                      textAlign: \"center\",\r\n                      maxWidth: \"60vw\"\r\n                    }}>\r\n                      {modalMedia.name}\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : modalMedia.type === \"video\" ? (\r\n                <video\r\n                  src={modalMedia.url}\r\n                  controls\r\n                  autoPlay\r\n                  style={{ maxWidth: \"70vw\", maxHeight: \"70vh\", borderRadius: 10, marginBottom: 16, background: \"#000\" }}\r\n                />\r\n              ) : modalMedia.type === \"pdf\" ? (\r\n                <iframe\r\n                  src={modalMedia.url}\r\n                  title={modalMedia.name}\r\n                  style={{\r\n                    width: \"70vw\",\r\n                    height: \"70vh\",\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    background: \"#fff\",\r\n                    marginBottom: 16\r\n                  }}\r\n                />\r\n              ) : modalMedia.type === \"doc\" ? (\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  minHeight: 200,\r\n                  minWidth: 200,\r\n                  marginBottom: 16\r\n                }}>\r\n                  <span style={{ fontSize: 64, marginBottom: 16 }}>\r\n                    {(() => {\r\n                      const ext = (modalMedia.ext || \"\").toLowerCase();\r\n                      if (ext === \"pdf\") return \"üìÑ\";\r\n                      if ([\"doc\", \"docx\"].includes(ext)) return \"üìù\";\r\n                      if ([\"xls\", \"xlsx\"].includes(ext)) return \"üìä\";\r\n                      if ([\"ppt\", \"pptx\"].includes(ext)) return \"üìà\";\r\n                      if ([\"txt\", \"rtf\"].includes(ext)) return \"üìÉ\";\r\n                      return \"üìÅ\";\r\n                    })()}\r\n                  </span>\r\n                  <div style={{ color: \"#fff\", fontSize: 18, marginBottom: 8, wordBreak: \"break-all\", textAlign: \"center\" }}>\r\n                    {modalMedia.name}\r\n                  </div>\r\n                  <div style={{ color: \"#b2bec3\", fontSize: 15, marginBottom: 18 }}>\r\n                    –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n              <button\r\n                style={{\r\n                  background: \"linear-gradient(90deg,#00c3ff,#3a7bd5)\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  borderRadius: 8,\r\n                  padding: \"10px 22px\",\r\n                  fontWeight: 600,\r\n                  fontSize: 15,\r\n                  cursor: \"pointer\",\r\n                  boxShadow: \"0 2px 8px #00c3ff33\",\r\n                  textDecoration: \"none\"\r\n                }}\r\n                onClick={async e => {\r\n                  e.stopPropagation();\r\n                  try {\r\n                    const response = await fetch(modalMedia.url, { credentials: \"same-origin\" });\r\n                    const blob = await response.blob();\r\n                    const url = window.URL.createObjectURL(blob);\r\n                    const a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = modalMedia.name || \"file\";\r\n                    document.body.appendChild(a);\r\n                    a.click();\r\n                    setTimeout(() => {\r\n                      window.URL.revokeObjectURL(url);\r\n                      a.remove();\r\n                    }, 200);\r\n                  } catch (err) {\r\n                    alert(\"–û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞\");\r\n                  }\r\n                }}\r\n              >\r\n                –°–∫–∞—á–∞—Ç—å\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* –î–æ–±–∞–≤–∏—Ç—å CSS-–∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –º–∏–≥–∞—é—â–µ–π —Ç–æ—á–∫–∏ (—Ä–∞–∑–º–µ—â–∞–µ–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞) */}\r\n      {useEffect(() => {\r\n        const styleId = \"record-blink-style\";\r\n        if (!document.getElementById(styleId)) {\r\n          const style = document.createElement(\"style\");\r\n          style.id = styleId;\r\n          style.innerHTML = `\r\n            @keyframes record-blink {\r\n              0% { opacity: 1; }\r\n              50% { opacity: 0.2; }\r\n              100% { opacity: 1; }\r\n            }\r\n          `;\r\n          document.head.appendChild(style);\r\n        }\r\n      }, [])}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}