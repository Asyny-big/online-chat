{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import{io}from\"socket.io-client\";import chatStyles from'./styles/chatStyles';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=\"http://localhost:5000/api\";export default function App(){const[token,setToken]=useState(localStorage.getItem(\"token\"));const[channels,setChannels]=useState([]);const[currentChannel,setCurrentChannel]=useState(null);const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[typing,setTyping]=useState(\"\");const[showCreate,setShowCreate]=useState(false);const[newChannelName,setNewChannelName]=useState(\"\");const[authMode,setAuthMode]=useState(\"login\");// \"login\" | \"register\"\nconst[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const socketRef=useRef(null);const messagesEndRef=useRef(null);// Функция для корректного декодирования JWT с поддержкой Unicode\nfunction parseJwt(token){const base64Url=token.split(\".\")[1];const base64=base64Url.replace(/-/g,\"+\").replace(/_/g,\"/\");const jsonPayload=decodeURIComponent(atob(base64).split(\"\").map(c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));return JSON.parse(jsonPayload);}// Загружаем список каналов при загрузке и при изменении токена\nuseEffect(()=>{if(token){axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setChannels(res.data)).catch(()=>setChannels([]));socketRef.current=io(\"http://localhost:5000\",{auth:{token}});socketRef.current.on(\"message\",msg=>{setMessages(prev=>msg.channel===currentChannel?[...prev,msg]:prev);});socketRef.current.on(\"typing\",e=>setTyping(\"\".concat(e.user,\" \\u043F\\u0435\\u0447\\u0430\\u0442\\u0430\\u0435\\u0442...\")));// --- подписка на новый канал ---\nconst handleNewChannel=()=>{window.location.reload();};socketRef.current.on(\"new-channel\",handleNewChannel);return()=>{socketRef.current&&socketRef.current.disconnect();socketRef.current&&socketRef.current.off(\"new-channel\",handleNewChannel);};}},[token]);// Загружаем сообщения выбранного канала\nuseEffect(()=>{if(token&&currentChannel){axios.get(\"\".concat(API_URL,\"/messages/\").concat(currentChannel),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setMessages(res.data));if(socketRef.current)socketRef.current.emit(\"join\",currentChannel);}},[token,currentChannel]);// Прокрутка вниз при изменении сообщений\nuseEffect(()=>{if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});}},[messages]);// Получаем username текущего пользователя из токена\nconst getUsername=()=>{if(!token)return\"\";try{const t=token.split(\".\")[1].replace(/-/g,\"+\").replace(/_/g,\"/\");const n=decodeURIComponent(atob(t).split(\"\").map(c=>\"%\"+(\"00\"+c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));return JSON.parse(n).username;}catch(_unused){return\"\";}};const myUsername=getUsername();// Подписка на новые сообщения по сокету\nuseEffect(()=>{if(!socketRef.current)return;const handler=msg=>{if(msg.channel===currentChannel){setMessages(prev=>[...prev,msg]);}};socketRef.current.on(\"message\",handler);return()=>{socketRef.current.off(\"message\",handler);};},[currentChannel,socketRef.current]);// Создание канала\nconst handleCreateChannel=async()=>{if(!newChannelName.trim())return;try{const user=parseJwt(token).username;// Передаем массив с текущим пользователем\nlet t=parseJwt(token).username;if(typeof t!==\"string\"){if(typeof Buffer!==\"undefined\"&&Buffer.isBuffer(t)){t=Buffer.from(t).toString(\"utf8\");}else{t=String(t);}}t=t.trim();const res=await axios.post(\"\".concat(API_URL,\"/channels\"),{name:newChannelName,members:[t]},{headers:{Authorization:\"Bearer \".concat(token)}});setShowCreate(false);setNewChannelName(\"\");// Обновить список каналов\nconst channelsRes=await axios.get(\"\".concat(API_URL,\"/channels\"),{headers:{Authorization:\"Bearer \".concat(token)}});setChannels(channelsRes.data);setCurrentChannel(res.data._id);socketRef.current&&socketRef.current.emit(\"join\",res.data._id);// --- оповещение других клиентов о новом канале ---\nsocketRef.current&&socketRef.current.emit(\"new-channel\");}catch(_unused2){alert(\"Ошибка создания канала\");}};// Отправка сообщения\nconst handleSend=()=>{if(!input.trim()||!currentChannel)return;const user=parseJwt(token).username;const msg={text:input,sender:user,channel:currentChannel};// Перед отправкой сообщения обязательно join в канал\nif(socketRef.current)socketRef.current.emit(\"join\",currentChannel);// Отправляем сообщение через сокет\nsocketRef.current.emit(\"message\",msg);setInput(\"\");};// Аутентификация\nconst handleAuth=async()=>{setError(\"\");try{if(authMode===\"register\"){await axios.post(\"\".concat(API_URL,\"/register\"),{username,password});}const res=await axios.post(\"\".concat(API_URL,\"/login\"),{username,password});localStorage.setItem(\"token\",res.data.token);setToken(res.data.token);}catch(err){// Показываем ошибку с сервера, если есть\nif(err.response&&err.response.data&&err.response.data.error){setError(err.response.data.error);}else{setError(\"Неверный логин или пароль, либо пользователь не зарегистрирован\");}}};if(!token){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:authMode===\"register\"?\"Регистрация\":\"Вход\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0418\\u043C\\u044F\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAuth,children:authMode===\"register\"?\"Зарегистрироваться\":\"Войти\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAuthMode(authMode===\"register\"?\"login\":\"register\"),children:authMode===\"register\"?\"Войти\":\"Регистрация\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:220,paddingRight:10,borderRight:\"1px solid #ccc\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u0430\\u043D\\u0430\\u043B\\u044B\"}),channels.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:\"#888\",marginBottom:8},children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u043A\\u0430\\u043D\\u0430\\u043B\\u043E\\u0432\"}),showCreate?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannelName,onChange:e=>setNewChannelName(e.target.value),style:{width:\"90%\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateChannel,style:{marginTop:4},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreate(false),style:{marginLeft:4},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreate(true),children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u0430\\u043D\\u0430\\u043B\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[channels.map(ch=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>setCurrentChannel(ch._id),style:{cursor:\"pointer\",background:currentChannel===ch._id?\"#eee\":\"\",padding:\"2px 0\"},children:ch.name},ch._id)),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:10},onClick:()=>setShowCreate(v=>!v),children:showCreate?\"Скрыть создание\":\"Создать канал\"}),showCreate&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:4},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u043D\\u0430\\u043B\\u0430\",value:newChannelName,onChange:e=>setNewChannelName(e.target.value),style:{width:\"90%\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateChannel,style:{marginTop:4},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:20,color:\"red\"},onClick:()=>{localStorage.removeItem(\"token\");window.location.reload();},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,marginLeft:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0427\\u0430\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{style:{height:300,overflowY:\"auto\",border:\"1px solid #ccc\"},children:[messages.map(m=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[m.sender,\":\"]}),\" \",m.text,m.fileUrl&&/*#__PURE__*/_jsx(\"a\",{href:m.fileUrl,target:\"_blank\",rel:\"noopener noreferrer\",children:\"[\\u0444\\u0430\\u0439\\u043B]\"})]},m._id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{children:typing}),/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(currentChannel){socketRef.current.emit(\"typing\",{channel:currentChannel});if(e.key===\"Enter\")handleSend();}},disabled:!currentChannel,placeholder:currentChannel?\"Введите сообщение...\":\"Выберите канал\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,disabled:!currentChannel||!input.trim(),children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","io","chatStyles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","App","token","setToken","localStorage","getItem","channels","setChannels","currentChannel","setCurrentChannel","messages","setMessages","input","setInput","typing","setTyping","showCreate","setShowCreate","newChannelName","setNewChannelName","authMode","setAuthMode","username","setUsername","password","setPassword","error","setError","socketRef","messagesEndRef","parseJwt","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","get","concat","headers","Authorization","then","res","data","catch","current","auth","on","msg","prev","channel","e","user","handleNewChannel","window","location","reload","disconnect","off","emit","scrollIntoView","behavior","getUsername","t","n","_unused","myUsername","handler","handleCreateChannel","trim","Buffer","isBuffer","from","String","post","name","members","channelsRes","_id","_unused2","alert","handleSend","text","sender","handleAuth","setItem","err","response","children","style","color","placeholder","value","onChange","target","type","onClick","display","width","paddingRight","borderRight","length","marginBottom","marginTop","marginLeft","ch","cursor","background","padding","v","removeItem","flex","height","overflowY","border","m","fileUrl","href","rel","ref","onKeyDown","key","disabled"],"sources":["D:/prr/prr/semak4/driver/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { io } from \"socket.io-client\";\r\nimport chatStyles from './styles/chatStyles';\r\n\r\nconst API_URL = \"http://localhost:5000/api\";\r\n\r\nexport default function App() {\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n  const [channels, setChannels] = useState([]);\r\n  const [currentChannel, setCurrentChannel] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [typing, setTyping] = useState(\"\");\r\n  const [showCreate, setShowCreate] = useState(false);\r\n  const [newChannelName, setNewChannelName] = useState(\"\");\r\n  const [authMode, setAuthMode] = useState(\"login\"); // \"login\" | \"register\"\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const socketRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Функция для корректного декодирования JWT с поддержкой Unicode\r\n  function parseJwt(token) {\r\n    const base64Url = token.split(\".\")[1];\r\n    const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    const jsonPayload = decodeURIComponent(\r\n      atob(base64)\r\n        .split(\"\")\r\n        .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n        .join(\"\")\r\n    );\r\n    return JSON.parse(jsonPayload);\r\n  }\r\n\r\n  // Загружаем список каналов при загрузке и при изменении токена\r\n  useEffect(() => {\r\n    if (token) {\r\n      axios\r\n        .get(`${API_URL}/channels`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setChannels(res.data))\r\n        .catch(() => setChannels([]));\r\n      socketRef.current = io(\"http://localhost:5000\", {\r\n        auth: { token },\r\n      });\r\n      socketRef.current.on(\"message\", (msg) => {\r\n        setMessages((prev) =>\r\n          msg.channel === currentChannel ? [...prev, msg] : prev\r\n        );\r\n      });\r\n      socketRef.current.on(\"typing\", (e) => setTyping(`${e.user} печатает...`));\r\n      // --- подписка на новый канал ---\r\n      const handleNewChannel = () => {\r\n        window.location.reload();\r\n      };\r\n      socketRef.current.on(\"new-channel\", handleNewChannel);\r\n      return () => {\r\n        socketRef.current && socketRef.current.disconnect();\r\n        socketRef.current && socketRef.current.off(\"new-channel\", handleNewChannel);\r\n      };\r\n    }\r\n  }, [token]);\r\n\r\n  // Загружаем сообщения выбранного канала\r\n  useEffect(() => {\r\n    if (token && currentChannel) {\r\n      axios\r\n        .get(`${API_URL}/messages/${currentChannel}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        .then((res) => setMessages(res.data));\r\n      if (socketRef.current) socketRef.current.emit(\"join\", currentChannel);\r\n    }\r\n  }, [token, currentChannel]);\r\n\r\n  // Прокрутка вниз при изменении сообщений\r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }\r\n  }, [messages]);\r\n\r\n  // Получаем username текущего пользователя из токена\r\n  const getUsername = () => {\r\n    if (!token) return \"\";\r\n    try {\r\n      const t = token.split(\".\")[1].replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n      const n = decodeURIComponent(\r\n        atob(t)\r\n          .split(\"\")\r\n          .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n          .join(\"\")\r\n      );\r\n      return JSON.parse(n).username;\r\n    } catch {\r\n      return \"\";\r\n    }\r\n  };\r\n  const myUsername = getUsername();\r\n\r\n  // Подписка на новые сообщения по сокету\r\n  useEffect(() => {\r\n    if (!socketRef.current) return;\r\n    const handler = (msg) => {\r\n      if (msg.channel === currentChannel) {\r\n        setMessages((prev) => [...prev, msg]);\r\n      }\r\n    };\r\n    socketRef.current.on(\"message\", handler);\r\n    return () => {\r\n      socketRef.current.off(\"message\", handler);\r\n    };\r\n  }, [currentChannel, socketRef.current]);\r\n\r\n  // Создание канала\r\n  const handleCreateChannel = async () => {\r\n    if (!newChannelName.trim()) return;\r\n    try {\r\n      const user = parseJwt(token).username;\r\n      // Передаем массив с текущим пользователем\r\n      let t = parseJwt(token).username;\r\n      if (typeof t !== \"string\") {\r\n        if (typeof Buffer !== \"undefined\" && Buffer.isBuffer(t)) {\r\n          t = Buffer.from(t).toString(\"utf8\");\r\n        } else {\r\n          t = String(t);\r\n        }\r\n      }\r\n      t = t.trim();\r\n      const res = await axios.post(\r\n        `${API_URL}/channels`,\r\n        { name: newChannelName, members: [t] },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setShowCreate(false);\r\n      setNewChannelName(\"\");\r\n      // Обновить список каналов\r\n      const channelsRes = await axios.get(`${API_URL}/channels`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setChannels(channelsRes.data);\r\n      setCurrentChannel(res.data._id);\r\n      socketRef.current && socketRef.current.emit(\"join\", res.data._id);\r\n      // --- оповещение других клиентов о новом канале ---\r\n      socketRef.current && socketRef.current.emit(\"new-channel\");\r\n    } catch {\r\n      alert(\"Ошибка создания канала\");\r\n    }\r\n  };\r\n\r\n  // Отправка сообщения\r\n  const handleSend = () => {\r\n    if (!input.trim() || !currentChannel) return;\r\n    const user = parseJwt(token).username;\r\n    const msg = {\r\n      text: input,\r\n      sender: user,\r\n      channel: currentChannel,\r\n    };\r\n    // Перед отправкой сообщения обязательно join в канал\r\n    if (socketRef.current) socketRef.current.emit(\"join\", currentChannel);\r\n    // Отправляем сообщение через сокет\r\n    socketRef.current.emit(\"message\", msg);\r\n    setInput(\"\");\r\n  };\r\n\r\n  // Аутентификация\r\n  const handleAuth = async () => {\r\n    setError(\"\");\r\n    try {\r\n      if (authMode === \"register\") {\r\n        await axios.post(`${API_URL}/register`, { username, password });\r\n      }\r\n      const res = await axios.post(`${API_URL}/login`, { username, password });\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      setToken(res.data.token);\r\n    } catch (err) {\r\n      // Показываем ошибку с сервера, если есть\r\n      if (err.response && err.response.data && err.response.data.error) {\r\n        setError(err.response.data.error);\r\n      } else {\r\n        setError(\r\n          \"Неверный логин или пароль, либо пользователь не зарегистрирован\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!token) {\r\n    return (\r\n      <div>\r\n        <h2>{authMode === \"register\" ? \"Регистрация\" : \"Вход\"}</h2>\r\n        {error && <div style={{ color: \"red\" }}>{error}</div>}\r\n        <input\r\n          placeholder=\"Имя\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n        />\r\n        <input\r\n          placeholder=\"Пароль\"\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button onClick={handleAuth}>\r\n          {authMode === \"register\" ? \"Зарегистрироваться\" : \"Войти\"}\r\n        </button>\r\n        <button onClick={() => setAuthMode(authMode === \"register\" ? \"login\" : \"register\")}>\r\n          {authMode === \"register\" ? \"Войти\" : \"Регистрация\"}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <div style={{ width: 220, paddingRight: 10, borderRight: \"1px solid #ccc\" }}>\r\n        <h3>Каналы</h3>\r\n        {channels.length === 0 ? (\r\n          <div>\r\n            <div style={{ color: \"#888\", marginBottom: 8 }}>\r\n              Нет доступных каналов\r\n            </div>\r\n            {showCreate ? (\r\n              <div>\r\n                <input\r\n                  placeholder=\"Название канала\"\r\n                  value={newChannelName}\r\n                  onChange={(e) => setNewChannelName(e.target.value)}\r\n                  style={{ width: \"90%\" }}\r\n                />\r\n                <button onClick={handleCreateChannel} style={{ marginTop: 4 }}>\r\n                  Создать\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowCreate(false)}\r\n                  style={{ marginLeft: 4 }}\r\n                >\r\n                  Отмена\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <button onClick={() => setShowCreate(true)}>\r\n                Создать канал\r\n              </button>\r\n            )\r\n            }\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {channels.map((ch) => (\r\n              <div\r\n                key={ch._id}\r\n                onClick={() => setCurrentChannel(ch._id)}\r\n                style={{\r\n                  cursor: \"pointer\",\r\n                  background: currentChannel === ch._id ? \"#eee\" : \"\",\r\n                  padding: \"2px 0\",\r\n                }}\r\n              >\r\n                {ch.name}\r\n              </div>\r\n            ))}\r\n            <button\r\n              style={{ marginTop: 10 }}\r\n              onClick={() => setShowCreate((v) => !v)}\r\n            >\r\n              {showCreate ? \"Скрыть создание\" : \"Создать канал\"}\r\n            </button>\r\n            {showCreate && (\r\n              <div style={{ marginTop: 4 }}>\r\n                <input\r\n                  placeholder=\"Название канала\"\r\n                  value={newChannelName}\r\n                  onChange={(e) => setNewChannelName(e.target.value)}\r\n                  style={{ width: \"90%\" }}\r\n                />\r\n                <button onClick={handleCreateChannel} style={{ marginTop: 4 }}>\r\n                  Создать\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n        <button\r\n          style={{ marginTop: 20, color: \"red\" }}\r\n          onClick={() => {\r\n            localStorage.removeItem(\"token\");\r\n            window.location.reload();\r\n          }}\r\n        >\r\n          Выйти\r\n        </button>\r\n      </div>\r\n      <div style={{ flex: 1, marginLeft: 20 }}>\r\n        <h3>Чат</h3>\r\n        <div style={{ height: 300, overflowY: \"auto\", border: \"1px solid #ccc\" }}>\r\n          {messages.map((m) => (\r\n            <div key={m._id}>\r\n              <b>{m.sender}:</b>{\" \"}\r\n              {m.text}\r\n              {m.fileUrl && (\r\n                <a href={m.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  [файл]\r\n                </a>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        <div>{typing}</div>\r\n        <input\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          onKeyDown={(e) => {\r\n            if (currentChannel) {\r\n              socketRef.current.emit(\"typing\", { channel: currentChannel });\r\n              if (e.key === \"Enter\") handleSend();\r\n            }\r\n          }}\r\n          disabled={!currentChannel}\r\n          placeholder={\r\n            currentChannel\r\n              ? \"Введите сообщение...\"\r\n              : \"Выберите канал\"\r\n          }\r\n        />\r\n        <button\r\n          onClick={handleSend}\r\n          disabled={!currentChannel || !input.trim()}\r\n        >\r\n          Отправить\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}